{
	"$id": "https://www.residentprogram.com/schemas/merit-report.json#",
	"title": "Merit Report Checklist",
	"type": "object",
	"properties": {
		"title": {"type": "string"},
		"version": {"type": "number"},
		"pages": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/section"
			}
		}
	},
	"required": [
		"title",
		"version",
		"sections"
	],
	"definitions": {
		"section": {
			"title": "Section",
			"type": "object",
			"properties": {
				"type": {"const": "section"},
				"title": {"type": "string"},
				"items": {
					"type": "array",
					"items": {
						"oneOf": [
							{"$ref": "#/definitions/section"},
							{"$ref": "#/definitions/item"},
							{"$ref": "#/definitions/instruction"}
						]
					}
				}
			},
			"required": ["type", "items"]
		},
		"instruction": {
			"title": "Instruction block",
			"type": "object",
			"properties": {
				"type": {"const": "instruction"},
				"text": {"type": "string"}
			}
		},
		"item": {
			"title": "Checklist item",
			"type": "object",
			"properties": {
				"type": {"const": "item"},
				"text": {"type": "string"},
				"checked": {"type": "boolean"},
				"questions": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/question"
					}
				}
			},
			"required": ["type", "text"]
		},
		"question": {
			"title": "Question",
			"type": "object",
			"oneOf": [
				{"$ref": "#/definitions/question/definitions/text"},
				{"$ref": "#/definitions/question/definitions/number"},
				{"$ref": "#/definitions/question/definitions/checkbox"},
				{"$ref": "#/definitions/question/definitions/radio"},
				{"$ref": "#/definitions/question/definitions/list"}
			],
			"definitions": {
				"properties": {
					"title": "Question properties",
					"type": "array",
					"items": {
						"type": "string",
						"enum": [
							"required"
						]
					}
				},
				"text": {
					"title": "Text question",
					"type": "object",
					"properties": {
						"type": {"enum": ["text", "textarea"]},
						"text": {"type": "string"},
						"description": {"type": "string"},
						"placeholder": {"type": "string"},
						"properties": {"$ref": "#/definitions/question/definitions/properties"},
						"value": {"type": "string"}
					},
					"required": [
						"type",
						"text"
					]
				},
				"number": {
					"title": "Number question",
					"type": "object",
					"properties": {
						"type": {"const": "number"},
						"text": {"type": "string"},
						"description": {"type": "string"},
						"placeholder": {"type": "string"},
						"min": {"type": "number"},
						"max": {"type": "number"},
						"properties": {"$ref": "#/definitions/question/definitions/properties"},
						"value": {"type": "number"}
					},
					"required": [
						"type",
						"text"
					]
				},
				"checkbox": {
					"title": "Checkbox question",
					"type": "object",
					"properties": {
						"type": {"const": "checkbox"},
						"text": {"type": "string"},
						"description": {"type": "string"},
						"options": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"text": {"type": "string"},
									"description": {"type": "string"},
									"value": {
										"oneOf": [
											{"type": "string"},
											{"type": "number"}
										]
									},
									"checked": {"type": "boolean"}
								},
								"required": ["text", "value"]
							}
						}
					},
					"required": [
						"type",
						"text",
						"options"
					]
				},
				"radio": {
					"title": "Radio question",
					"type": "object",
					"properties": {
						"type": {"const": "radio"},
						"text": {"type": "string"},
						"description": {"type": "string"},
						"options": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"text": {"type": "string"},
									"description": {"type": "string"},
									"value": {
										"oneOf": [
											{"type": "string"},
											{"type": "number"}
										]
									},
									"checked": {"type": "boolean"}
								},
								"required": [
									"text"
								]
							}
						}
					},
					"required": [
						"type",
						"text",
						"options"
					]
				},
				"list": {
					"title": "List question",
					"type": "object",
					"properties": {
						"type": {"const": "list"},
						"text": {"type": "string"},
						"description": {"type": "string"},
						"ordered": {"type": "boolean"},
						"items": {
							"type": "array",
							"items": {
								"oneOf": [
									{"$ref": "#/definitions/question/definitions/list/definitions/text"},
									{"$ref": "#/definitions/question/definitions/list/definitions/publication"}
								]
							}
						}
					},
					"required": [
						"type",
						"text"
					],
					"definitions": {
						"text": {
							"title": "Text list item",
							"type": "object",
							"properties": {
								"type": {"const": "text"},
								"text": {"type": "string"}
							},
							"required": [
								"type",
								"text"
							]
						},
						"publication": {
							"title": "Publication list item",
							"type": "object",
							"properties": {
								"type": {"const": "publication"},
								"title": {"type": "string"},
								"author": {"type": "string"},
								"link": {"type": "string"},
								"role": {"type": "string"}
							},
							"required": [
								"type",
								"title",
								"author",
								"role"
							]
						}
					}
				}
			}
		}
	}
}
