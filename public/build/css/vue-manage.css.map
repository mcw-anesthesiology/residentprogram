{"version":3,"sources":["webpack:///./resources/assets/js/vue-components/BootstrapAlert.vue","webpack:///./resources/assets/js/vue-components/FormBuilder/FormBuilder.vue","webpack:///./resources/assets/js/vue-components/FormBuilder/FormBuilderQuestion.vue","webpack:///./resources/assets/js/vue-components/FormBuilder/FormBuilderOption.vue","webpack:///./resources/assets/js/vue-components/ShowHideButton.vue","webpack:///./resources/assets/js/vue-components/DataTable.vue","webpack:///./resources/assets/js/vue-components/SvgIcon.vue","webpack:///./resources/assets/js/vue-components/StartEndDate.vue","webpack:///./resources/assets/js/vue-components/ComponentList.vue","webpack:///./resources/assets/js/vue-components/ListPaginator.vue","webpack:///./resources/assets/js/vue-components/EmailEditor.vue","webpack:///./resources/assets/js/vue-components/MediumEditor.vue","webpack:///./resources/assets/js/vue-components/ReplacementList.vue","webpack:///./resources/assets/js/vue-components/RichDate.vue","webpack:///./resources/assets/js/vue-components/RichDateRange.vue","webpack:///./resources/assets/js/vue-components/FormReader/FormReader.vue","webpack:///./resources/assets/js/vue-components/OrderingList.vue","webpack:///./resources/assets/js/vue-components/JsonSchemaEditor.vue","webpack:///./resources/assets/js/vue-components/Manage/Merit/FormListItem.vue","webpack:///./resources/assets/js/vue-components/Alumni/AlumniListItem.vue","webpack:///./resources/assets/js/vue-components/Alumni/Edit.vue","webpack:///./resources/assets/js/vue-components/Alumni/Import.vue"],"names":[],"mappings":";AAqDA;CACA;CACA;;ACiTA;CACA;CACA;CACA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;CACA;CACA;CACA;;AClDA;CACA;CACA;CACA;CACA;;ACtQA;CACA;CACA;AAEA;CACA;CACA;AAEA;;;CAGA;CACA;AAEA;CACA;CACA;CACA;;AC9CA;AACA;EACA;CACA;CACA;;ACgJA;CACA;CACA;AAEA;AACA;EACA;CACA;CACA;;ACjKA;;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;;ACgHA;CACA;CACA;;AC+EA;CACA;CACA;AAEA;CACA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;AC9MA;CACA;CACA;AAEA;CACA;CACA;;ACsRA;CACA;CACA;AAEA;CACA;CACA;;ACrQA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1EA;CACA;CACA;AAEA;CACA;CACA;;AC6BA;CACA;CACA;;ACDA;CACA;CACA;;AC4BA;CACA;CACA;AAEA;CACA;CACA;CACA;;AC+CA;CACA;CACA;AAEA;;CAEA;CACA;CACA;AAEA;;CAEA;CACA;CACA;AAEA;CACA;CACA;CACA;CACA;AAEA;CACA;CACA;AAEA;CAEA;;ACPA;CACA;CACA;CACA;CACA;CACA;;AC1HA;CACA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;CACA;CACA;AAEA;CACA;CACA;CACA;AAEA;CACA;CACA;;ACkBA;CACA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;;AC0MA;CACA;CACA;CACA;CACA;AAEA;CACA;CACA;CACA;AAEA;CACA;CACA;;AC+DA;CACA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;AAEA;;CAEA;CACA;AAEA;CACA;CACA;AAEA;CACA;CACA;CACA","file":"../css/vue-manage.css","sourcesContent":["<template>\n\t<div class=\"alert\" :class=\"alertTypeClass\">\n\t\t<button v-if=\"dismissable\" type=\"button\" class=\"close\" aria-label=\"Close\"\n\t\t\t\t@click=\"$emit('close')\">\n\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t</button>\n\t\t{{ text }}\n\t\t<div v-if=\"html\" v-html=\"html\"></div>\n\t\t<slot></slot>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\tdefault: 'error',\n\t\t\tvalidator(type){\n\t\t\t\treturn [\n\t\t\t\t\t'info',\n\t\t\t\t\t'success',\n\t\t\t\t\t'warning',\n\t\t\t\t\t'error',\n\t\t\t\t\t'danger'\n\t\t\t\t].includes(type);\n\t\t\t}\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\thtml: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tdismissable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tcomputed: {\n\t\talertTypeClass(){\n\t\t\tif(this.type === 'error')\n\t\t\t\treturn 'alert-danger';\n\t\t\t\n\t\t\treturn `alert-${this.type}`;\n\t\t}\n\t}\n};\n</script>\n\n<style scoped>\n\t.alert {\n\t\tpage-break-inside: avoid;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/BootstrapAlert.vue?6c1ead4e","<template>\n\t<div class=\"form-header\">\n\t\t<div class=\"container-fluid\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<div :class=\"fixedFormType ? 'col-md-9' : 'col-md-6'\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label for=\"form-title\">Form title</label>\n\t\t\t\t\t\t<input type=\"text\" v-model.trim=\"title\" id=\"form-title\"\n\t\t\t\t\t\t\tclass=\"form-control input-lg\" name=\"formTitle\"\n\t\t\t\t\t\t\tplaceholder=\"Form Title\" required />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-3\">\n\t\t\t\t\t<div class=\"form-group\" v-if=\"!fixedFormType\">\n\t\t\t\t\t\t<label for=\"form-type\">Form type</label>\n\t\t\t\t\t\t<select class=\"form-control input-lg\" v-model=\"formType\" id=\"form-type\" name=\"form_type\">\n\t\t\t\t\t\t\t<option value=\"resident\">Resident/Intern</option>\n\t\t\t\t\t\t\t<option value=\"self-resident\">Resident/Intern (self)</option>\n\t\t\t\t\t\t\t<option value=\"fellow\">Fellow</option>\n\t\t\t\t\t\t\t<option value=\"self-fellow\">Fellow (self)</option>\n\t\t\t\t\t\t\t<option value=\"faculty\">Faculty</option>\n\t\t\t\t\t\t\t<option value=\"staff\">Staff</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-3\">\n\t\t\t\t\t<div class=\"form-group\" v-if=\"!fixedPeriodType\">\n\t\t\t\t\t\t<label for=\"form-period-type\">Evaluation period type</label>\n\t\t\t\t\t\t<select class=\"form-control input-lg\" v-model=\"periodType\" id=\"form-period-type\">\n\t\t\t\t\t\t\t<option value=\"month\">Month</option>\n\t\t\t\t\t\t\t<option value=\"quarter\">Quarter</option>\n\t\t\t\t\t\t\t<option value=\"year\">Year</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"form-body\">\n\t\t\t<div class=\"form-items\">\n\t\t\t\t<template v-for=\"(item, index) of items\">\n\t\t\t\t\t<div class=\"form-item\">\n\t\t\t\t\t\t<form-builder-instruction v-if=\"item.type === 'instruction'\"\n\t\t\t\t\t\t\tv-bind=\"item\" @change=\"changeItem(index, $event)\"\n\t\t\t\t\t\t\t@input=\"changeItem(index, $event)\"\n\t\t\t\t\t\t\t@remove=\"removeItem(index)\">\n\t\t\t\t\t\t</form-builder-instruction>\n\t\t\t\t\t\t<form-builder-question v-if=\"item.type === 'question'\"\n\t\t\t\t\t\t\tv-bind=\"item\" :form-type=\"formType\"\n\t\t\t\t\t\t\t:grouped-milestones=\"groupedMilestones\"\n\t\t\t\t\t\t\t:all-competencies=\"competencies\"\n\t\t\t\t\t\t\t:custom-options=\"customOptions\"\n\t\t\t\t\t\t\t:show-milestones-competencies=\"showMilestonesCompetencies\"\n\t\t\t\t\t\t\t@change=\"changeItem(index, $event)\"\n\t\t\t\t\t\t\t@remove=\"removeItem(index)\">\n\t\t\t\t\t\t</form-builder-question>\n\t\t\t\t\t\t<div class=\"btn-group-vertical\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\"\n\t\t\t\t\t\t\t\t\t:disabled=\"index === 0\"\n\t\t\t\t\t\t\t\t\t@click=\"moveItem(index, index - 1)\">\n\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-arrow-up\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\"\n\t\t\t\t\t\t\t\t\t:disabled=\"index === items.length - 1\"\n\t\t\t\t\t\t\t\t\t@click=\"moveItem(index, index + 1)\">\n\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-arrow-down\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t\t<div id=\"form-footer\">\n\t\t\t<alert-list v-model=\"alerts\" />\n\t\t\t<div>\n\t\t\t\t<button type=\"button\" class=\"btn btn-default\"\n\t\t\t\t\t\tid=\"add-instruction-block\"\n\t\t\t\t\t\t@click=\"addInstruction\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-pencil\"></span>\n\t\t\t\t\tAdd instruction block\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"btn btn-info\" id=\"addQuestion\"\n\t\t\t\t\t\t@click=\"addQuestion\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-question-sign\"></span>\n\t\t\t\t\tAdd question\n\t\t\t\t</button>\n\t\t\t\t<show-hide-button class=\"btn btn-default\"\n\t\t\t\t\t\tv-model=\"show.customOptionsEditor\">\n\t\t\t\t\tcustom options editor\n\t\t\t\t</show-hide-button>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"show.customOptionsEditor\"\n\t\t\t\t\tclass=\"custom-options-editor-container\">\n\t\t\t\t<textarea class=\"custom-options-editor form-control\"\n\t\t\t\t\trows=\"10\"\n\t\t\t\t\t:value=\"customOptionsString\"\n\t\t\t\t\t@change=\"changeCustomOptions\">\n\t\t\t\t</textarea>\n\t\t\t</div>\n\n\t\t\t<div class=\"btn-lg-submit-container\">\n\t\t\t\t<confirmation-button class=\"btn btn-lg btn-primary\"\n\t\t\t\t\t\t@click=\"submitForm\">\n\t\t\t\t\tSubmit form\n\t\t\t\t</confirmation-button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport FormBuilderInstruction from './FormBuilderInstruction.vue';\nimport FormBuilderQuestion from './FormBuilderQuestion.vue';\nimport AlertList from '../AlertList.vue';\nimport ShowHideButton from '../ShowHideButton.vue';\nimport ConfirmationButton from '../ConfirmationButton.vue';\n\nimport { fetchMilestoneGroups } from 'modules/utils.js';\n\nexport default {\n\tprops: {\n\t\toldFormContents: {\n\t\t\ttype: Object,\n\t\t\trequired: false\n\t\t},\n\t\tfixedFormType: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tfixedPeriodType: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tdefaultFormType: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tdefaultPeriodType: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tshowMilestonesCompetencies: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata(){\n\t\treturn {\n\t\t\ttitle: '',\n\t\t\tformType: this.fixedFormType || this.defaultFormType || 'resident',\n\t\t\tperiodType: this.fixedPeriodType || this.defaultPeriodType || 'month',\n\t\t\tnextQuestionIdNum: 1,\n\t\t\tgroupedMilestones: [],\n\t\t\tcompetencies: [],\n\t\t\titems: [],\n\t\t\tcustomOptions: [],\n\n\t\t\tshow: {\n\t\t\t\tcustomOptionsEditor: false\n\t\t\t},\n\n\t\t\talerts: []\n\t\t};\n\t},\n\n\tmounted(){\n\t\tif (this.showMilestonesCompetencies) {\n\t\t\tfetchMilestoneGroups().then(milestoneGroups => {\n\t\t\t\tthis.groupedMilestones = milestoneGroups;\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\n\t\t\tfetch('/competencies', { credentials: 'same-origin' }).then(response => {\n\t\t\t\tif(response.ok)\n\t\t\t\t\treturn response.json();\n\t\t\t\telse {\n\t\t\t\t\tlet err = new Error(response.statusText);\n\t\t\t\t\terr.response = response;\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\t\t\t}).then(competencies => {\n\t\t\t\tthis.competencies = competencies;\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tcustomOptionsString() {\n\t\t\ttry {\n\t\t\t\treturn JSON.stringify(this.customOptions, null, 4);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\n\t\t\treturn 'ERROR DISPLAYING CUSTOM OPTIONS';\n\t\t}\n\t},\n\n\tmethods: {\n\t\taddInstruction() {\n\t\t\tthis.items.push({\n\t\t\t\ttype: 'instruction',\n\t\t\t\ttext: ''\n\t\t\t});\n\t\t},\n\t\taddQuestion() {\n\t\t\tthis.items.push({\n\t\t\t\ttype: 'question',\n\t\t\t\ttext: '',\n\t\t\t\tquestionIdNum: this.nextQuestionIdNum++,\n\t\t\t\tquestionType: 'radio',\n\t\t\t\tmilestones: null,\n\t\t\t\tcompetencies: null,\n\t\t\t\toptions: [],\n\t\t\t\trequired: false,\n\t\t\t\tweight: 100\n\t\t\t});\n\t\t},\n\t\tchangeItem(index, item) {\n\t\t\tthis.items.splice(index, 1, Object.assign({}, this.items[index], item));\n\t\t},\n\t\tmoveItem(index, newIndex) {\n\t\t\tthis.items.splice(newIndex, 0, this.items.splice(index, 1)[0]);\n\t\t\tthis.adjustQuestionIdNums();\n\t\t},\n\t\tremoveItem(index) {\n\t\t\tthis.items.splice(index, 1);\n\t\t\tthis.adjustQuestionIdNums();\n\t\t},\n\t\tadjustQuestionIdNums() {\n\t\t\tlet num = 1;\n\t\t\tthis.items = this.items.map(item =>\n\t\t\t\titem.type === 'question'\n\t\t\t\t\t? Object.assign({}, item, {questionIdNum: num++})\n\t\t\t\t\t: Object.assign({}, item)\n\t\t\t);\n\t\t\tthis.nextQuestionIdNum = num;\n\t\t},\n\t\tchangeCustomOptions(event) {\n\t\t\ttry {\n\t\t\t\tlet customOptions = JSON.parse(event.target.value);\n\t\t\t\tif (Array.isArray(customOptions))\n\t\t\t\t\tthis.customOptions = customOptions;\n\t\t\t\telse\n\t\t\t\t\tthrow new Error('Not an array');\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t\tthis.alerts.push({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\ttext: 'Unable to set custom options'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tsubmitForm() {\n\t\t\tif (this.isFormValid()) {\n\t\t\t\tthis.$emit('submit', {\n\t\t\t\t\ttitle: this.title,\n\t\t\t\t\tformType: this.formType,\n\t\t\t\t\tevaluation_period_type: this.periodType,\n\t\t\t\t\titems: this.items.map(item => {\n\t\t\t\t\t\tif (item.type === 'question')\n\t\t\t\t\t\t\titem.questionId = `q${item.questionIdNum}`;\n\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tisFormValid() {\n\t\t\tif (!this.title) {\n\t\t\t\tthis.alerts.push({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\ttext: 'Please enter a title for the form'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!this.items || this.items.length < 1) {\n\t\t\t\tthis.alerts.push({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\ttext: 'Please enter at least one question'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfor (let item of this.items) {\n\t\t\t\tif (item.type === 'question') {\n\t\t\t\t\tif (!item.text) {\n\t\t\t\t\t\tthis.alerts.push({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: `Please enter question text for question ${item.questionIdNum}`\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (['radio', 'radiononnumeric', 'checkbox'].includes(item.questionType)) {\n\t\t\t\t\t\tif(!item.options || item.options.length < 1){\n\t\t\t\t\t\t\tthis.alerts.push({\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\ttext: `Please add at least one option for each multiple-choice question`\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (let option of item.options) {\n\t\t\t\t\t\t\tif (!('value' in option)) {\n\t\t\t\t\t\t\t\tthis.alerts.push({\n\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\ttext: `An option cannot be submitted without a value. Please either assign a value or remove the option text and description for each option in question ${item.questionIdNum}`\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (item.type === 'instruction') {\n\t\t\t\t\tif (!item.text) {\n\t\t\t\t\t\tthis.alerts.push({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: 'Please complete or remove all empty instruction blocks'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.alerts.push({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: 'Unrecognized item type in form'\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t},\n\twatch: {\n\t\toldFormContents(formContents) {\n\t\t\tthis.title = formContents.title;\n\t\t\tthis.formType = formContents.formType;\n\t\t\tthis.items = formContents.items.slice();\n\t\t\tfor (let item of this.items) {\n\t\t\t\tif (item.questionIdNum && item.questionIdNum >= this.nextQuestionIdNum)\n\t\t\t\t\tthis.nextQuestionIdNum = item.questionIdNum + 1;\n\t\t\t}\n\t\t}\n\t},\n\tcomponents: {\n\t\tFormBuilderInstruction,\n\t\tFormBuilderQuestion,\n\t\tAlertList,\n\t\tShowHideButton,\n\t\tConfirmationButton\n\t}\n};\n</script>\n\n<style scoped>\n\t.form-item {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\n\t.form-item .form-block {\n\t\tflex-grow: 1;\n\t}\n\n\t.custom-options-editor {\n\t\tdisplay: block;\n\t\tmargin: 1em auto;\n\t\tfont-family: monospace;\n\t\twhite-space: pre;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/FormBuilder/FormBuilder.vue?dcc384a0","<template>\n\t<div :id=\"questionId\" class=\"form-question panel panel-default form-block\">\n\t\t<div class=\"panel-heading form-horizontal\">\n\t\t\t<div class=\"panel-title form-group\">\n\t\t\t\t<div class=\"col-sm-12\">\n\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\tQuestion Text\n\t\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t\t<span class=\"question-id input-group-addon\">{{questionId}}</span>\n\t\t\t\t\t\t\t<input type=\"text\" :value=\"text\" @input=\"$emit('change', {text: $event.target.value})\" class=\"form-input form-question-text form-control\" placeholder=\"Question Text\" required />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"hr-question\"></div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-4\">\n\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\tQuestion Type\n\t\t\t\t\t\t<select :value=\"questionType\" @change=\"changeQuestionType\" class=\"form-control form-question-type\" name=\"questionType\">\n\t\t\t\t\t\t\t<option value=\"radio\">Radio</option>\n\t\t\t\t\t\t\t<option value=\"text\">Text</option>\n\t\t\t\t\t\t\t<option value=\"radiononnumeric\">Radio (non-numeric)</option>\n\t\t\t\t\t\t\t<option value=\"number\">Number</option>\n\t\t\t\t\t\t\t<option value=\"checkbox\">Checkbox</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t<label>Question Options</label>\n\t\t\t\t\t<div class=\"btn-group btn-group-justified\">\n\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t<button @click=\"setStandardOptions\" class=\"form-question-standard-options btn btn-info\" type=\"button\">\n\t\t\t\t\t\t\t\tStandard\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t<button :disabled=\"!milestones || milestones.length !== 1\" @click=\"setMilestoneOptions\"\n\t\t\t\t\t\t\t\t\tclass=\"form-question-milestone-level-options btn btn-info\" type=\"button\">\n\t\t\t\t\t\t\t\tMilestone\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t<button :disabled=\"!customOptions || customOptions.length < 1\" @click=\"setCustomOptions\"\n\t\t\t\t\t\t\t\t\tclass=\"form-question-custom-options btn btn-info\" type=\"button\">\n\t\t\t\t\t\t\t\tCustom\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-1 labelless-button\">\n\t\t\t\t\t<button @click=\"$emit('remove')\" class=\"form-block-delete btn btn-danger del-btn\" type=\"button\">\n\t\t\t\t\t\tDelete\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-1\">\n\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\tRequired\n\t\t\t\t\t\t<input type=\"checkbox\" :checked=\"required\"\n\t\t\t\t\t\t\tclass=\"form-control form-question-required\" value=\"required\"\n\t\t\t\t\t\t\t@change=\"$emit('change', {required: $event.target.checked})\" />\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<template v-if=\"showMilestonesCompetencies\">\n\t\t\t\t<div class=\"hr-question\"></div>\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-md-8\">\n\t\t\t\t\t\t<label v-show=\"shouldShowMilestonesAndCompetencies\" class=\"containing-label\">\n\t\t\t\t\t\t\tQuestion Milestones\n\t\t\t\t\t\t\t<select-two :value=\"milestones\" :options=\"groupedMilestones\"\n\t\t\t\t\t\t\t\t:multiple=\"true\" @input=\"$emit('change', {milestones: arguments[0]})\"\n\t\t\t\t\t\t\t\tclass=\"form-control form-question-milestone\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-md-4\">\n\t\t\t\t\t\t<label v-show=\"shouldShowMilestonesAndCompetencies\" class=\"containing-label\">\n\t\t\t\t\t\t\tQuestion Competency\n\t\t\t\t\t\t\t<select-two :value=\"competencies\" placeholder=\"Competency\"\n\t\t\t\t\t\t\t\tclass=\"form-control form-question-competency\"\n\t\t\t\t\t\t\t\t:options=\"competencyOptions\" :multiple=\"true\"\n\t\t\t\t\t\t\t\t@input=\"$emit('change', {competencies: arguments[0]})\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\t\n\t\t\t</template>\n\t\t</div>\n\t\t<div class=\"panel-body\">\n\t\t\t<div class=\"row form-options\" style=\"margin-bottom:5px;\">\n\t\t\t\t<template v-if=\"['radio', 'radiononnumeric', 'checkbox'].includes(questionType)\">\n\t\t\t\t\t<form-builder-option v-for=\"(option, index) of optionsWithWorking\"\n\t\t\t\t\t\tv-bind=\"option\" :type=\"questionType\"\n\t\t\t\t\t\t:is-working-option=\"option === workingOption\"\n\t\t\t\t\t\t@input=\"handleWorkingOptionInput(index, arguments[0])\"\n\t\t\t\t\t\t@change=\"handleOptionChange(index, arguments[0])\" />\n\t\t\t\t</template>\n\n\t\t\t\t<div v-if=\"questionType === 'text'\" class=\"col-sm-12\">\n\t\t\t\t\t<textarea class=\"form-control\" placeholder=\"Text\" disabled />\n\t\t\t\t</div>\n\n\t\t\t\t<div v-if=\"questionType === 'number'\" class=\"col-md-8\">\n\t\t\t\t\t<input type=\"number\" class=\"form-control\" placeholder=\"Number\" disabled />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<alert-list v-model=\"alerts\" />\n\t</div>\n</template>\n\n<script>\nimport FormBuilderOption from './FormBuilderOption.vue';\nimport SelectTwo from '../SelectTwo.vue';\nimport AlertList from '../AlertList.vue';\n\nimport { STANDARD_OPTIONS } from 'modules/constants.js';\nimport { sortSelect2Objects } from 'modules/utils.js';\n\nexport default {\n\tprops: {\n\t\tformType: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tgroupedMilestones: {\n\t\t\ttype: Array,\n\t\t\trequired: false\n\t\t},\n\t\tallCompetencies: {\n\t\t\ttype: Array,\n\t\t\trequired: false\n\t\t},\n\t\tquestionIdNum: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tquestionType: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tmilestones: {\n\t\t\ttype: Array,\n\t\t\trequired: false\n\t\t},\n\t\tcompetencies: {\n\t\t\ttype: Array,\n\t\t\trequired: false\n\t\t},\n\t\toptions: {\n\t\t\ttype: Array,\n\t\t\trequired: false\n\t\t},\n\t\trequired: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tcustomOptions: {\n\t\t\ttype: Array,\n\t\t\trequired: false\n\t\t},\n\t\tshowMilestonesCompetencies: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata(){\n\t\treturn {\n\t\t\tworkingOption: {\n\t\t\t\ttext: '',\n\t\t\t\tvalue: '',\n\t\t\t\tdescription: ''\n\t\t\t},\n\t\t\t\n\t\t\talerts: []\n\t\t};\n\t},\n\tcomputed: {\n\t\tquestionId(){\n\t\t\treturn `q${this.questionIdNum}`;\n\t\t},\n\t\tshouldShowMilestonesAndCompetencies(){\n\t\t\treturn ['radio', 'number'].includes(this.questionType) && [\n\t\t\t\t'resident',\n\t\t\t\t'self-resident',\n\t\t\t\t'fellow',\n\t\t\t\t'self-fellow'\n\t\t\t].includes(this.formType);\n\t\t},\n\t\toptionsWithWorking(){\n\t\t\tif(this.options){\n\t\t\t\tlet options = this.options.slice();\n\t\t\t\toptions.push(this.workingOption);\n\t\t\t\treturn options;\n\t\t\t}\n\t\t},\n\t\tworkingOptionIndex(){\n\t\t\tif(this.options)\n\t\t\t\treturn this.options.length;\n\t\t},\n\t\tcompetencyOptions(){\n\t\t\treturn this.allCompetencies.map(competency => ({\n\t\t\t\tid: competency.id,\n\t\t\t\ttext: competency.title\n\t\t\t})).sort(sortSelect2Objects);\n\t\t}\n\t},\n\tmethods: {\n\t\tchangeQuestionType(event){\n\t\t\tconst questionType = event.target.value;\n\t\t\tlet options = [];\n\n\t\t\tthis.$emit('change', {questionType: questionType, options: options});\n\t\t},\n\t\thandleWorkingOptionInput(index, option){\n\t\t\tif(index === this.workingOptionIndex)\n\t\t\t\tthis.workingOption = Object.assign({}, this.workingOption, option);\n\t\t},\n\t\thandleOptionChange(index, option){\n\t\t\tif(index === this.workingOptionIndex){\n\t\t\t\tlet options = this.options.slice();\n\t\t\t\toptions.push(Object.assign({}, this.workingOption, option));\n\t\t\t\tthis.workingOption = {\n\t\t\t\t\ttext: '',\n\t\t\t\t\tvalue: '',\n\t\t\t\t\tdescription: ''\n\t\t\t\t};\n\t\t\t\tthis.$emit('change', {options: options});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet options = this.options.slice();\n\t\t\t\toptions[index] = Object.assign(options[index], option);\n\t\t\t\tif(!options[index].text && !options[index].value && !options[index].description)\n\t\t\t\t\toptions.splice(index, 1);\n\n\t\t\t\tthis.$emit('change', {options: options});\n\t\t\t}\n\t\t},\n\n\t\tsetStandardOptions(){\n\t\t\tlet options;\n\t\t\tswitch(this.formType){\n\t\t\t\tcase 'resident':\n\t\t\t\tcase 'self-resident':\n\t\t\t\t\toptions = STANDARD_OPTIONS.RESIDENT.slice();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'fellow':\n\t\t\t\tcase 'self-fellow':\n\t\t\t\t\toptions = STANDARD_OPTIONS.FELLOW.slice();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'faculty':\n\t\t\t\t\tif(this.questionType === 'radiononnumeric')\n\t\t\t\t\t\toptions = STANDARD_OPTIONS.FACULTY.slice();\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(!options){\n\t\t\t\tthis.alerts.push({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\ttext: 'No standard options found for form type and question type'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('change', {options: options});\n\t\t},\n\t\tsetMilestoneOptions(){\n\t\t\tif(this.milestones.length !== 1){\n\t\t\t\tthis.alerts.push({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\ttext: 'You can only use milestone options with a single selected milestone'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfetch(`/milestones/${this.milestones[0]}`, { credentials: 'same-origin' }).then(response => {\n\t\t\t\tif(response.ok)\n\t\t\t\t\treturn response.json();\n\t\t\t\telse\n\t\t\t\t\tthrow new Error(response);\n\t\t\t}).then(milestone => {\n\t\t\t\tif(!milestone || !milestone.levels || milestone.levels.length < 1){\n\t\t\t\t\tthis.alerts.push({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\ttext: 'No milestone levels found'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet options = [{\n\t\t\t\t\tvalue: 0,\n\t\t\t\t\ttext: `Not yet ${milestone.levels[0].name}`\n\t\t\t\t}];\n\t\t\t\tfor(let level of milestone.levels){\n\t\t\t\t\tlet value = 2 * parseInt(level.level_number, 10);\n\t\t\t\t\toptions.push({value: value - 1, text: '', description: ''});\n\t\t\t\t\toptions.push({value: value, text: level.name, description: level.description});\n\t\t\t\t}\n\n\t\t\t\tthis.$emit('change', {options: options});\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t\t},\n\t\tsetCustomOptions(){\n\t\t\tif(this.customOptions.length < 1){\n\t\t\t\tthis.alerts.push({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\ttext: 'No custom options set'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('change', {options: this.customOptions.slice()});\n\t\t}\n\t},\n\tcomponents: {\n\t\tFormBuilderOption,\n\t\tSelectTwo,\n\t\tAlertList\n\t}\n};\n</script>\n\n<style scoped>\n\t.question-id {\n\t\tfont-size: larger;\n\t\ttext-transform: uppercase;\n\t\tfont-weight: bold;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/FormBuilder/FormBuilderQuestion.vue?7628c427","<template>\n\t<div class=\"form-builder-question-option col-lg-2 col-md-3 col-sm-6 text-center\" v-bind:class=\"{ 'working-option': isWorkingOption, 'is-focused': isFocused }\">\n\t\t<input v-bind:type=\"displayType\" disabled/>\n\t\t<input type=\"text\" v-bind:value=\"text\"\n\t\t\tclass=\"form-input form-option form-option-text form-control\"\n\t\t\tplaceholder=\"Option Text\"\n\t\t\tv-on:input=\"$emit('input', {text: $event.target.value})\"\n\t\t\tv-on:change=\"$emit('change', {text: $event.target.value})\"\n\t\t\tv-on:focus=\"handleInputFocus('text')\"\n\t\t\tv-on:blur=\"handleInputBlur('text')\"\n\t\t\t/>\n\t\t<input v-bind:type=\"type === 'radio' ? 'number' : 'text'\"\n\t\t\tv-bind:value=\"value\"\n\t\t\tclass=\"form-input form-option form-option-value form-control\"\n\t\t\tplaceholder=\"Option Value\"\n\t\t\tv-on:input=\"$emit('input', {value: $event.target.value})\"\n\t\t\tv-on:change=\"$emit('change', {value: $event.target.value})\"\n\t\t\tv-on:focus=\"handleInputFocus('value')\"\n\t\t\tv-on:blur=\"handleInputBlur('value')\"\n\t\t\t/>\n\t\t<textarea v-bind:value=\"description\"\n\t\t\tclass=\"form-input form-option form-option-description form-control\"\n\t\t\tplaceholder=\"Hover Description\"\n\t\t\tv-on:input=\"$emit('input', {description: $event.target.value})\"\n\t\t\tv-on:change=\"$emit('change', {description: $event.target.value})\"\n\t\t\tv-on:focus=\"handleInputFocus('description')\"\n\t\t\tv-on:blur=\"handleInputBlur('description')\"\n\t\t\t>\n\t\t</textarea>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tprops: [\n\t\t'type',\n\t\t'text',\n\t\t'value',\n\t\t'description',\n\t\t'isWorkingOption'\n\t],\n\tcomputed: {\n\t\tdisplayType(){\n\t\t\tif(this.type === 'checkbox')\n\t\t\t\treturn 'checkbox';\n\t\t\telse\n\t\t\t\treturn 'radio';\n\t\t}\n\t},\n\tdata(){\n\t\treturn {\n\t\t\tisFocused: false\n\t\t};\n\t},\n\tmethods: {\n\t\thandleInputFocus(field){\n\t\t\tthis.isFocused = true;\n\t\t\tthis.$emit('focus', field);\n\t\t},\n\t\thandleInputBlur(field){\n\t\t\tthis.isFocused = false;\n\t\t\tthis.$emit('blur', field);\n\t\t}\n\t}\n};\n</script>\n\n<style scoped>\n\t.form-builder-question-option {\n\t\tmargin-top: 10px;\n\t}\n\n\t.working-option {\n\t\topacity: 0.5;\n\t}\n\n\t.working-option:hover,\n\t.working-option.is-focused,\n\t.working-option:active {\n\t\topacity: 1;\n\t}\n\n\ttextarea.form-option-description {\n\t\tresize: vertical;\n\t\theight: 100px;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/FormBuilder/FormBuilderOption.vue?42fcc6c0","<template>\n\t<button type=\"button\" class=\"btn\"\n\t\t\t@click=\"$emit('input', !value)\">\n\t\t\t\n\t\t<slot name=\"left-glyph\"></slot>\n\t\t\t\n\t\t<slot v-if=\"value\" name=\"true\">\n\t\t\tHide\n\t\t</slot>\n\t\t<slot v-else name=\"false\">\n\t\t\tShow\n\t\t</slot>\n\n\t\t<slot>\n\t\t\t{{ text }}\n\t\t</slot>\n\t\t\n\t\t<slot name=\"glyph\">\n\t\t\t<span class=\"glyphicon glyphicon-triangle-bottom\"></span>\n\t\t</slot>\n\t</button>\n</template>\n\n<script>\nexport default {\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t}\n\t}\n};\n</script>\n\n<style scoped>\n\t@media print {\n\t\tbutton {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/ShowHideButton.vue?47c685e9","<template>\n\t<div class=\"table-responsive\">\n\t\t<div class=\"refresh-button-container\" v-if=\"reloadable\">\n\t\t\t<button type=\"button\" class=\"btn btn-default\" title=\"Reload table\"\n\t\t\t\t\t@click=\"reloadTable\">\n\t\t\t\t<span class=\"glyphicon glyphicon-refresh\"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t\n\t\t<table :id=\"id\" class=\"table\" :class=\"tableClass\" width=\"100%\" ref=\"table\">\n\t\t\t<slot>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr v-for=\"(row, rowIndex) of thead\" :key=\"`row-${rowIndex}`\">\n\t\t\t\t\t\t<th v-for=\"(th, thIndex) of row\" :key=\"thIndex\"\n\t\t\t\t\t\t\t\t:rowspan=\"th.rowspan\"\n\t\t\t\t\t\t\t\t:colspan=\"th.colspan\">\n\t\t\t\t\t\t\t{{ th.text || th }}\n\t\t\t\t\t\t</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t</slot>\n\t\t</table>\n\t\t<div v-if=\"exportable && data\" class=\"text-center\">\n\t\t\t<button type=\"button\" class=\"btn btn-default\"\n\t\t\t\t\t@click=\"exportCsv\">\n\t\t\t\tExport CSV\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport download from 'downloadjs';\n\nimport { escapeCsv, sortIgnoreCase } from 'modules/utils.js';\n\nexport default {\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tstriped: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tbordered: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\t\n\t\tthead: {\n\t\t\ttype: Array,\n\t\t\trequired: false\n\t\t},\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\trequired: false\n\t\t},\n\t\tdata: {\n\t\t\ttype: Array,\n\t\t\trequired: false\n\t\t},\n\t\t\n\t\treloader: {\n\t\t\ttype: Function,\n\t\t\trequired: false\n\t\t},\n\t\texportable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\texportFilename: {\n\t\t\ttype: String,\n\t\t\tdefault(){\n\t\t\t\treturn `Table Export ${new Date().toLocaleString()}`;\n\t\t\t}\n\t\t}\n\t},\n\tdata(){\n\t\treturn {\n\t\t\tupdateData: false\n\t\t};\n\t},\n\tmounted(){\n\t\t$(this.$refs.table).DataTable(Object.assign({}, this.config, {data: this.data}));\n\t},\n\tcomputed: {\n\t\ttableClass(){\n\t\t\treturn {\n\t\t\t\t'table-striped': this.striped,\n\t\t\t\t'table-bordered': this.bordered\n\t\t\t};\n\t\t},\n\t\treloadable(){\n\t\t\treturn (this.config && 'ajax' in this.config) || this.reloader; \t\t\t\t\n\t\t}\n\t},\n\twatch: {\n\t\tconfig(){\n\t\t\tlet config = Object.assign({destroy: true}, this.config, {data: this.data});\n\t\t\t$(this.$refs.table).DataTable(config);\n\t\t},\n\t\tdata(data){\n\t\t\tthis.updateData = true;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\t// only set data if table not already recreated with new data\n\t\t\t\tif(this.updateData){\n\t\t\t\t\t$(this.$refs.table).DataTable({\n\t\t\t\t\t\tretrieve: true\n\t\t\t\t\t}).clear().rows.add(data).draw();\n\t\t\t\t\tthis.updateData = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tmethods: {\n\t\treloadTable(){\n\t\t\tif(this.reloader)\n\t\t\t\tthis.reloader();\n\t\t\telse\n\t\t\t\t$(this.$refs.table).DataTable({\n\t\t\t\t\tretrieve: true\n\t\t\t\t}).ajax.reload(null, false);\n\t\t},\n\t\texportCsv(){\n\t\t\tlet header = [];\n\t\t\theader.fill([], this.thead.length);\n\t\t\tthis.thead.map((row, rowIndex) => {\n\t\t\t\tif(!header[rowIndex])\n\t\t\t\t\theader[rowIndex] = [];\n\n\t\t\t\trow.map((cell, cellIndex) => {\n\t\t\t\t\twhile(header[rowIndex][cellIndex])\n\t\t\t\t\t\tcellIndex++;\n\n\t\t\t\t\tif(cell.rowspan){\n\t\t\t\t\t\tfor(let i = 0; i < cell.rowspan; i++){\n\t\t\t\t\t\t\tif(!header[rowIndex + i])\n\t\t\t\t\t\t\t\theader[rowIndex + i] = [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\theader[rowIndex + i][cellIndex] = cell.text;\n\t\t\t\t\t\t\tif(cell.colspan){\n\t\t\t\t\t\t\t\tfor(let j = 0; j < cell.colspan; j++){\n\t\t\t\t\t\t\t\t\theader[rowIndex][cellIndex + j] = cell.text;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(cell.colspan){\n\t\t\t\t\t\tfor(let j = 0; j < cell.colspan; j++){\n\t\t\t\t\t\t\theader[rowIndex][cellIndex + j] = cell.text;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\theader[rowIndex][cellIndex] = cell.text;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\tlet rows = this.data.map(row =>\n\t\t\t\trow.map(cell =>\n\t\t\t\t\tescapeCsv(cell.toString())\n\t\t\t\t).join(',')\n\t\t\t).sort(sortIgnoreCase);\n\t\t\tlet table = header.concat(rows);\n\t\t\tdownload(table.join('\\n'), `${this.exportFilename}.csv`, 'text/csv');\n\t\t}\n\t},\n\tbeforeUpdate(){\n\t\t$(this.$refs.table).DataTable({\n\t\t\tretrieve: true\n\t\t}).clear().destroy();\n\t\tthis.updateData = false;\n\t},\n\tupdated(){\n\t\t$(this.$refs.table).DataTable(Object.assign({}, this.config, {data: this.data}));\n\t},\n\tbeforeDestroy(){\n\t\t$(this.$refs.table).DataTable({\n\t\t\tretrieve: true\n\t\t}).clear().destroy();\n\t}\n};\n</script>\n\n<style scoped>\n\t.refresh-button-container {\n\t\ttext-align: right;\n\t}\n\t\n\t@media print {\n\t\t.refresh-button-container {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/DataTable.vue?71651c5c","<template>\n\t<span class=\"svg-icon\" v-html=\"svg\"></span>\n</template>\n\n<script>\n\nexport default {\n\tprops: {\n\t\tsrc: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata(){\n\t\treturn {\n\t\t\tsvg: null\n\t\t};\n\t},\n\tcreated(){\n\t\tfetch(this.src).then(response => {\n\t\t\tif(response.ok)\n\t\t\t\treturn response.text();\n\t\t\t\n\t\t\tthrow new Error('Unable to load icon');\n\t\t}).then(svg => {\n\t\t\tthis.svg = svg;\n\t\t}).catch(err => {\n\t\t\tconsole.err(err.message);\n\t\t});\n\t}\n};\n</script>\n\n<style>\n\t.svg-icon,\n\t.svg-icon > svg {\n\t\tdisplay: inline-block;\n\t\twidth: 1em;\n\t\theight: 1em;\n\t\tstroke-width: 0;\n\t\tstroke: currentColor;\n\t\tfill: currentColor;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/SvgIcon.vue?782cfc92","<template>\n\t<div class=\"form-horizontal\" ref=\"container\">\n\t\t<div class=\"form-group\">\n\t\t\t<div class=\"col-md-4\">\n\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\tDate Range\n\t\t\t\t\t<select class=\"form-control\" v-model=\"dateRange\">\n\t\t\t\t\t\t<option v-for=\"(range, name) of dateRanges\" :value=\"name\">\n\t\t\t\t\t\t\t{{ camelCaseToWords(name) }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"col-sm-6 col-md-4\">\n\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\tStart Date\n\t\t\t\t\t<vue-flatpickr class=\"form-control\"\n\t\t\t\t\t\t:options=\"flatpickrOptions\" v-model=\"startDate\" />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"col-sm-6 col-md-4\">\n\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\tEnd Date\n\t\t\t\t\t<vue-flatpickr class=\"form-control\"\n\t\t\t\t\t\t:options=\"flatpickrOptions\" v-model=\"endDate\" />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport VueFlatpickr from 'vue-flatpickr';\nimport 'vue-flatpickr/theme/flatpickr.min.css';\n\nimport { camelCaseToWords } from 'modules/utils.js';\nimport * as dateUtils from 'modules/date-utils.js';\n\nexport default {\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\thideDates: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tallTime: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tranges: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn {\n\t\t\t\t\t[dateUtils.DATE_RANGES.CUSTOM]: null,\n\t\t\t\t\t[dateUtils.DATE_RANGES.CURRENT_QUARTER]: dateUtils.currentQuarter(),\n\t\t\t\t\t[dateUtils.DATE_RANGES.LAST_QUARTER]: dateUtils.lastQuarter(),\n\t\t\t\t\t[dateUtils.DATE_RANGES.CURRENT_SEMESTER]: dateUtils.currentSemester(),\n\t\t\t\t\t[dateUtils.DATE_RANGES.LAST_SEMESTER]: dateUtils.lastSemester(),\n\t\t\t\t\t[dateUtils.DATE_RANGES.CURRENT_YEAR]: dateUtils.currentYear(),\n\t\t\t\t\t[dateUtils.DATE_RANGES.LAST_YEAR]: dateUtils.lastYear()\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t},\n\tdata(){\n\t\treturn {\n\t\t\tstartDate: this.value.startDate,\n\t\t\tendDate: this.value.endDate,\n\t\t\tdateRange: dateUtils.DATE_RANGES.CUSTOM\n\t\t};\n\t},\n\tcreated(){\n\t\tthis.matchDateRangeWithValue();\n\t},\n\tcomputed: {\n\t\tdates(){\n\t\t\treturn {\n\t\t\t\tstartDate: this.startDate,\n\t\t\t\tendDate: this.endDate\n\t\t\t};\n\t\t},\n\t\tdateRanges(){\n\t\t\tlet ranges = Object.assign({}, this.ranges);\n\t\t\tif(this.allTime && !ranges[dateUtils.DATE_RANGES.ALL_TIME])\n\t\t\t\tranges[dateUtils.DATE_RANGES.ALL_TIME] = dateUtils.allTime();\n\t\t\telse\n\t\t\t\tdelete ranges[dateUtils.DATE_RANGES.ALL_TIME];\n\t\t\t\n\t\t\treturn ranges;\n\t\t},\n\t\tflatpickrOptions(){\n\t\t\treturn {\n\t\t\t\taltInput: true,\n\t\t\t\taltInputClass: 'form-control appear-not-readonly',\n\t\t\t\taltFormat: 'M j, Y'\n\t\t\t};\n\t\t}\n\t},\n\twatch: {\n\t\tdates(dates){\n\t\t\tthis.$emit('input', dates);\n\t\t},\n\t\tvalue(value){\n\t\t\tthis.matchDateRangeWithValue();\n\t\t\tthis.startDate = value.startDate;\n\t\t\tthis.endDate = value.endDate;\n\t\t},\n\t\tdateRange(dateRange){\n\t\t\tif(dateRange === dateUtils.DATE_RANGES.ALL_TIME)\n\t\t\t\tthis.setDate(dateUtils.allTime());\n\t\t\t\n\t\t\tif(dateRange !== dateUtils.DATE_RANGES.CUSTOM && this.dateRanges[dateRange]\n\t\t\t\t\t&& !dateUtils.datesEqual(this.value, this.dateRanges[dateRange]))\n\t\t\t\tthis.setDate(this.dateRanges[dateRange]);\n\t\t}\n\t},\n\tmethods: {\n\t\tmatchDateRangeWithValue(value = this.value){\n\t\t\tif(this.allTime && !value.startDate && !value.endDate){\n\t\t\t\tthis.dateRange = dateUtils.DATE_RANGES.ALL_TIME;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.dateRange && this.dateRange !== dateUtils.DATE_RANGES.CUSTOM\n\t\t\t\t\t&& this.dateRanges[this.dateRange]\n\t\t\t\t\t&& dateUtils.datesEqual(value, this.dateRanges[this.dateRange]))\n\t\t\t\treturn;\n\n\t\t\tfor(let range of Object.values(dateUtils.DATE_RANGES)){\n\t\t\t\tif(this.dateRanges[range] && dateUtils.datesEqual(value, this.dateRanges[range])){\n\t\t\t\t\tthis.dateRange = range;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dateRange = dateUtils.DATE_RANGES.CUSTOM;\n\t\t},\n\t\tsetDate(dates){\n\t\t\tdates = dateUtils.isoDateStringObject(dates);\n\t\t\tthis.startDate = dates.startDate;\n\t\t\tthis.endDate = dates.endDate;\n\t\t},\n\t\tcamelCaseToWords\n\t},\n\tcomponents: {\n\t\tVueFlatpickr\n\t}\n};\n</script>\n\n<style scoped>\n\t.form-horizontal {\n\t\toverflow-x: hidden;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/StartEndDate.vue?3c215a36","<template>\n\t<div>\n\t\t<div class=\"list-header-controls form-inline\">\n\t\t\t<div class=\"form-group\">\n\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\tSort\n\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t<select class=\"form-control\" v-model=\"sortBy\">\n\t\t\t\t\t\t\t<option v-for=\"field of fields\" :value=\"field\">\n\t\t\t\t\t\t\t\t{{ renderFieldName(field) }}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<span class=\"input-group-btn\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\"\n\t\t\t\t\t\t\t\t\t@click=\"sortOrder = sortOrder === 'asc' ? 'desc' : 'asc'\">\n\t\t\t\t\t\t\t\t<span v-if=\"sortOrder === 'asc'\"\n\t\t\t\t\t\t\t\t\tclass=\"glyphicon glyphicon-sort-by-alphabet\"></span>\n\t\t\t\t\t\t\t\t<span v-else\n\t\t\t\t\t\t\t\t\tclass=\"glyphicon glyphicon-sort-by-alphabet-alt\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"form-group\">\n\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\tSearch\n\t\t\t\t\t<input type=\"search\" class=\"form-control\" v-model=\"query\"\n\t\t\t\t\t\tplaceholder=\"Search\" />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div v-if=\"reloadable\" class=\"form-group\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-default labelless-button\"\n\t\t\t\t\t\t@click=\"$emit('reload')\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-refresh\"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"list-container\">\n\t\t\t<slot name=\"header\"></slot>\n\n\t\t\t<ol v-if=\"itemsToShow\" class=\"list\">\n\t\t\t\t<slot v-for=\"item of currentPageItems\" v-bind=\"item\"></slot>\n\t\t\t</ol>\n\t\t\t<p v-else class=\"no-items-text\">\n\t\t\t\tNo items to show\n\t\t\t</p>\n\n\t\t\t<slot name=\"footer\"></slot>\n\t\t</div>\n\t\t<list-paginator v-if=\"paginate\"\n\t\t\tv-model=\"page\" :paginatedItems=\"paginatedItems\"\n\t\t\t:itemsPerPage=\"itemsPerPage\"\n\t\t\t@pageSize=\"itemsPerPage = arguments[0]\" />\n\t</div>\n</template>\n\n<script>\nimport ListPaginator from './ListPaginator.vue';\n\nimport lunr from 'lunr';\n\nimport { snakeCaseToWords } from 'modules/utils.js';\nimport { sortFunctions } from 'modules/report-utils.js';\n\nexport default {\n\tprops: {\n\t\tfields: {\n\t\t\ttype: Array,\n\t\t\tdefault() {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tfieldAccessors: {\n\t\t\ttype: Object,\n\t\t\trequired: false\n\t\t},\n\t\tdefaultSortBy: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tdefaultSortOrder: {\n\t\t\ttype: String,\n\t\t\tvalidator(order) {\n\t\t\t\treturn ['asc', 'desc'].includes(order);\n\t\t\t},\n\t\t\tdefault: 'asc'\n\t\t},\n\t\tpaginate: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\treloadable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tsortFunctions: {\n\t\t\ttype: Map,\n\t\t\tdefault(){\n\t\t\t\treturn sortFunctions;\n\t\t\t}\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tquery: null,\n\t\t\tpage: 0,\n\t\t\titemsPerPage: 10,\n\t\t\tsortBy: this.defaultSortBy || this.fields[0],\n\t\t\tsortOrder: this.defaultSortOrder\n\t\t};\n\t},\n\tcomputed: {\n\t\titemMap() {\n\t\t\tlet map = new Map();\n\t\t\tthis.items.map(item => {\n\t\t\t\tmap.set(item.id, item);\n\t\t\t});\n\n\t\t\treturn map;\n\t\t},\n\t\tindex() {\n\t\t\tlet fields = this.fields;\n\n\t\t\tlet index = lunr(function() {\n\t\t\t\tfields.map(field => {\n\t\t\t\t\tlet name, options;\n\t\t\t\t\tif (typeof field === 'string') {\n\t\t\t\t\t\tname = field;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tname = field.name;\n\t\t\t\t\t\toptions = field;\n\t\t\t\t\t}\n\t\t\t\t\tthis.field(name, options);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.items.map(item => {\n\t\t\t\tif (this.fieldAccessors) {\n\t\t\t\t\tfor (let field in this.fieldAccessors) {\n\t\t\t\t\t\titem[field] = this.fieldAccessors[field](item, 'search');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tindex.add(item);\n\t\t\t});\n\n\t\t\treturn index;\n\t\t},\n\t\tfilteredItems() {\n\t\t\tif (this.query) {\n\t\t\t\tlet refs = this.index.search(this.query);\n\t\t\t\treturn refs.map(ref => {\n\t\t\t\t\treturn this.itemMap.get(ref.ref);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.items;\n\t\t},\n\t\tsortedItems() {\n\t\t\tif (this.sortBy && this.sortOrder) {\n\n\t\t\t\treturn sortFunctions.has(this.sortBy)\n\t\t\t\t\t? this.filteredItems.sort(sortFunctions.get(this.sortBy))\n\t\t\t\t\t: this.filteredItems.sort((a, b) => {\n\t\t\t\t\t\tlet aValue;\n\t\t\t\t\t\tlet bValue;\n\n\t\t\t\t\t\tif (this.fieldAccessors && this.sortBy in this.fieldAccessors) {\n\t\t\t\t\t\t\taValue = this.fieldAccessors[this.sortBy](a, 'sort');\n\t\t\t\t\t\t\tbValue = this.fieldAccessors[this.sortBy](b, 'sort');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taValue = a[this.sortBy];\n\t\t\t\t\t\t\tbValue = b[this.sortBy];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Number.isNaN(aValue))\n\t\t\t\t\t\t\taValue = aValue.toUpperCase();\n\n\t\t\t\t\t\tif (Number.isNaN(bValue))\n\t\t\t\t\t\t\tbValue = bValue.toUpperCase();\n\n\t\t\t\t\t\tif (aValue < bValue)\n\t\t\t\t\t\t\treturn this.sortOrder === 'asc'\n\t\t\t\t\t\t\t\t? -1\n\t\t\t\t\t\t\t\t: 1;\n\t\t\t\t\t\tif (aValue > bValue)\n\t\t\t\t\t\t\treturn this.sortOrder === 'asc'\n\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t: -1;\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this.filteredItems;\n\t\t},\n\t\tpaginatedItems() {\n\t\t\tif (!this.paginate)\n\t\t\t\treturn this.sortedItems;\n\n\t\t\tlet paginatedItems = [];\n\t\t\tlet items = this.sortedItems.slice();\n\t\t\twhile(items.length > 0)\n\t\t\t\tpaginatedItems.push(items.splice(0, this.itemsPerPage));\n\n\t\t\treturn paginatedItems;\n\t\t},\n\t\tcurrentPageItems() {\n\t\t\tif (!this.paginate)\n\t\t\t\treturn this.sortedItems;\n\n\t\t\treturn this.paginatedItems[this.page];\n\t\t},\n\t\titemsToShow() {\n\t\t\treturn this.filteredItems && this.filteredItems.length > 0;\n\t\t}\n\t},\n\tmethods: {\n\t\trenderFieldName(field) {\n\t\t\tif (field === 'id')\n\t\t\t\treturn 'ID';\n\n\t\t\treturn snakeCaseToWords(field);\n\t\t}\n\t},\n\tcomponents: {\n\t\tListPaginator\n\t}\n};\n</script>\n\n<style scoped>\n\t.list-header-controls {\n\t\ttext-align: right;\n\t}\n\n\t.list-header-controls input[type=\"search\"] {\n\t\twidth: 300px;\n\t\tmax-width: 100%;\n\t}\n\n\t.list-header-controls.form-inline .input-group > .form-control {\n\t\twidth: auto;\n\t}\n\n\t.list-container {\n\t\tmargin: 3em 0;\n\t}\n\n\t.list {\n\t\tpadding: 0;\n\t}\n\n\t.list li {\n\t\tlist-style: none;\n\t}\n\n\t.containing-label {\n\t\ttext-align: left;\n\t}\n\n\t.containing-label > * {\n\t\tdisplay: block;\n\t}\n\n\t.no-items-text {\n\t\tpadding: 0.5em 0;\n\t\tborder: 1px solid rgba(0, 0, 0, 0.15);\n\t\tborder-left: none;\n\t\tborder-right: none;\n\t\ttext-align: center;\n\t\tfont-size: 1.25em;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/ComponentList.vue?287c99c2","<template>\n\t<section class=\"paginator\">\n\t\t<div class=\"form-inline\">\n\t\t\t<div class=\"form-group\">\n\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\tCurrent page:\n\t\t\t\t\t<input type=\"number\" class=\"form-control\" :value=\"value + 1\"\n\t\t\t\t\t\tmin=\"1\" :max=\"paginatedItems.length\"\n\t\t\t\t\t\t@input=\"$emit('input', Number($event.target.value) - 1)\" />\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"form-group\">\n\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\tItems per page:\n\t\t\t\t\t<select class=\"form-control\" :value=\"itemsPerPage\"\n\t\t\t\t\t\t\t@input=\"$emit('pageSize', Number($event.target.value))\">\n\t\t\t\t\t\t<option value=\"5\">5</option>\n\t\t\t\t\t\t<option value=\"10\">10</option>\n\t\t\t\t\t\t<option value=\"20\">20</option>\n\t\t\t\t\t\t<option value=\"50\">50</option>\n\t\t\t\t\t\t<option value=\"100\">100</option>\n\t\t\t\t\t</select>\n\t\t\t\t</label>\n\t\t\t</div>\t\t\t\n\t\t</div>\n\t\t<nav v-if=\"itemsPerPage && paginatedItems.length > 1\">\n\t\t\t<div class=\"btn-group\">\n\t\t\t\t<paginator-link :value=\"value - 1\" text=\"← Prev\"\n\t\t\t\t\t:active=\"value === 0\" @click=\"setPage\" />\n\n\t\t\t\t<paginator-link v-for=\"(pageItems, pageNum) of paginatedItems\"\n\t\t\t\t\t:value=\"pageNum\" :active=\"pageNum === value\"\n\t\t\t\t\t@click=\"setPage\" />\n\n\t\t\t\t<paginator-link :value=\"value + 1\" text=\"Next →\"\n\t\t\t\t\t:active=\"value === paginatedItems.length - 1\"\n\t\t\t\t\t@click=\"setPage\" />\n\t\t\t</div>\n\t\t</nav>\n\t</section>\n</template>\n\n<script>\nimport PaginatorLink from './PaginatorLink.vue';\n\nexport default {\n\tprops: {\n\t\tvalue: Number,\n\t\titemsPerPage: Number,\n\t\tpaginatedItems: Array\n\t},\n\twatch: {\n\t\titemsPerPage(){\n\t\t\tif(this.value >= this.paginatedItems.length)\n\t\t\t\tthis.setPage(this.paginatedItems.length - 1);\n\t\t}\n\t},\n\tmethods: {\n\t\tsetPage(page){\n\t\t\tthis.$emit('input', page);\n\t\t}\n\t},\n\tcomponents: {\n\t\tPaginatorLink\n\t}\n};\n</script>\n\n<style scoped>\n\t.paginator {\n\t\ttext-align: center;\n\t}\n\n\tnav span {\n\t\tmargin: 0 0.25em;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/ListPaginator.vue?1568a33a","<template>\n\t<div class=\"panel panel-default\">\n\t\t<div class=\"panel-heading\">\n\t\t\t<h3 class=\"heading-title\">\n\t\t\t\t{{ title }}\n\t\t\t</h3>\n\t\t</div>\n\t\t<div class=\"panel-body\">\n\t\t\t<section>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label for=\"email-to\">To</label>\n\t\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t\t<input type=\"text\" id=\"email-to\"\n\t\t\t\t\t\t\tclass=\"form-control appear-not-readonly\"\n\t\t\t\t\t\t\t:value=\"toDisplayValue\" readonly />\n\t\t\t\t\t\t<span v-if=\"Array.isArray(to) && !possibleRecipients\"\n\t\t\t\t\t\t\t\tclass=\"input-group-btn\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\"\n\t\t\t\t\t\t\t\t\t@click=\"show.recipients = !show.recipients\">\n\t\t\t\t\t\t\t\tShow recipients\n\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-triangle-bottom\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span v-if=\"possibleRecipients\" class=\"input-group-btn\">\n\t\t\t\t\t\t\t<show-hide-button class=\"btn btn-default\"\n\t\t\t\t\t\t\t\t\tv-model=\"show.possibleRecipients\">\n\t\t\t\t\t\t\t\trecipients\n\t\t\t\t\t\t\t</show-hide-button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div v-if=\"Array.isArray(to) && !possibleRecipients\"\n\t\t\t\t\t\t\tv-show=\"show.recipients\">\n\t\t\t\t\t\t<ul class=\"list-group\">\n\t\t\t\t\t\t\t<li v-for=\"recipient of to\" class=\"list-group-item\">\n\t\t\t\t\t\t\t\t{{ recipient.full_name || recipient }}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div v-if=\"possibleRecipients\" v-show=\"show.possibleRecipients\">\n\t\t\t\t\t\t<div class=\"well row\">\n\t\t\t\t\t\t\t<template v-if=\"groupRecipients\">\n\t\t\t\t\t\t\t\t<template v-for=\"possibleRecipientGroup of groupedPossibleRecipients\">\n\t\t\t\t\t\t\t\t\t<template v-if=\"possibleRecipientGroup.children && possibleRecipientGroup.children.length > 0\">\n\t\t\t\t\t\t\t\t\t\t<b>{{ possibleRecipientGroup.text }}</b>\n\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t<li v-for=\"possibleRecipient of possibleRecipientGroup.children\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label :class=\"{'normal-text-label': !recipientsInclude(possibleRecipient)}\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" v-model=\"to\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:value=\"possibleRecipient\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ possibleRecipient.text || possibleRecipient }}\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li v-for=\"possibleRecipient of possibleRecipients\">\n\t\t\t\t\t\t\t\t\t\t<label :class=\"{'normal-text-label': !recipientsInclude(possibleRecipient)}\">\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" v-model=\"to\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:value=\"possibleRecipient\" />\n\t\t\t\t\t\t\t\t\t\t\t{{ possibleRecipient.full_name || possible.recipient }}\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-xs btn-default\"\n\t\t\t\t\t\t\t\t\t@click=\"toggleRecipients\">\n\t\t\t\t\t\t\t\tToggle all\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label for=\"email-subject\">Subject</label>\n\t\t\t\t\t<input type=\"text\" id=\"email-subject\" class=\"form-control\"\n\t\t\t\t\t\tv-model=\"subject\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label for=\"email-body\">Body</label>\n\t\t\t\t\t<medium-editor v-model=\"body.html\" id=\"email-body\"\n\t\t\t\t\t\t:replacements=\"emailReplacements\" />\n\t\t\t\t</div>\n\n\t\t\t\t<alert-list v-if=\"alerts && alerts.length > 0\" v-model=\"alerts\" />\n\t\t\t</section>\n\t\t</div>\n\t\t<div class=\"panel-footer text-right\">\n\t\t\t<loading-button loading-class=\"btn btn-primary\" :loading=\"sendingEmails\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" @click=\"send\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-send\"></span>\n\t\t\t\t\tSend emails\n\t\t\t\t</button>\n\t\t\t</loading-button>\n\n\t\t\t<button type=\"button\" class=\"btn btn-default\" @click=\"$emit('close')\">\n\t\t\t\tClose\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n</template>\n\n<script>\nimport MarkdownIt from 'markdown-it';\n\nimport AlertList from './AlertList.vue';\nimport MediumEditor from './MediumEditor.vue';\nimport ShowHideButton from './ShowHideButton.vue';\nimport LoadingButton from './LoadingButton.vue';\n\nimport {\n\tucfirst,\n\tgetFetchHeaders,\n\tgroupUsers,\n\thtmlLabelReplacements\n} from 'modules/utils.js';\n\nconst md = new MarkdownIt();\n\n// FIXME: Possible recipients with a defaultTo doesn't work\n\nexport default {\n\tprops: {\n\t\tfrom: {\n\t\t\ttype: String,\n\t\t\tdefault: 'admin'\n\t\t},\n\t\ttarget: {\n\t\t\ttype: String,\n\t\t\tdefault: '/emails'\n\t\t},\n\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: 'Email editor'\n\t\t},\n\n\t\tdefaultTo: {\n\t\t\tdefault(){\n\t\t\t\treturn [];\n\t\t\t}\n\t\t},\n\t\tdefaultSubject: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tdefaultBodyMarkdown: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\n\t\tpossibleRecipients: {\n\t\t\ttype: Array,\n\t\t\trequired: false\n\t\t},\n\t\tgroupRecipients: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\temailReplacements: {\n\t\t\ttype: Array,\n\t\t\trequired: false\n\t\t},\n\t\teditToOnSend: {\n\t\t\ttype: Function,\n\t\t\trequired: false\n\t\t},\n\t\tadditionalFields: {\n\t\t\ttype: Object,\n\t\t\trequired: false\n\t\t}\n\t},\n\tdata(){\n\t\treturn {\n\t\t\tto: this.defaultTo,\n\t\t\tsubject: this.defaultSubject,\n\t\t\tbody: {\n\t\t\t\tmarkdown: this.defaultBodyMarkdown,\n\t\t\t\thtml: htmlLabelReplacements(md.render(this.defaultBodyMarkdown),\n\t\t\t\t\tthis.emailReplacements)\n\t\t\t},\n\t\t\teditorType: 'medium',\n\n\t\t\tsendingEmails: false,\n\n\t\t\tshow: {\n\t\t\t\trecipients: false,\n\t\t\t\tpossibleRecipients: false\n\t\t\t},\n\n\t\t\talerts: []\n\t\t};\n\t},\n\tcomputed: {\n\t\teditorTypes(){\n\t\t\treturn [\n\t\t\t\t'medium',\n\t\t\t\t'markdown'\n\t\t\t];\n\t\t},\n\t\tgroupedPossibleRecipients(){\n\t\t\treturn groupUsers(this.possibleRecipients);\n\t\t},\n\t\ttoDisplayValue(){\n\t\t\tif (this.possibleRecipients || Array.isArray(this.to))\n\t\t\t\treturn `${this.to ? this.to.length : '0'} recipients`;\n\t\t\tif (typeof this.to === 'string')\n\t\t\t\treturn this.to;\n\t\t\tif (this.to && this.to.full_name && this.to.email)\n\t\t\t\treturn `${this.to.full_name} <${this.to.email}>`;\n\t\t},\n\t\talertTypeClass(){\n\t\t\treturn {\n\t\t\t\t'alert-success': this.alert.type === 'success',\n\t\t\t\t'alert-info': this.alert.type === 'info',\n\t\t\t\t'alert-danger': this.alert.type === 'error'\n\t\t\t};\n\t\t},\n\t\tdefaultBody(){\n\t\t\treturn {\n\t\t\t\tmarkdown: this.defaultBodyMarkdown,\n\t\t\t\thtml: htmlLabelReplacements(md.render(this.defaultBodyMarkdown),\n\t\t\t\t\tthis.emailReplacements)\n\t\t\t};\n\t\t}\n\t},\n\twatch: {\n\t\tdefaultTo(defaultTo){\n\t\t\tthis.to = defaultTo;\n\t\t},\n\t\tdefaultSubject(defaultSubject){\n\t\t\tthis.subject = defaultSubject;\n\t\t},\n\t\tdefaultBody(defaultBody){\n\t\t\tthis.body = defaultBody;\n\t\t}\n\t},\n\tmethods: {\n\t\trecipientsInclude(recipient) {\n\t\t\tif (Array.isArray(this.to)) {\n\t\t\t\treturn this.to.includes(recipient);\n\t\t\t} else {\n\t\t\t\treturn this.to === recipient;\n\t\t\t}\n\t\t},\n\t\ttoggleRecipients() {\n\t\t\tif (Array.isArray(this.to) && this.to.length === 0)\n\t\t\t\tthis.to = this.possibleRecipients.slice();\n\t\t\telse\n\t\t\t\tthis.to = [];\n\t\t},\n\t\tsend(){\n\t\t\tthis.sendingEmails = true;\n\n\t\t\tlet body = {\n\t\t\t\tsubject: this.subject,\n\t\t\t\tbody: this.body.html,\n\t\t\t\tto: this.editToOnSend\n\t\t\t\t\t? this.editToOnSend(this.to)\n\t\t\t\t\t: this.to\n\t\t\t};\n\n\t\t\tif (this.additionalFields)\n\t\t\t\tbody = Object.assign(body, this.additionalFields);\n\n\t\t\tlet error = false;\n\t\t\tif (!body.to || (Array.isArray(body.to) && body.to.length === 0)){\n\t\t\t\tthis.alerts.push({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\thtml: `Please select a recipient.`\n\t\t\t\t});\n\t\t\t\terror = true;\n\t\t\t}\n\t\t\tif (!body.subject){\n\t\t\t\tthis.alerts.push({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\thtml: `Please enter a subject.`\n\t\t\t\t});\n\t\t\t\terror = true;\n\t\t\t}\n\t\t\tif (!body.body){\n\t\t\t\tthis.alerts.push({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\thtml: `Please enter a message body.`\n\t\t\t\t});\n\t\t\t\terror = true;\n\t\t\t}\n\t\t\tif (error)\n\t\t\t\treturn;\n\n\t\t\tfetch(this.target, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: getFetchHeaders(),\n\t\t\t\tcredentials: 'same-origin',\n\t\t\t\tbody: JSON.stringify(body)\n\t\t\t}).then(response => {\n\t\t\t\tif (response.ok)\n\t\t\t\t\treturn response.json();\n\t\t\t\telse\n\t\t\t\t\tthrow new Error('There was a problem sending the emails');\n\t\t\t}).then(response => {\n\t\t\t\tif (response.success){\n\t\t\t\t\tthis.alerts.push({\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\ttext: `${response.success.length} emails successfully sent.`\n\t\t\t\t\t});\n\t\t\t\t\tif (Array.isArray(this.to))\n\t\t\t\t\t\tthis.to = this.to.filter(id => !response.success.includes(id));\n\t\t\t\t}\n\n\n\t\t\t\tif (response.error && response.error.length > 0 && this.possibleRecipients){\n\t\t\t\t\tlet userNames = response.error\n\t\t\t\t\t\t.map(errorRecipient => {\n\t\t\t\t\t\t\tlet id = (Number.isNaN(errorRecipient))\n\t\t\t\t\t\t\t\t? errorRecipient.id\n\t\t\t\t\t\t\t\t: errorRecipient;\n\t\t\t\t\t\t\treturn this.possibleRecipients.find(user => user.id === Number(id)).full_name;\n\t\t\t\t\t\t});\n\t\t\t\t\tthis.alerts.push({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\thtml: `Error sending emails to the following users: <ul>\n\t\t\t\t\t\t\t${userNames.map(name => `<li>${name}</li>`).join('')}\n\t\t\t\t\t\t</ul>`\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.sendingEmails = false;\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t\tthis.alerts.push({\n\t\t\t\t\ttext: err.message,\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\tthis.sendingEmails = false;\n\t\t\t});\n\t\t},\n\t\tucfirst\n\t},\n\tcomponents: {\n\t\tAlertList,\n\t\tMediumEditor,\n\t\tShowHideButton,\n\t\tLoadingButton\n\t}\n};\n</script>\n\n<style scoped>\n\tul {\n\t\tcolumns: 150px 3;\n\t}\n\n\tfieldset label {\n\t\tmargin: 0 1em;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/EmailEditor.vue?47bfa3f6","<template>\n\t<div ref=\"container\">\n\t\t<div :id=\"id\" ref=\"editor\" v-once v-html=\"value\"></div>\n\t\t<div class=\"row\">\n\t\t\t<small class=\"col-md-8\">\n\t\t\t\tSelect some text to show controls.\n\t\t\t\tCursor position gets a little wonky when a replacement is made,\n\t\t\t\tsorry about that.\n\t\t\t</small>\n\t\t\t<div class=\"col-md-4\">\n\t\t\t\t<replacement-list v-if=\"replacements\"\n\t\t\t\t\t:replacements=\"replacements\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport MediumEditor from 'medium-editor';\nimport 'medium-editor/dist/css/medium-editor.css';\nimport 'medium-editor/dist/css/themes/bootstrap.css';\n\nimport debounce from 'lodash/debounce';\n\nimport ReplacementList from './ReplacementList.vue';\n\nimport { htmlLabelReplacements } from 'modules/utils.js';\n\nexport default {\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\treplacements: {\n\t\t\ttype: Array,\n\t\t\trequired: false\n\t\t}\n\t},\n\tdata(){\n\t\treturn {\n\t\t\teditor: null\n\t\t};\n\t},\n\tmounted(){\n\t\tthis.editor = new MediumEditor(this.$refs.editor, {\n\t\t\tautoLink: true,\n\t\t\ttoolbar: {\n\t\t\t\tbuttons: [\n\t\t\t\t\t'bold',\n\t\t\t\t\t'italic',\n\t\t\t\t\t'underline',\n\t\t\t\t\t'anchor',\n\t\t\t\t\t'orderedlist',\n\t\t\t\t\t'unorderedlist',\n\t\t\t\t\t'removeFormat'\n\t\t\t\t]\n\t\t\t},\n\t\t\tpaste: {\n\t\t\t\tcleanPastedHTML: false\n\t\t\t}\n\t\t});\n\t\tthis.editor.subscribe('editableInput', debounce(() => {\n\t\t\tlet html = this.editor.getContent();\n\t\t\t\n\t\t\tthis.$emit('input', htmlLabelReplacements(html, this.replacements));\n\t\t}, 500));\n\t\t\n\t\tthis.$refs.container.querySelector('.medium-editor-element')\n\t\t\t.classList.add('form-control');\n\t},\n\t\n\twatch: {\n\t\tvalue(value){\n\t\t\tif(value !== this.editor.getContent()){\n\t\t\t\tthis.editor.saveSelection();\n\t\t\t\tthis.editor.setContent(value);\n\t\t\t\tthis.editor.restoreSelection();\n\t\t\t}\n\t\t}\n\t},\n\t\n\tdestroyed(){\n\t\tthis.editor.unsubscribe();\n\t\tthis.editor.destroy();\n\t},\n\t\n\tcomponents: {\n\t\tReplacementList\n\t}\n};\n</script>\n\n<style scoped>\n\ttextarea {\n\t\tdisplay: none;\n\t}\n\t\n\t.medium-editor-element {\n\t\tfont-size: 1.15em;\n\t}\n\t\n\t.medium-editor-element:focus {\n\t\toutline: none;\n\t}\n\t\n\t.form-control {\n\t\theight: auto !important;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/MediumEditor.vue?4a7c1c62","<template>\n\t<aside>\n\t\t<show-hide-button v-model=\"show.replacements\"\n\t\t\t\tclass=\"btn btn-default btn-xs\">\n\t\t\tReplacements:\n\t\t</show-hide-button>\n\t\t<ul v-show=\"show.replacements\">\n\t\t\t<li v-for=\"replacement of replacements\">\n\t\t\t\t[[{{ replacement }}]]\n\t\t\t</li>\n\t\t</ul>\n\t</aside>\n</template>\n\n<script>\nimport ShowHideButton from './ShowHideButton.vue';\n\nexport default {\n\tprops: {\n\t\treplacements: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata(){\n\t\treturn {\n\t\t\tshow: {\n\t\t\t\treplacements: false\n\t\t\t}\n\t\t};\n\t},\n\tcomponents: {\n\t\tShowHideButton\n\t}\n};\n</script>\n\n<style scoped>\n\t.btn {\n\t\tmargin-top: 1px;\n\t}\n\n\taside {\n\t\tfont-size: 0.8em;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/ReplacementList.vue?6173db7f","<template>\n\t<span ref=\"container\">\n\t\t{{ dateString }}\n\t</span>\n</template>\n\n<script>\nimport moment from 'moment';\n\nimport { renderDate, renderDateTime } from 'modules/date-utils.js';\n\nexport default {\n\tprops: {\n\t\tdate: {\n\t\t\ttype: [String, Date, Object],\n\t\t\trequired: false\n\t\t},\n\t\ttime: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\thovered: false\n\t\t};\n\t},\n\n\tmounted() {\n\t\tthis.$refs.container.addEventListener('mouseenter',\n\t\t\tthis.handleMouseEnter);\n\n\t\tthis.$refs.container.addEventListener('mouseleave',\n\t\t\tthis.handleMouseLeave);\n\t},\n\n\tcomputed: {\n\t\tdateString() {\n\t\t\tif (!this.date)\n\t\t\t\treturn '';\n\n\t\t\tif (this.time) {\n\t\t\t\treturn this.hovered\n\t\t\t\t\t? moment(this.date).format('ll LT')\n\t\t\t\t\t: renderDateTime(this.date);\n\t\t\t}\n\n\t\t\treturn this.hovered\n\t\t\t\t? moment(this.date).format('ll')\n\t\t\t\t: renderDate(this.date);\n\t\t}\n\t},\n\n\tmethods: {\n\t\thandleMouseEnter() {\n\t\t\tthis.hovered = true;\n\t\t},\n\t\thandleMouseLeave() {\n\t\t\tthis.hovered = false;\n\t\t}\n\t},\n\n\tbeforeDestroy() {\n\t\tthis.$refs.container.removeEventListener('mouseenter',\n\t\t\tthis.handleMouseEnter);\n\n\t\tthis.$refs.container.removeEventListener('mouseleave',\n\t\t\tthis.handleMouseLeave);\n\t}\n};\n</script>\n\n<style scoped>\n\tspan {\n\t\tcursor: help;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/RichDate.vue?23e35afc","<template>\n\t<span ref=\"container\">\n\t\t{{ dateString }}\n\t</span>\n</template>\n\n<script>\nimport { renderDateRange } from 'modules/date-utils.js';\n\nexport default {\n\tprops: {\n\t\tdates: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tstart: {\n\t\t\ttype: String,\n\t\t\tdefault: 'startDate'\n\t\t},\n\t\tend: {\n\t\t\ttype: String,\n\t\t\tdefault: 'endDate'\n\t\t},\n\t\ttime: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\thovered: false\n\t\t};\n\t},\n\n\tmounted() {\n\t\tthis.$refs.container.addEventListener('mouseenter',\n\t\t\tthis.handleMouseEnter);\n\n\t\tthis.$refs.container.addEventListener('mouseleave',\n\t\t\tthis.handleMouseLeave);\n\t},\n\n\tcomputed: {\n\t\tstartDate() {\n\t\t\treturn this.dates[this.start];\n\t\t},\n\t\tendDate() {\n\t\t\treturn this.dates[this.end];\n\t\t},\n\t\tdateString() {\n\t\t\treturn renderDateRange(this.startDate, this.endDate, this.hovered);\n\t\t}\n\t},\n\n\tmethods: {\n\t\thandleMouseEnter() {\n\t\t\tthis.hovered = true;\n\t\t},\n\t\thandleMouseLeave() {\n\t\t\tthis.hovered = false;\n\t\t}\n\t},\n\n\tbeforeDestroy() {\n\t\tthis.$refs.container.removeEventListener('mouseenter',\n\t\t\tthis.handleMouseEnter);\n\n\t\tthis.$refs.container.removeEventListener('mouseleave',\n\t\t\tthis.handleMouseLeave);\n\t}\n};\n</script>\n\n<style scoped>\n\tspan {\n\t\tcursor: help;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/RichDateRange.vue?1ec92f20","<template>\n\t<div>\n\t\t<h2 v-if=\"title\">\n\t\t\t{{ title }}\n\t\t</h2>\n\t\t<template v-for=\"(item, index) of contents.items\">\n\t\t\t<form-reader-question v-if=\"item.type === 'question'\"\n\t\t\t\tv-bind=\"item\"\n\t\t\t\t:readonly=\"readonly\"\n\t\t\t\t@input=\"handleInput(index, arguments[0])\" />\n\t\t\t<div v-if=\"item.type === 'instruction'\"\n\t\t\t\tclass=\"instruction-block\"\n\t\t\t\tv-html=\"snarkdown(item.text)\">\n\t\t\t</div>\n\t\t</template>\n\n\t\t<div v-if=\"!readonly\" class=\"btn-lg-submit-container\">\n\t\t\t<button type=\"button\" class=\"btn btn-lg btn-default\"\n\t\t\t\t\t@click=\"handleSave\">\n\t\t\t\tSave\n\t\t\t</button>\n\t\t\t<button type=\"button\" class=\"btn btn-lg btn-primary\"\n\t\t\t\t\t:disabled=\"!formIsValid\"\n\t\t\t\t\t@click=\"handleSubmit\">\n\t\t\t\tSubmit\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport FormReaderQuestion from './FormReaderQuestion.vue';\n\nimport snarkdown from 'snarkdown';\n\nexport default {\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tcontents: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\treadonly: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tformIsValid() {\n\t\t\tif (this.readonly)\n\t\t\t\treturn;\n\n\t\t\tfor (let item of this.contents.items) {\n\t\t\t\tif (item.type === 'question' && item.required) {\n\t\t\t\t\tif (['radio', 'radiononnumeric'].includes(item.questionType)) {\n\t\t\t\t\t\tif (!item.options.some(option => option.checked))\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (item.questionType !== 'checkbox') {\n\t\t\t\t\t\tif (!item.value)\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tsnarkdown,\n\t\thandleInput(index, question) {\n\t\t\tif (this.readonly)\n\t\t\t\treturn;\n\n\t\t\tlet items = this.contents.items.slice();\n\t\t\titems.splice(index, 1, Object.assign({}, this.contents.items[index], question));\n\t\t\tlet contents = Object.assign({}, contents, {items});\n\t\t\tthis.$emit('input', {contents});\n\t\t},\n\t\thandleSave() {\n\t\t\tif (!this.readonly)\n\t\t\t\tthis.$emit('save', {\n\t\t\t\t\tcontents: this.contents\n\t\t\t\t});\n\t\t},\n\t\thandleSubmit() {\n\t\t\tif (!this.readonly && this.formIsValid)\n\t\t\t\tthis.$emit('submit', {\n\t\t\t\t\tcontents: this.contents\n\t\t\t\t});\n\t\t}\n\t},\n\n\tcomponents: {\n\t\tFormReaderQuestion\n\t}\n};\n</script>\n\n<style scoped>\n\th2 {\n\t\tmargin-bottom: 2em;\n\t}\n\n\t.instruction-block {\n\t\tfont-size: 1.25em;\n\t\tpadding: 1.5em;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/FormReader/FormReader.vue?fe460830","<template>\n\t<div class=\"row\">\n\t\t<div class=\"col-md-6\">\n\t\t\t<b>Unordered items</b>\n\t\t\t<ul class=\"list-group\">\n\t\t\t\t<li v-for=\"item of itemsRemaining\" class=\"list-group-item\"\n\t\t\t\t\t\t:key=\"itemKey in item && `bank-${item[itemKey]}`\"\n\t\t\t\t\t\t@click=\"addItem(item)\">\n\t\t\t\t\t<slot v-bind=\"item\">\n\t\t\t\t\t\t{{ item }}\n\t\t\t\t\t</slot>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class=\"col-md-6\">\n\t\t\t<b>Ordered list</b>\n\t\t\t<ol class=\"list-group\" ref=\"orderedList\">\n\t\t\t\t<li v-for=\"(item, index) of value\" class=\"list-group-item\"\n\t\t\t\t\t\t:class=\"{active: activeItem === index}\"\n\t\t\t\t\t\t:key=\"itemKey in item && item[itemKey]\"\n\t\t\t\t\t\t@click=\"removeItem(index)\">\n\t\t\t\t\t<slot v-bind=\"item\">\n\t\t\t\t\t\t{{ item }}\n\t\t\t\t\t</slot>\n\t\t\t\t\t<div class=\"item-controls\">\n\t\t\t\t\t\t<input type=\"number\" class=\"form-control\"\n\t\t\t\t\t\t\t:value=\"index + 1\" @click=\"$event.stopPropagation()\"\n\t\t\t\t\t\t\t@change=\"moveItemTo($event, index)\" />\n\t\t\t\t\t\t<div class=\"item-controls-buttons\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\"\n\t\t\t\t\t\t\t\t\tv-if=\"index > 0\"\n\t\t\t\t\t\t\t\t\t@click=\"moveItemUp($event, index)\">\n\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-arrow-up\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\"\n\t\t\t\t\t\t\t\t\tv-if=\"index < value.length - 1\"\n\t\t\t\t\t\t\t\t\t@click=\"moveItemDown($event, index)\">\n\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-arrow-down\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ol>\n\t\t\t<div v-if=\"value.length > 0\" class=\"text-center\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-warning\"\n\t\t\t\t\t\t@click=\"$emit('input', [])\">\n\t\t\t\t\tClear list\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t\tdefault(){\n\t\t\t\treturn [];\n\t\t\t}\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\titemKey: {\n\t\t\ttype: String,\n\t\t\tdefault: 'id'\n\t\t}\n\t},\n\t\n\tdata(){\n\t\treturn {\n\t\t\tactiveItem: null,\n\t\t\tactiveItemTimeoutId: null\n\t\t};\n\t},\n\t\n\tcomputed: {\n\t\titemsRemaining(){\n\t\t\treturn this.items.filter(item => !this.value.includes(item));\n\t\t}\n\t},\n\twatch: {\n\t\tactiveItem(){\n\t\t\tif(this.activeItemTimeoutId)\n\t\t\t\twindow.clearTimeout(this.activeItemTimeoutId);\n\t\t\t\n\t\t\tthis.activeItemTimeoutId = window.setTimeout(() => {\n\t\t\t\tif(this.activeItemTimeoutId){\n\t\t\t\t\tthis.activeItem = null;\n\t\t\t\t\tthis.activeItemTimeoutId = null;\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t}\n\t},\n\t\n\tmethods: {\n\t\taddItem(item){\n\t\t\tthis.$emit('input', this.value.concat(item));\n\t\t},\n\t\tremoveItem(index){\n\t\t\tif(event.defaultPrevented)\n\t\t\t\treturn;\n\t\t\t\n\t\t\tlet value = this.value.slice();\n\t\t\tvalue.splice(index, 1);\n\t\t\tthis.$emit('input', value);\n\t\t},\n\t\tmoveItemTo(event, index){\n\t\t\tlet newIndex = event.target.value - 1;\n\t\t\t\n\t\t\tif(newIndex < 0 || newIndex > this.value.length - 1)\n\t\t\t\treturn;\n\t\t\t\n\t\t\tlet value = this.value.slice();\n\t\t\tvalue.splice(newIndex, 0, value.splice(index, 1)[0]);\n\t\t\t\n\t\t\tthis.activeItem = newIndex;\n\t\t\tthis.$emit('input', value);\n\t\t},\n\t\tmoveItemUp(event, index){\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tif(index === 0)\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\tlet newIndex = index - 1;\n\t\t\tlet value = this.value.slice();\n\t\t\t\n\t\t\tvalue.splice(newIndex, 0, value.splice(index, 1)[0]);\n\t\t\t\n\t\t\tthis.activeItem = newIndex;\n\t\t\tthis.$emit('input', value);\n\t\t},\n\t\tmoveItemDown(event, index){\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\t\n\t\t\tif(index === this.value.length - 1)\n\t\t\t\treturn;\n\t\t\t\n\t\t\tlet newIndex = index + 1;\n\t\t\tlet value = this.value.slice();\n\t\t\t\n\t\t\tvalue.splice(newIndex, 0, value.splice(index, 1)[0]);\n\t\t\t\n\t\t\tthis.activeItem = newIndex;\n\t\t\tthis.$emit('input', value);\n\t\t}\n\t}\n};\n</script>\n\n<style scoped>\n\t.list-group-item {\n\t\tcursor: pointer;\n\t}\n\t\n\t.list-group-item:focus,\n\t.list-group-item:hover {\n\t\tcolor: #555;\n\t\tbackground-color: #f5f5f5;\n\t}\n\t\n\t.list-group-item.active:focus,\n\t.list-group-item.active:hover {\n\t\tcolor: white;\n\t\tbackground-color: rgba(51, 123, 184, 0.85);\n\t}\n\t\n\t.item-controls {\n\t\tmargin-top: 1em;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t}\n\t\n\t.item-controls .form-control {\n\t\twidth: 5em;\n\t}\n\t\n\t.item-controls-buttons {\n\t\t\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/OrderingList.vue?9094167c","<template>\n\t<div>\n\t\t<div class=\"panel panel-default\">\n\t\t\t<div class=\"panel-heading\">\n\t\t\t\t{{ ucfirstWords(name) }} Editor\n\t\t\t</div>\n\t\t\t<div class=\"panel-body\">\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t\t<div class=\"json-container form-group\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t'has-error': newJson && !isSchemaValid,\n\t\t\t\t\t\t\t\t\t'has-success': newJson && isSchemaValid\n\t\t\t\t\t\t\t\t}\">\n\t\t\t\t\t\t\t<label class=\"control-label containing-label\">\n\t\t\t\t\t\t\t\tNew {{ name }}\n\t\t\t\t\t\t\t\t<textarea class=\"input-json form-control\"\n\t\t\t\t\t\t\t\t\tv-model.lazy=\"newJson\"></textarea>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<ul v-if=\"newJson && !isSchemaValid\" class=\"help-block\">\n\t\t\t\t\t\t\t\t<li v-for=\"error of schemaErrors\">\n\t\t\t\t\t\t\t\t\t{{ ucfirst(error.message) }}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<span v-else-if=\"newJson && isSchemaValid\" class=\"help-block\">\n\t\t\t\t\t\t\t\t{{ ucfirst(name) }} valid!\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<show-hide-button v-model=\"show.schema\">\n\t\t\t\t\t\t\tschema\n\t\t\t\t\t\t</show-hide-button>\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-info\"\n\t\t\t\t\t\t\t\t:disabled=\"!newJsonObject\" @click=\"formatJson\">\n\t\t\t\t\t\t\tFormat JSON\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div v-if=\"show.schema\" class=\"json-container\">\n\t\t\t\t\t\t\t<label class=\"containing-label control-label\">\n\t\t\t\t\t\t\t\tSchema\n\t\t\t\t\t\t\t\t<textarea class=\"schema-json form-control\"\n\t\t\t\t\t\t\t\t\treadonly :value=\"schema\"></textarea>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t\t<div class=\"json-container\">\n\t\t\t\t\t\t\t<label class=\"containing-label control-label\">\n\t\t\t\t\t\t\t\tCurrent {{ name }}\n\t\t\t\t\t\t\t\t<textarea class=\"previous-json form-control\"\n\t\t\t\t\t\t\t\t\treadonly :value=\"previousJson\"></textarea>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<alert-list v-model=\"alerts\" />\n\t\t<div class=\"btn-lg-submit-container\">\n\t\t\t<button type=\"button\" class=\"btn btn-lg btn-primary\"\n\t\t\t\t\t:disabled=\"!isSchemaValid\"\n\t\t\t\t\t@click=\"submitJson\">\n\t\t\t\tSubmit\n\t\t\t</button>\n\t\t\t<button type=\"button\" class=\"btn btn-lg btn-default\"\n\t\t\t\t\t@click=\"$emit('close')\">\n\t\t\t\tClose\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport AlertList from 'vue-components/AlertList.vue';\nimport ShowHideButton from 'vue-components/ShowHideButton.vue';\n\nimport Ajv from 'ajv';\n\nimport { ucfirst, ucfirstWords } from 'modules/utils.js';\n\nconst ajv = new Ajv({\n\tallErrors: true\n});\n\nexport default {\n\tprops: {\n\t\tschemaUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tname: {\n\t\t\ttype: String,\n\t\t\tdefault: 'JSON'\n\t\t},\n\t\tpastValues: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tnewJson: null,\n\t\t\tschema: null,\n\n\t\t\tshow: {\n\t\t\t\tschema: false\n\t\t\t},\n\t\t\talerts: []\n\t\t};\n\t},\n\n\tmounted() {\n\t\tfetch(this.schemaUrl).then(response => {\n\t\t\tif (response.ok)\n\t\t\t\treturn response.text();\n\n\t\t\tthrow new Error(response.statusText);\n\t\t}).then(schema => {\n\t\t\tthis.schema = schema;\n\t\t\tthis.schemaValidator = ajv.compile(JSON.parse(schema));\n\t\t}).catch(err => {\n\t\t\tconsole.error(err);\n\t\t\tthis.alerts.push({\n\t\t\t\ttype: 'error',\n\t\t\t\thtml: `<strong>Error:</strong> There was a problem fetching the schema`\n\t\t\t});\n\t\t});\n\t},\n\n\tcomputed: {\n\t\tpreviousJson() {\n\t\t\tif (this.pastValues && this.pastValues.length > 0)\n\t\t\t\treturn this.pastValues[0].form;\n\t\t},\n\t\tnewJsonObject() {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(this.newJson);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t},\n\t\tschemaErrors() {\n\t\t\tif (this.newJson && !this.newJsonObject)\n\t\t\t\treturn [{\n\t\t\t\t\tmessage: `Input is not valid JSON`\n\t\t\t\t}];\n\n\t\t\tif (this.newJsonObject && this.schemaValidator)\n\t\t\t\treturn this.schemaValidator.errors;\n\n\t\t\treturn [];\n\t\t},\n\t\tisSchemaValid() {\n\t\t\tif (this.newJsonObject && this.schemaValidator)\n\t\t\t\treturn this.schemaValidator(this.newJsonObject);\n\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tmethods: {\n\t\tucfirst,\n\t\tucfirstWords,\n\t\tformatJson() {\n\t\t\tif (this.newJsonObject)\n\t\t\t\tthis.newJson = JSON.stringify(this.newJsonObject, null, 4);\n\t\t},\n\t\tsubmitJson() {\n\t\t\tthis.$emit('submit', this.newJson);\n\t\t}\n\t},\n\n\tcomponents: {\n\t\tAlertList,\n\t\tShowHideButton\n\t}\n};\n</script>\n\n<style scoped>\n\ttextarea {\n\t\twidth: 100%;\n\t\theight: 400px;\n\t\tfont-family: monospace;\n\t\twhite-space: pre;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/JsonSchemaEditor.vue?81f5b6c6","<template>\n\t<div class=\"merit-form-list-item\">\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-sm-6 name-cell\">\n\t\t\t\t<span class=\"name\">{{ currentForm.name }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"col-sm-3 version-cell\">\n\t\t\t\t<small>Version</small>\n\t\t\t\t<span>{{ currentForm.version }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"col-sm-3 controls-cell text-right\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-info\"\n\t\t\t\t\t\t@click=\"handleClick\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-pencil\"></span>\n\t\t\t\t\tView / edit\n\t\t\t\t</button>\n\t\t\t\t<confirmation-button class=\"btn btn-sm btn-danger\"\n\t\t\t\t\t\tpressed-class=\"btn btn-sm btn-warning\"\n\t\t\t\t\t\t@click=\"$emit('delete')\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-remove\"></span>\n\t\t\t\t\tDelete\n\t\t\t\t\t\n\t\t\t\t\t<template slot=\"pressed\">\n\t\t\t\t\t\t<span class=\"glyphicon glyphicon-trash\"></span>\n\t\t\t\t\t\tConfirm delete\n\t\t\t\t\t</template>\n\t\t\t\t</confirmation-button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport ConfirmationButton from 'vue-components/ConfirmationButton.vue';\n\nexport default {\n\tprops: {\n\t\tforms: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\t\n\tcomputed: {\n\t\tcurrentForm() {\n\t\t\treturn this.forms[0];\n\t\t}\n\t},\n\t\n\tmethods: {\n\t\thandleClick() {\n\t\t\tthis.$emit('click');\n\t\t}\n\t},\n\t\n\tcomponents: {\n\t\tConfirmationButton\n\t}\n};\n</script>\n\n<style scoped>\n\t.merit-form-list-item {\n\t\tborder-bottom: 1px solid rgba(0, 0, 0, 0.25);\n\t\tpadding: 5px 0;\n\t}\n\t\n\t.merit-form-list-item:nth-child(even) {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n\t\n\tsmall {\n\t\tfont-size: 0.75em;\n\t\tcolor: rgba(0, 0, 0, 0.55);\n\t\tdisplay: block;\n\t}\n\t\n\t.name-cell {\n\t\tposition: relative;\n\t\tbottom: 0;\n\t}\n\t\n\t.name {\n\t\tfont-size: 1.25em;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/Manage/Merit/FormListItem.vue?6e1d7a9a","<template>\n\t<li class=\"alum-list-item\">\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-sm-3\">\n\t\t\t\t<img height=\"50\" width=\"50\" alt=\"\"\n\t\t\t\t\t:src=\"alum.photo_path || placeholderUserImagePath\" />\n\t\t\t\t{{ alum.full_name }}\n\t\t\t</div>\n\t\t\t<div class=\"col-sm-3\">\n\t\t\t\t<a :href=\"`mailto:${alum.email}`\">\n\t\t\t\t\t{{ alum.email }}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div class=\"col-sm-3\">\n\t\t\t\t<div v-for=\"line of alumAddress(alum)\">\n\t\t\t\t\t{{ line }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"col-sm-1 graduation-date-cell\">\n\t\t\t\t<rich-date :date=\"alum.graduation_date\"></rich-date>\n\t\t\t</div>\n\t\t\t<div class=\"col-sm-2\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-info btn-xs\"\n\t\t\t\t\t\t:disabled=\"!alum.email || alum.do_not_contact\"\n\t\t\t\t\t\ttitle=\"Alum does not have an email or has requested to not be contacted\"\n\t\t\t\t\t\t@click=\"$emit('email')\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-send\"></span>\n\t\t\t\t\tEmail\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" class=\"btn btn-info btn-xs\"\n\t\t\t\t\t\t@click=\"$emit('edit')\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-pencil\"></span>\n\t\t\t\t\tEdit\n\t\t\t\t</button>\n\t\t\t\t<confirmation-button class=\"btn btn-xs\"\n\t\t\t\t\t\tunpressed-class=\"btn-danger\"\n\t\t\t\t\t\tpressed-class=\"btn-warning\"\n\t\t\t\t\t\t@click=\"$emit('remove')\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-remove\"></span>\n\t\t\t\t\tDelete\n\t\t\t\t</confirmation-button>\n\t\t\t</div>\n\t\t</div>\n\t</li>\n</template>\n\n<script>\nimport moment from 'moment';\n\nimport ConfirmationButton from 'vue-components/ConfirmationButton.vue';\nimport RichDate from 'vue-components/RichDate.vue';\n\nimport { PLACEHOLDER_USER_IMAGE_PATH } from 'modules/constants.js';\n\nexport default {\n\tprops: {\n\t\talum: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata(){\n\t\treturn {\n\n\t\t};\n\t},\n\n\tcomputed: {\n\t\tplaceholderUserImagePath(){\n\t\t\treturn PLACEHOLDER_USER_IMAGE_PATH;\n\t\t}\n\t},\n\n\tmethods: {\n\t\talumAddress(alum){\n\t\t\tconst joinProps = props => {\n\t\t\t\tlet pieces = [];\n\t\t\t\tprops.map(prop => {\n\t\t\t\t\tif(alum[prop])\n\t\t\t\t\t\tpieces.push(alum[prop]);\n\t\t\t\t});\n\t\t\t\treturn pieces.join(', ');\n\t\t\t};\n\t\t\treturn [\n\t\t\t\tjoinProps(['address', 'address_2']),\n\t\t\t\tjoinProps(['city', 'state', 'zip']),\n\t\t\t\talum.country !== 'United States'\n\t\t\t\t\t? alum.country\n\t\t\t\t\t: null,\n\t\t\t];\n\t\t},\n\t\tmoment\n\t},\n\n\tcomponents: {\n\t\tConfirmationButton,\n\t\tRichDate\n\t}\n};\n</script>\n\n<style scoped>\n\t.alum-list-item {\n\t\tborder-bottom: 1px solid rgba(0, 0, 0, 0.25);\n\t\tpadding: 5px 0;\n\t}\n\n\t.alum-list-item:nth-child(even){\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n\n\t.alum-list-item .row {\n\t\tmargin: 0;\n\t}\n\n\t.alum-list-item img {\n\t\tborder-radius: 100%;\n\t\tobject-fit: cover;\n\t\tobject-position: center;\n\t}\n\n\t.graduation-date-cell .full-date {\n\t\tdisplay: none;\n\t}\n\n\t.graduation-date-cell:hover .short-date {\n\t\tdisplay: none;\n\t}\n\n\t.graduation-date-cell:hover .full-date {\n\t\tdisplay: block;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/Alumni/AlumniListItem.vue?53323406","<template>\n\t<div class=\"container body-block edit-alum\">\n\t\t<h2>{{ addEditText }} alum</h2>\n\t\t<form class=\"form\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-2 glyph-container\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-user\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-5 col-sm-6\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tFirst name\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\"\n\t\t\t\t\t\t\tplaceholder=\"First name\" required\n\t\t\t\t\t\t\tv-model=\"first_name\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-5 col-sm-6\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tLast name\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\"\n\t\t\t\t\t\t\tplaceholder=\"Last name\" required\n\t\t\t\t\t\t\tv-model=\"last_name\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<hr />\n\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-2 glyph-container\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-send\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-6 col-sm-8\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tEmail\n\t\t\t\t\t\t\t<input type=\"email\" class=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\t\t\t\tv-model=\"email\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-4 col-sm-4\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tPhone\n\t\t\t\t\t\t\t<input type=\"tel\" class=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"Phone number\"\n\t\t\t\t\t\t\t\tv-model=\"phone\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<hr />\n\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-2 glyph-container\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-briefcase\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-6 col-sm-8\">\n\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\tEmployer\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\"\n\t\t\t\t\t\t\tplaceholder=\"Employer\"\n\t\t\t\t\t\t\tv-model=\"employer\" />\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-4 col-sm-4\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tCountry\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"Country\"\n\t\t\t\t\t\t\t\tv-model=\"country\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<hr />\n\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-2 glyph-container\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-envelope\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-6 col-sm-8\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tAddress\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"Address\"\n\t\t\t\t\t\t\t\tv-model=\"address\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-4 col-sm-4\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tAddress (continued)\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"Apartment #, etc\"\n\t\t\t\t\t\t\t\tv-model=\"address_2\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-4 col-md-offset-2 col-sm-6\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tCity\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"City\"\n\t\t\t\t\t\t\t\tv-model=\"city\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-4 col-sm-3\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tState / Region\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"State / Region\"\n\t\t\t\t\t\t\t\tv-model=\"state\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-2 col-sm-3\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tZIP Code\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"ZIP Code\"\n\t\t\t\t\t\t\t\tv-model=\"zip\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<hr />\n\n\t\t\t<div v-if=\"manage\" class=\"row\">\n\t\t\t\t<div class=\"col-md-2 glyph-container\">\n\t\t\t\t\t<span class=\"glyphicon glyphicon-pencil\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-sm-4\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tGraduation date\n\t\t\t\t\t\t\t<vue-flatpickr placeholder=\"Graduation date\"\n\t\t\t\t\t\t\t\t:options=\"flatpickrOptions\"\n\t\t\t\t\t\t\t\tv-model=\"graduation_date\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-sm-8\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tNotes\n\t\t\t\t\t\t\t<textarea class=\"form-control\"\n\t\t\t\t\t\t\t\tplaceholder=\"Notes\"\n\t\t\t\t\t\t\t\tv-model=\"notes\">\n\t\t\t\t\t\t\t</textarea>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"btn-lg-submit-container\">\n\t\t\t\t<confirmation-button v-if=\"showClose\" class=\"btn btn-lg\"\n\t\t\t\t\t\tunpressed-class=\"btn-default\"\n\t\t\t\t\t\tpressed-class=\"btn-warning\"\n\t\t\t\t\t\t@click=\"$emit('close')\">\n\t\t\t\t\tCancel\n\t\t\t\t</confirmation-button>\n\t\t\t\t<button type=\"submit\" class=\"btn btn-lg btn-primary\"\n\t\t\t\t\t\t@click=\"saveAlum\">\n\t\t\t\t\tSubmit\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</template>\n\n<script>\nimport VueFlatpickr from '@jacobmischka/vue-flatpickr';\n\nimport ConfirmationButton from 'vue-components/ConfirmationButton.vue';\n\nimport {\n\tokOrThrow,\n\tgetFetchHeaders\n} from 'modules/utils.js';\n\nexport default {\n\tprops: {\n\t\tmanage: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\talum: {\n\t\t\ttype: Object,\n\t\t\trequired: false\n\t\t},\n\t\tsaveUrl: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowClose: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata() {\n\t\tlet alum = this.alum;\n\n\t\treturn {\n\t\t\tfirst_name: alum ? alum.first_name : '',\n\t\t\tlast_name: alum ? alum.last_name : '',\n\t\t\temail: alum ? alum.email : '',\n\t\t\tphone: alum ? alum.phone : '',\n\t\t\temployer: alum ? alum.employer : '',\n\t\t\tcountry: alum ? alum.country : '',\n\t\t\taddress: alum ? alum.address : '',\n\t\t\taddress_2: alum ? alum.address_2 : '',\n\t\t\tcity: alum ? alum.city : '',\n\t\t\tstate: alum ? alum.state : '',\n\t\t\tzip: alum ? alum.zip : '',\n\t\t\tgraduation_date: alum ? alum.graduation_date : '',\n\t\t\tnotes: alum ? alum.notes : ''\n\t\t};\n\t},\n\n\tcomputed: {\n\t\tprops() {\n\t\t\treturn [\n\t\t\t\t'first_name',\n\t\t\t\t'last_name',\n\t\t\t\t'email',\n\t\t\t\t'phone',\n\t\t\t\t'employer',\n\t\t\t\t'country',\n\t\t\t\t'address_2',\n\t\t\t\t'city',\n\t\t\t\t'state',\n\t\t\t\t'zip'\n\t\t\t];\n\t\t},\n\t\tmanageProps() {\n\t\t\treturn [\n\t\t\t\t'graduation_date',\n\t\t\t\t'notes'\n\t\t\t];\n\t\t},\n\t\taddEditText() {\n\t\t\treturn this.alum\n\t\t\t\t? 'Edit'\n\t\t\t\t: 'Add';\n\t\t},\n\t\tflatpickrOptions() {\n\t\t\treturn {\n\t\t\t\taltInput: true,\n\t\t\t\taltInputClass: 'form-control appear-not-readonly'\n\t\t\t};\n\t\t}\n\t},\n\n\twatch: {\n\t\talum(alum) {\n\t\t\tObject.assign(this, this.assignProps(alum));\n\t\t}\n\t},\n\n\tmethods: {\n\t\tassignProps(src) {\n\t\t\tlet dest = {};\n\n\t\t\tfor (let prop of this.props) {\n\t\t\t\tif (src && src[prop])\n\t\t\t\t\tdest[prop] = src[prop];\n\t\t\t\telse\n\t\t\t\t\tdest[prop] = null;\n\t\t\t}\n\n\t\t\tif (this.manage) {\n\t\t\t\tfor (let prop of this.manageProps) {\n\t\t\t\t\tif (src && src[prop])\n\t\t\t\t\t\tdest[prop] = src[prop];\n\t\t\t\t\telse\n\t\t\t\t\t\tdest[prop] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn dest;\n\t\t},\n\t\tsaveAlum(event) {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst body = this.assignProps(this);\n\n\t\t\tif (this.alum)\n\t\t\t\tbody._method = 'PATCH';\n\n\t\t\tfetch(this.saveUrl, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: getFetchHeaders(),\n\t\t\t\tcredentials: 'same-origin',\n\t\t\t\tbody: JSON.stringify(body)\n\t\t\t}).then(okOrThrow).then(() => {\n\t\t\t\tthis.$emit('reload');\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t\tthis.$emit('alert', {\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\thtml: '<strong>Error:</strong> There was a problem saving the alum'\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\tcomponents: {\n\t\tVueFlatpickr,\n\t\tConfirmationButton\n\t}\n};\n</script>\n\n<style scoped>\n\t.glyph-container {\n\t\ttext-align: center;\n\t\theight: 100%;\n\t\tpadding: 20px;\n\t}\n\n\t.glyphicon {\n\t\tvertical-align: middle;\n\t\tfont-size: 36px;\n\t}\n\n\thr {\n\t\tmargin: 40px;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/Alumni/Edit.vue?2ae874b7","<template>\n\t<div class=\"container body-block\">\n\t\t<h2>Import alumni</h2>\n\n\t\t<div>\n\t\t\t<h3>Import from spreadsheet</h3>\n\t\t\t<form>\n\t\t\t\t<input type=\"file\" disabled />\n\t\t\t\t<button type=\"submit\" class=\"btn btn-primary btn-lg\"\n\t\t\t\t\t\tdisabled>\n\t\t\t\t\tComing soon\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<h3>Import from current users</h3>\n\n\t\t\t<div v-if=\"residents && residents.length > 0\"\n\t\t\t\t\tclass=\"row user-type-container\">\n\t\t\t\t<div class=\"col-sm-8 col-sm-offset-2\">\n\t\t\t\t\t<h4>Residents</h4>\n\t\t\t\t\t<component-list :items=\"residents\"\n\t\t\t\t\t\t\t:fields=\"['full_name', 'training_level']\">\n\t\t\t\t\t\t<template scope=\"user\">\n\t\t\t\t\t\t\t<div class=\"row import-user-row\">\n\t\t\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"col-sm-1\">\n\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" :value=\"user.id\"\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"usersToImport\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"col-sm-6\">\n\t\t\t\t\t\t\t\t\t\t{{ user.full_name }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"col-sm-5\">\n\t\t\t\t\t\t\t\t\t\t{{ renderTrainingLevel(user.training_level) }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</component-list>\n\n\t\t\t\t\t<div v-if=\"selectedResidents && selectedResidents.length > 0\"\n\t\t\t\t\t\t\tclass=\"row\">\n\t\t\t\t\t\t<div class=\"col-sm-8 col-sm-offset-2\">\n\t\t\t\t\t\t\t<div class=\"selected-users-panel panel panel-default\">\n\t\t\t\t\t\t\t\t<div class=\"panel-heading\">\n\t\t\t\t\t\t\t\t\t<div class=\"panel-title\">\n\t\t\t\t\t\t\t\t\t\tSelected residents\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"panel-body\">\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<li v-for=\"user of selectedResidents\">\n\t\t\t\t\t\t\t\t\t\t\t{{ user.full_name }}\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"fellows && fellows.length > 0\"\n\t\t\t\t\tclass=\"row user-type-container\">\n\t\t\t\t<div class=\"col-sm-8 col-sm-offset-2\">\n\t\t\t\t\t<h4>Fellows</h4>\n\t\t\t\t\t<component-list :items=\"fellows\"\n\t\t\t\t\t\t\t:fields=\"['full_name', 'secondary_training_level']\">\n\t\t\t\t\t\t<template scope=\"user\">\n\t\t\t\t\t\t\t<div class=\"row import-user-row\">\n\t\t\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"col-sm-1\">\n\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" :value=\"user.id\"\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"usersToImport\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"col-sm-6\">\n\t\t\t\t\t\t\t\t\t\t{{ user.full_name }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"col-sm-5\">\n\t\t\t\t\t\t\t\t\t\t{{ renderSecondaryTrainingLevel(user.secondary_training_level) }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</component-list>\n\n\t\t\t\t\t<div v-if=\"selectedFellows && selectedFellows.length > 0\"\n\t\t\t\t\t\t\tclass=\"row\">\n\t\t\t\t\t\t<div class=\"col-sm-8 col-sm-offset-2\">\n\t\t\t\t\t\t\t<div class=\"selected-users-panel panel panel-default\">\n\t\t\t\t\t\t\t\t<div class=\"panel-heading\">\n\t\t\t\t\t\t\t\t\t<div class=\"panel-title\">\n\t\t\t\t\t\t\t\t\t\tSelected fellows\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"panel-body\">\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<li v-for=\"user of selectedFellows\">\n\t\t\t\t\t\t\t\t\t\t\t{{ user.full_name }}\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"faculty && faculty.length > 0\"\n\t\t\t\t\tclass=\"row user-type-container\">\n\t\t\t\t<div class=\"col-sm-8 col-sm-offset-2\">\n\t\t\t\t\t<h4>Faculty</h4>\n\t\t\t\t\t<component-list :items=\"faculty\" :fields=\"['full_name']\">\n\t\t\t\t\t\t<template scope=\"user\">\n\t\t\t\t\t\t\t<div class=\"row import-user-row\">\n\t\t\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"col-sm-1 col-sm-offset-2\">\n\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" :value=\"user.id\"\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"usersToImport\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"col-sm-7\">\n\t\t\t\t\t\t\t\t\t\t{{ user.full_name }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</component-list>\n\n\t\t\t\t\t<div v-if=\"selectedFaculty && selectedFaculty.length > 0\"\n\t\t\t\t\t\t\tclass=\"row\">\n\t\t\t\t\t\t<div class=\"col-sm-8 col-sm-offset-2\">\n\t\t\t\t\t\t\t<div class=\"selected-users-panel panel panel-default\">\n\t\t\t\t\t\t\t\t<div class=\"panel-heading\">\n\t\t\t\t\t\t\t\t\t<div class=\"panel-title\">\n\t\t\t\t\t\t\t\t\t\tSelected faculty\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"panel-body\">\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<li v-for=\"user of selectedFaculty\">\n\t\t\t\t\t\t\t\t\t\t\t{{ user.full_name }}\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"selectedUsers && selectedUsers.length > 0\"\n\t\t\t\t\tclass=\"summary-container\">\n\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-sm-8 col-sm-offset-2\">\n\t\t\t\t\t\t<div class=\"selected-users-panel panel panel-default\">\n\t\t\t\t\t\t\t<div class=\"panel-heading\">\n\t\t\t\t\t\t\t\t<div class=\"panel-title\">\n\t\t\t\t\t\t\t\t\tSelected users\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"panel-body\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li v-for=\"user of selectedUsers\">\n\t\t\t\t\t\t\t\t\t\t{{ user.full_name }}\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-sm-8 col-sm-offset-2\">\n\t\t\t\t\t\t<label class=\"containing-label\">\n\t\t\t\t\t\t\tGraduation date for imported users\n\t\t\t\t\t\t\t<vue-flatpickr :options=\"flatpickrOptions\"\n\t\t\t\t\t\t\t\tv-model=\"graduationDate\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"btn-lg-submit-container text-center\">\n\t\t\t\t\t<confirmation-button class=\"btn btn-lg\"\n\t\t\t\t\t\t\tunpressed-class=\"btn-default\"\n\t\t\t\t\t\t\tpressed-class=\"btn-warning\"\n\t\t\t\t\t\t\t@click=\"$emit('close')\">\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</confirmation-button>\n\t\t\t\t\t<confirmation-button class=\"btn btn-lg\"\n\t\t\t\t\t\t\tunpressed-class=\"btn-primary\"\n\t\t\t\t\t\t\tpressed-class=\"btn-success\"\n\t\t\t\t\t\t\t@click=\"importUsers\">\n\t\t\t\t\t\tImport\n\t\t\t\t\t</confirmation-button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport VueFlatpickr from '@jacobmischka/vue-flatpickr';\n\nimport ComponentList from 'vue-components/ComponentList.vue';\nimport ConfirmationButton from 'vue-components/ConfirmationButton.vue';\n\nimport {\n\trenderTrainingLevel,\n\trenderSecondaryTrainingLevel\n} from 'modules/datatable-utils.js';\nimport { isoDateString, currentYear } from 'modules/date-utils.js';\nimport { getFetchHeaders, jsonOrThrow } from 'modules/utils.js';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tresidents: [],\n\t\t\tfellows: [],\n\t\t\tfaculty: [],\n\n\t\t\tgraduationDate: isoDateString(currentYear().endDate),\n\t\t\tusersToImport: []\n\t\t};\n\t},\n\n\tcomputed: {\n\t\tflatpickrOptions() {\n\t\t\treturn {\n\t\t\t\taltInput: true,\n\t\t\t\taltInputClass: 'form-control appear-not-readonly'\n\t\t\t};\n\t\t},\n\t\tselectedResidents() {\n\t\t\treturn this.residents.filter(resident =>\n\t\t\t\tthis.usersToImport.includes(resident.id));\n\t\t},\n\t\tselectedFellows() {\n\t\t\treturn this.fellows.filter(user =>\n\t\t\t\tthis.usersToImport.includes(user.id));\n\t\t},\n\t\tselectedFaculty() {\n\t\t\treturn this.faculty.filter(user =>\n\t\t\t\tthis.usersToImport.includes(user.id));\n\t\t},\n\t\tselectedUsers() {\n\t\t\treturn [].concat(\n\t\t\t\tthis.selectedResidents,\n\t\t\t\tthis.selectedFellows,\n\t\t\t\tthis.selectedFaculty\n\t\t\t);\n\t\t}\n\t},\n\n\tmounted() {\n\t\tthis.fetchUsers();\n\t},\n\n\tmethods: {\n\t\trenderTrainingLevel,\n\t\trenderSecondaryTrainingLevel,\n\t\tfetchUsers() {\n\t\t\tthis.fetchResidents();\n\t\t\tthis.fetchFellows();\n\t\t\tthis.fetchFaculty();\n\t\t},\n\t\tfetchResidents() {\n\t\t\tlet query = $.param({\n\t\t\t\ttype: 'resident',\n\t\t\t\ttraining_level: [\n\t\t\t\t\t'intern',\n\t\t\t\t\t'ca-1',\n\t\t\t\t\t'ca-2',\n\t\t\t\t\t'ca-3'\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tfetch(`/users?${query}`, {\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: getFetchHeaders(),\n\t\t\t\tcredentials: 'same-origin'\n\t\t\t}).then(jsonOrThrow).then(users => {\n\t\t\t\tthis.residents = users;\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t\tthis.$emit('alert', {\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\thtml: '<strong>Error:</strong> There was a problem fetching residents'\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tfetchFellows() {\n\t\t\tlet query = $.param({\n\t\t\t\ttype: 'resident',\n\t\t\t\ttraining_level: 'fellow'\n\t\t\t});\n\n\t\t\tfetch(`/users?${query}`, {\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: getFetchHeaders(),\n\t\t\t\tcredentials: 'same-origin'\n\t\t\t}).then(jsonOrThrow).then(users => {\n\t\t\t\tthis.fellows = users;\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t\tthis.$emit('alert', {\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\thtml: '<strong>Error:</strong> There was a problem fetching residents'\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tfetchFaculty() {\n\t\t\tlet query = $.param({\n\t\t\t\ttype: 'faculty'\n\t\t\t});\n\n\t\t\tfetch(`/users?${query}`, {\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: getFetchHeaders(),\n\t\t\t\tcredentials: 'same-origin'\n\t\t\t}).then(jsonOrThrow).then(users => {\n\t\t\t\tthis.faculty = users;\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t\tthis.$emit('alert', {\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\thtml: '<strong>Error:</strong> There was a problem fetching residents'\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\timportUsers() {\n\t\t\tfetch('/alumni/import/users', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: getFetchHeaders(),\n\t\t\t\tcredentials: 'same-origin',\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tusers: this.usersToImport,\n\t\t\t\t\tgraduation_date: this.graduationDate\n\t\t\t\t})\n\t\t\t}).then(jsonOrThrow).then(response => {\n\t\t\t\tif (response.successes && response.successes.length > 0) {\n\t\t\t\t\tlet lis = response.successes.map(userId => {\n\t\t\t\t\t\tlet user = this.selectedUsers.find(user =>\n\t\t\t\t\t\t\tuser.id === userId);\n\t\t\t\t\t\treturn `<li>${user.full_name}</li>`;\n\t\t\t\t\t});\n\t\t\t\t\tthis.$emit('alert', {\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\thtml: `Imported successfully: <ul>\n\t\t\t\t\t\t\t${lis.join(' ')}\n\t\t\t\t\t\t</ul>`\n\t\t\t\t\t});\n\t\t\t\t\tthis.$emit('alert', {\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\ttext: \"Please don't forget to close the accounts of any leaving users!\"\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (response.notFound && response.notFound.length > 0) {\n\t\t\t\t\tlet lis = response.notFound.map(userId => {\n\t\t\t\t\t\tlet user = this.selectedUsers.find(user =>\n\t\t\t\t\t\t\tuser.id === userId);\n\t\t\t\t\t\treturn `<li>${user.full_name}</li>`;\n\t\t\t\t\t});\n\t\t\t\t\tthis.$emit('alert', {\n\t\t\t\t\t\ttype: 'warning',\n\t\t\t\t\t\thtml: `Users not found: <ul>\n\t\t\t\t\t\t\t${lis.join(' ')}\n\t\t\t\t\t\t</ul>`\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (response.errors && response.errors.length > 0) {\n\t\t\t\t\tlet lis = response.errors.map(userId => {\n\t\t\t\t\t\tlet user = this.selectedUsers.find(user =>\n\t\t\t\t\t\t\tuser.id === userId);\n\t\t\t\t\t\treturn `<li>${user.full_name}</li>`;\n\t\t\t\t\t});\n\t\t\t\t\tthis.$emit('alert', {\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\thtml: `Not successfully imported: <ul>\n\t\t\t\t\t\t\t${lis.join(' ')}\n\t\t\t\t\t\t</ul>`\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.$emit('reload');\n\t\t\t\t\tthis.$emit('close');\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t\tthis.$emit('alert', {\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\thtml: '<strong>Error:</strong> There was a problem importing alumni'\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\tcomponents: {\n\t\tVueFlatpickr,\n\t\tComponentList,\n\t\tConfirmationButton\n\t}\n};\n</script>\n\n<style scoped>\n\t.import-user-row {\n\t\tborder-bottom: 1px solid rgba(0, 0, 0, 0.15);\n\t}\n\n\t.import-user-row:nth-child(even) {\n\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t}\n\n\t.import-user-row .containing-label {\n\t\tpadding-top: 5px;\n\t}\n\n\t.user-type-container,\n\t.summary-container{\n\t\tmargin-top: 3em;\n\t}\n\n\t.selected-users-panel {\n\t\tmargin-top: 1em;\n\t}\n\n\t.selected-users-panel .panel-body {\n\t\tmax-height: 300px;\n\t\toverflow-y: auto;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-components/Alumni/Import.vue?a1d8e6e2"],"sourceRoot":""}