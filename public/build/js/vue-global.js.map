{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./resources/assets/js/vue-constructors/index.js","webpack:///./resources/assets/js/vue-constructors/news.js","webpack:///./resources/assets/js/modules/niceties.js"],"names":["Vue","config","errorHandler","err","vm","info","rollbar","error","JSON","stringify","directive","el","value","oldValue","modifiers","once","style","visibility","transition","opacity","createNews","propsData","props","user","type","Object","required","data","alertItems","template","mounted","fetchUnseenNewsItems","methods","getAcknowledgeText","fetch","fetchConfig","then","newsItems","catch","logError","handleDismiss","alertId","method","body","_method","filter","item","id","handleRemindLater","components","BootstrapAlert","ACKNOWLEDGE_TEXT_OPTIONS","exclaim","phrase","getRandom"],"mappings":"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","file":"vue-global.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","import Vue from 'vue';\n\nimport { rollbar } from '@/modules/errors.js';\n\nexport { default as createNews } from './news.js';\n\nVue.config.errorHandler = (err, vm, info) => {\n\trollbar.error(`Error from Vue: ${err}, info: ${info}, vm: ${JSON.stringify(vm)}`);\n};\n\nVue.directive('visible', (el, {value, oldValue, modifiers}) => {\n\tif(modifiers.once && el.style.visibility === 'visible')\n\t\treturn;\n\n\tif(value !== oldValue){\n\t\tel.style.transition = oldValue\n\t\t\t? 'opacity 0.1s ease-out, visibility 0s 0.1s'\n\t\t\t: 'opacity 0.1s ease-out';\n\n\t\tel.style.visibility = value\n\t\t\t? 'visible'\n\t\t\t: 'hidden';\n\t\tel.style.opacity = value\n\t\t\t? 1\n\t\t\t: 0;\n\t}\n});\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-constructors/index.js","import Vue from 'vue';\n\nimport BootstrapAlert from '@/vue-components/BootstrapAlert.vue';\n\nimport { logError } from '@/modules/errors.js';\nimport { getAcknowledgeText } from '@/modules/niceties.js';\nimport { fetchConfig, okOrThrow, jsonOrThrow } from '@/modules/utils.js';\n\nexport default function createNews(el, propsData) {\n\treturn new Vue({\n\t\tel,\n\t\tprops: {\n\t\t\tuser: {\n\t\t\t\ttype: Object,\n\t\t\t\trequired: true\n\t\t\t}\n\t\t},\n\t\tpropsData,\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\talertItems: []\n\t\t\t};\n\t\t},\n\t\ttemplate: `\n\t\t\t<div v-if=\"alertItems && alertItems.length > 0\"\n\t\t\t\t\tclass=\"news-list container\">\n\t\t\t\t<div class=\"panel-body\">\n\t\t\t\t\t<bootstrap-alert v-for=\"alert of alertItems\"\n\t\t\t\t\t\t\t:key=\"alert.id\"\n\t\t\t\t\t\t\tv-bind=\"alert\"\n\t\t\t\t\t\t\tdismissable\n\t\t\t\t\t\t\t@close=\"handleDismiss(alert.id)\">\n\t\t\t\t\t\t<div class=\"text-right\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\">\n\t\t\t\t\t\t\t\t{{ getAcknowledgeText() }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</bootstrap-alert>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`,\n\t\tmounted() {\n\t\t\tthis.fetchUnseenNewsItems();\n\t\t},\n\t\tmethods: {\n\t\t\tgetAcknowledgeText,\n\t\t\tfetchUnseenNewsItems() {\n\t\t\t\tfetch('/news-items/unseen', {\n\t\t\t\t\t...fetchConfig()\n\t\t\t\t}).then(jsonOrThrow).then(newsItems => {\n\t\t\t\t\tthis.alertItems = newsItems;\n\t\t\t\t}).catch(err => {\n\t\t\t\t\t// FIXME: Show this somewhere\n\t\t\t\t\tlogError(err);\n\t\t\t\t});\n\t\t\t},\n\t\t\thandleDismiss(alertId) {\n\t\t\t\tfetch(`/news-items/${alertId}/dismiss`, {\n\t\t\t\t\t...fetchConfig(),\n\t\t\t\t\tmethod: 'POST', // PATCH\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t_method: 'PATCH'\n\t\t\t\t\t})\n\t\t\t\t}).then(okOrThrow).then(() => {\n\t\t\t\t\tthis.alertItems = this.alertItems.filter(item =>\n\t\t\t\t\t\titem.id !== alertId\n\t\t\t\t\t);\n\t\t\t\t}).catch(err => {\n\t\t\t\t\t// TODO: Display this somewhere\n\t\t\t\t\t// handleError(err, this, )\n\t\t\t\t\tlogError(err);\n\t\t\t\t});\n\t\t\t},\n\t\t\thandleRemindLater(alertId) {\n\t\t\t\t// TODO\n\t\t\t\t// fetch(`/news-items/${alertId}/temporarily-dismiss`, {\n\t\t\t\t// \t...fetchConfig(),\n\t\t\t\t// \tmethod: 'POST', // PATCH\n\t\t\t\t// \tbody: JSON.stringify({\n\t\t\t\t// \t\t_method: 'PATCH'\n\t\t\t\t// \t})\n\t\t\t\t// })\n\t\t\t}\n\t\t},\n\t\tcomponents: {\n\t\t\tBootstrapAlert\n\t\t}\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-constructors/news.js","/* @flow */\n\nimport { getRandom } from './utils.js';\n\nexport const ACKNOWLEDGE_TEXT_OPTIONS = [\n\t'OK',\n\t'Cool',\n\t'Nice',\n\t'Good to know',\n\t'Thanks',\n\t'Neat'\n];\n\nexport function getAcknowledgeText(exclaim: boolean = true): string {\n\tlet phrase = getRandom(ACKNOWLEDGE_TEXT_OPTIONS);\n\n\tif (exclaim)\n\t\tphrase += '!';\n\n\treturn phrase;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/modules/niceties.js"],"sourceRoot":""}