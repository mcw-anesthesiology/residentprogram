{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./resources/assets/js/modules/user-utils.js","webpack:///./resources/assets/js/vue-components/AlertList.vue","webpack:///./resources/assets/js/vue-components/BootstrapAlert.vue","webpack:///resources/assets/js/vue-components/AlertList.vue","webpack:///./resources/assets/js/vue-components/BootstrapAlert.vue?4d3b","webpack:///resources/assets/js/vue-components/BootstrapAlert.vue","webpack:///./resources/assets/js/vue-components/BootstrapAlert.vue?c310","webpack:///./resources/assets/js/vue-components/AlertList.vue?7969","webpack:///./resources/assets/js/vue-mixins/HasAlerts.js","webpack:///./resources/assets/js/vue-constructors/user.js"],"names":["USER_SETTINGS","defaultEvaluationRange","SETTINGS_HELP","getUserSetting","user","settingName","user_settings","setting","find","s","name","value","data","alerts","components","AlertList","createUserSettingsPage","el","propsData","mixins","props","type","Object","required","computed","methods","displaySetting","handleSettingsSubmit","event","preventDefault","FormData","target","fetch","fetchConfig","contentType","method","body","then","entries","Array","from","saved","successful","filter","_","map","unsuccessful","length","push","text","pluralize","get","i","findIndex","splice","u","html","catch","handleError","err"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;ACNO,IAAMA,gBAAgB;AAC5BC,yBAAwB,CACvB,gBADuB,EAEvB,iBAFuB,EAGvB,aAHuB,EAIvB,SAJuB;AADI,CAAtB;;AASA,IAAMC,gBAAgB;AAC5BD,yBAAwB;AADI,CAAtB;;AAIA,SAASE,cAAT,CAAwBC,IAAxB,EAAoCC,WAApC,EAAkE;AACxE,KAAID,QAAQA,KAAKE,aAAjB,EAAgC;AAC/B,MAAMC,UAAUH,KAAKE,aAAL,CAAmBE,IAAnB,CAAwB;AAAA,UAAKC,EAAEC,IAAF,KAAWL,WAAhB;AAAA,GAAxB,CAAhB;AACA,MAAIE,OAAJ,EACC,OAAOA,QAAQI,KAAf;AACD;AACD,C;;;;;;;;;ACvBD;AAAA;AACA;AACA;AACA;AACA;AAC8K;AAC9K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,wDAAwD,IAAI;;AAE3I;AACA,YAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;;;;;;;;;;ACzCA;AAAA;AACA;AACA;AACA,wBAAoS;AACpS;AACA;AACA;AACA;AACA;AAC6K;AAC7K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,wDAAwD,IAAI;;AAE3I;AACA,YAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;;;;;;;;;;;;;;;;;;;;ACnCA;;AAEA;;;SAIA;aAGA;AAJA;AADA;;2CAOA;2BACA;wBACA;uBACA;AAEA;AANA;;AASA;AAFA;AAdA,G;;;;;;;ACbA,yC;;;;;;;;;;;;;;;;;;;;;ACaA;;;SAIA;YACA;uCACA;WACA,CACA,QACA,WACA,WACA,SACA,mBACA;AAEA;AAZA;;SAcA;aAEA;AAHA;;SAKA;aAEA;AAHA;;SAKA;YAGA;AAJA;AAtBA;;4CA4BA;qBACA,gBAEA;;0BACA;AAEA;AAPA;AA5BA,G;;;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,kDAAkD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,wCAAwC;AAC9D;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,yBAAyB,SAAS,wBAAwB,EAAE;AAC5D;AACA;AACA;AACA;AACA,qBAAqB,YAAY,8BAA8B,EAAE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;ACpCA;;AAEA,yDAAe;AACdC,KADc,kBACP;AACN,SAAO;AACNC,WAAQ;AADF,GAAP;AAGA,EALa;;;AAOdC,aAAY;AACXC,aAAA,8EAAAA;AADW;AAPE,CAAf,E;;;;;;;;;;;;;;;;;;ACFA;AACA;;AAEA;AACA;AACA;;AAOO,SAASC,sBAAT,CAAgCC,EAAhC,EAAoCC,SAApC,EAA+C;AACrD,QAAO,IAAI,2CAAJ,CAAQ;AACdC,UAAQ,CAAC,yEAAD,CADM;AAEdF,QAFc;AAGdG,SAAO;AACNhB,SAAM;AACLiB,UAAMC,MADD;AAELC,cAAU;AAFL;AADA,GAHO;AASdL,sBATc;AAUdN,MAVc,kBAUP;AACN,UAAO;AACNN,mBAAe,KAAKF,IAAL,CAAUE;AADnB,IAAP;AAGA,GAda;;AAedkB,YAAU;AACTxB,gBADS,2BACO;AACf,WAAO,6EAAP;AACA,IAHQ;AAITE,gBAJS,2BAIO;AACf,WAAO,6EAAP;AACA;AANQ,GAfI;AAuBduB,WAAS;AACRtB,iBADQ,0BACOI,OADP,EACgB;AACvB,WAAO,sFAAAJ,CAAe,IAAf,EAAqBI,OAArB,CAAP;AACA,IAHO;;AAIRmB,mBAAgB,2EAJR;AAKRC,uBALQ,gCAKaC,KALb,EAKoB;AAAA;;AAC3BA,UAAMC,cAAN;;AAEA,QAAMjB,OAAO,IAAIkB,QAAJ,CAAaF,MAAMG,MAAnB,CAAb;;AAEAC,+CACI,8EAAAC,CAAY,EAACC,aAAa,IAAd,EAAZ,CADJ;AAECC,aAAQ,MAFT;AAGCC,WAAMxB;AAHP,QAIGyB,IAJH,CAIQ,sEAJR,EAIqBA,IAJrB,CAI0B,iBAAS;AAClC,SAAMC,UAAUC,MAAMC,IAAN,CAAWlB,OAAOgB,OAAP,CAAeG,KAAf,CAAX,CAAhB;AACA,SAAMC,aAAaJ,QACjBK,MADiB,CACV;AAAA;AAAA,UAAEC,CAAF;AAAA,UAAKnC,CAAL;;AAAA,aAAYA,CAAZ;AAAA,MADU,EAEjBoC,GAFiB,CAEb;AAAA;AAAA,UAAEnC,IAAF;AAAA,UAAQkC,CAAR;;AAAA,aAAelC,IAAf;AAAA,MAFa,CAAnB;AAGA,SAAMoC,eAAeR,QACnBK,MADmB,CACZ;AAAA;AAAA,UAAEC,CAAF;AAAA,UAAKnC,CAAL;;AAAA,aAAY,CAACA,CAAb;AAAA,MADY,EAEnBoC,GAFmB,CAEf;AAAA;AAAA,UAAEnC,IAAF;AAAA,UAAQkC,CAAR;;AAAA,aAAelC,IAAf;AAAA,MAFe,CAArB;;AAIA,SAAIgC,WAAWK,MAAX,GAAoB,CAAxB,EAA2B;AAC1B,UAAMtC,IAAIiC,WAAWK,MAArB;AACA,YAAKlC,MAAL,CAAYmC,IAAZ,CAAiB;AAChB3B,aAAM,SADU;AAEhB4B,aAASxC,CAAT,SAAc,4EAAAyC,CAAU,SAAV,EAAqBzC,CAArB,CAAd;AAFgB,OAAjB;;AAKA,UAAMH,gBAAgB,MAAKA,aAA3B;;AAP0B,iCAQfI,IARe;AASzB,WAAMH,UAAU;AACfG,kBADe;AAEfC,eAAOC,KAAKuC,GAAL,CAASzC,IAAT;AAFQ,QAAhB;AAIA,WAAM0C,IAAI9C,cAAc+C,SAAd,CAAwB;AAAA,eAAK5C,EAAEC,IAAF,KAAWA,IAAhB;AAAA,QAAxB,CAAV;AACA,WAAI0C,MAAM,CAAC,CAAX,EAAc;AACb9C,sBAAc0C,IAAd,CAAmBzC,OAAnB;AACA,QAFD,MAEO;AACND,sBAAcgD,MAAd,CAAqBF,CAArB,EAAwB,CAAxB,EAA2B7C,OAA3B;AACA;AAlBwB;;AAAA;AAAA;AAAA;;AAAA;AAQ1B,4BAAmBmC,UAAnB,8HAA+B;AAAA,YAApBhC,IAAoB;;AAAA,cAApBA,IAAoB;AAW9B;AAnByB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAoB1B,YAAKJ,aAAL,GAAqBA,aAArB;AACA;;AAED,SAAIwC,aAAaC,MAAb,GAAsB,CAA1B,EAA6B;AAC5B,UAAMQ,IAAIT,aAAaC,MAAvB;AACA,YAAKlC,MAAL,CAAYmC,IAAZ,CAAiB;AAChB3B,aAAM,OADU;AAEhBmC,uCACMD,CADN,SACW,4EAAAL,CAAU,SAAV,EAAqBK,CAArB,CADX,gEAGIT,aAAaD,GAAb,CAAiB;AAAA,wBACX,MAAKnB,cAAL,CAAoBhB,IAApB,CADW;AAAA,QAAjB,CAHJ;AAFgB,OAAjB;AAWA;AACD,KAlDD,EAkDG+C,KAlDH,CAkDS,eAAO;AACfC,KAAA,+EAAAA,CAAYC,GAAZ,SAAuB,0CAAvB;AACA,KApDD;AAqDA;AA/DO;AAvBK,EAAR,CAAP;AAyFA,C","file":"vue-user.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/* @flow */\n\nimport type { User } from '@/modules/utils.js';\n\nexport const USER_SETTINGS = {\n\tdefaultEvaluationRange: [\n\t\t'currentQuarter',\n\t\t'currentSemester',\n\t\t'currentYear',\n\t\t'allTime'\n\t]\n};\n\nexport const SETTINGS_HELP = {\n\tdefaultEvaluationRange: 'Warning: selecting \"All time\" by default may result in longer loading times'\n};\n\nexport function getUserSetting(user: User, settingName: string): ?string {\n\tif (user && user.user_settings) {\n\t\tconst setting = user.user_settings.find(s => s.name === settingName);\n\t\tif (setting)\n\t\t\treturn setting.value;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/modules/user-utils.js","var disposed = false\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0&bustCache!./AlertList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c0296f4c\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0&bustCache!./AlertList.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"resources/assets/js/vue-components/AlertList.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {  return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {  console.error(\"named exports are not supported in *.vue files.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-c0296f4c\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-c0296f4c\", Component.options)\n' + '  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/assets/js/vue-components/AlertList.vue\n// module id = 19\n// module chunks = 2 3 4 5 6 7 8 11 12 13","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6a9bb17e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0&bustCache!./BootstrapAlert.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0&bustCache!./BootstrapAlert.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6a9bb17e\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0&bustCache!./BootstrapAlert.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6a9bb17e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"resources/assets/js/vue-components/BootstrapAlert.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {  return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {  console.error(\"named exports are not supported in *.vue files.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-6a9bb17e\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-6a9bb17e\", Component.options)\n' + '  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/assets/js/vue-components/BootstrapAlert.vue\n// module id = 23\n// module chunks = 2 3 4 5 6 7 8 11 12 13","<template>\n\t<section>\n\t\t<bootstrap-alert v-for=\"(alert, index) of value\" :key=\"index\"\n\t\t\tv-bind=\"alert\"\n\t\t\tdismissable\n\t\t\t@close=\"removeAlert(index)\" />\n\t</section>\n</template>\n\n<script>\nimport BootstrapAlert from './BootstrapAlert.vue';\n\nexport default {\n\tprops: {\n\t\tvalue: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t}\n\t},\n\tmethods: {\n\t\tremoveAlert(index){\n\t\t\tlet alerts = this.value.slice();\n\t\t\talerts.splice(index, 1);\n\t\t\tthis.$emit('input', alerts);\n\t\t}\n\t},\n\tcomponents: {\n\t\tBootstrapAlert\n\t}\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// resources/assets/js/vue-components/AlertList.vue?710c8ff2","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?sourceMap!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-6a9bb17e\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0&bustCache!./resources/assets/js/vue-components/BootstrapAlert.vue\n// module id = 41\n// module chunks = 2 3 4 5 6 7 8 11 12 13","<template>\n\t<div class=\"alert\" :class=\"alertTypeClass\">\n\t\t<button v-if=\"dismissable\" type=\"button\" class=\"close\" aria-label=\"Close\"\n\t\t\t\t@click=\"$emit('close')\">\n\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t</button>\n\t\t{{ text }}\n\t\t<div v-if=\"html\" v-html=\"html\"></div>\n\t\t<slot></slot>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\tdefault: 'error',\n\t\t\tvalidator(type){\n\t\t\t\treturn [\n\t\t\t\t\t'info',\n\t\t\t\t\t'success',\n\t\t\t\t\t'warning',\n\t\t\t\t\t'error',\n\t\t\t\t\t'danger'\n\t\t\t\t].includes(type);\n\t\t\t}\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\thtml: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tdismissable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tcomputed: {\n\t\talertTypeClass(){\n\t\t\tif(this.type === 'error')\n\t\t\t\treturn 'alert-danger';\n\t\t\t\n\t\t\treturn `alert-${this.type}`;\n\t\t}\n\t}\n};\n</script>\n\n<style scoped>\n\t.alert {\n\t\tpage-break-inside: avoid;\n\t}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// resources/assets/js/vue-components/BootstrapAlert.vue?6c1ead4e","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"alert\", class: _vm.alertTypeClass },\n    [\n      _vm.dismissable\n        ? _c(\n            \"button\",\n            {\n              staticClass: \"close\",\n              attrs: { type: \"button\", \"aria-label\": \"Close\" },\n              on: {\n                click: function($event) {\n                  _vm.$emit(\"close\")\n                }\n              }\n            },\n            [_c(\"span\", { attrs: { \"aria-hidden\": \"true\" } }, [_vm._v(\"Ã—\")])]\n          )\n        : _vm._e(),\n      _vm._v(\"\\n\\t\" + _vm._s(_vm.text) + \"\\n\\t\"),\n      _vm.html\n        ? _c(\"div\", { domProps: { innerHTML: _vm._s(_vm.html) } })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm._t(\"default\")\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n    require(\"vue-hot-reload-api\")      .rerender(\"data-v-6a9bb17e\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6a9bb17e\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0&bustCache!./resources/assets/js/vue-components/BootstrapAlert.vue\n// module id = 43\n// module chunks = 2 3 4 5 6 7 8 11 12 13","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"section\",\n    _vm._l(_vm.value, function(alert, index) {\n      return _c(\n        \"bootstrap-alert\",\n        _vm._b(\n          {\n            key: index,\n            attrs: { dismissable: \"\" },\n            on: {\n              close: function($event) {\n                _vm.removeAlert(index)\n              }\n            }\n          },\n          \"bootstrap-alert\",\n          alert,\n          false\n        )\n      )\n    })\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n    require(\"vue-hot-reload-api\")      .rerender(\"data-v-c0296f4c\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c0296f4c\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0&bustCache!./resources/assets/js/vue-components/AlertList.vue\n// module id = 44\n// module chunks = 2 3 4 5 6 7 8 11 12 13","import AlertList from '@/vue-components/AlertList.vue';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\talerts: []\n\t\t};\n\t},\n\n\tcomponents: {\n\t\tAlertList\n\t}\n};\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-mixins/HasAlerts.js","import Vue from 'vue';\nimport HasAlerts from '@/vue-mixins/HasAlerts.js';\n\nimport { handleError } from '@/modules/errors.js';\nimport { USER_SETTINGS, SETTINGS_HELP, getUserSetting } from '@/modules/user-utils.js';\nimport {\n\tcamelCaseToWords,\n\tfetchConfig,\n\tjsonOrThrow,\n\tpluralize\n} from '@/modules/utils.js';\n\nexport function createUserSettingsPage(el, propsData) {\n\treturn new Vue({\n\t\tmixins: [HasAlerts],\n\t\tel,\n\t\tprops: {\n\t\t\tuser: {\n\t\t\t\ttype: Object,\n\t\t\t\trequired: true\n\t\t\t}\n\t\t},\n\t\tpropsData,\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tuser_settings: this.user.user_settings\n\t\t\t};\n\t\t},\n\t\tcomputed: {\n\t\t\tUSER_SETTINGS() {\n\t\t\t\treturn USER_SETTINGS;\n\t\t\t},\n\t\t\tSETTINGS_HELP() {\n\t\t\t\treturn SETTINGS_HELP;\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tgetUserSetting(setting) {\n\t\t\t\treturn getUserSetting(this, setting);\n\t\t\t},\n\t\t\tdisplaySetting: camelCaseToWords,\n\t\t\thandleSettingsSubmit(event) {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tconst data = new FormData(event.target);\n\n\t\t\t\tfetch(`/users/settings`, {\n\t\t\t\t\t...fetchConfig({contentType: null}),\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tbody: data\n\t\t\t\t}).then(jsonOrThrow).then(saved => {\n\t\t\t\t\tconst entries = Array.from(Object.entries(saved));\n\t\t\t\t\tconst successful = entries\n\t\t\t\t\t\t.filter(([_, s]) => s)\n\t\t\t\t\t\t.map(([name, _]) => name);\n\t\t\t\t\tconst unsuccessful = entries\n\t\t\t\t\t\t.filter(([_, s]) => !s)\n\t\t\t\t\t\t.map(([name, _]) => name);\n\n\t\t\t\t\tif (successful.length > 0) {\n\t\t\t\t\t\tconst s = successful.length;\n\t\t\t\t\t\tthis.alerts.push({\n\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\ttext: `${s} ${pluralize('setting', s)} saved successfully`\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst user_settings = this.user_settings;\n\t\t\t\t\t\tfor (const name of successful) {\n\t\t\t\t\t\t\tconst setting = {\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tvalue: data.get(name)\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tconst i = user_settings.findIndex(s => s.name === name);\n\t\t\t\t\t\t\tif (i === -1) {\n\t\t\t\t\t\t\t\tuser_settings.push(setting);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuser_settings.splice(i, 1, setting);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.user_settings = user_settings;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (unsuccessful.length > 0) {\n\t\t\t\t\t\tconst u = unsuccessful.length;\n\t\t\t\t\t\tthis.alerts.push({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\thtml: `\n\t\t\t\t\t\t\t\t<p>${u} ${pluralize('setting', u)} not saved</p>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t${unsuccessful.map(name =>\n\t\t\t\t\t\t\t\t\t\t`<li>${this.displaySetting(name)}</li>`\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t`\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\thandleError(err, this, 'There was a problem saving your settings');\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// ./resources/assets/js/vue-constructors/user.js"],"sourceRoot":""}