{"version":3,"sources":["datatables-datetime-moment.js","modernizr-custom.js","mdn-round.js","main.js","milestone-competency-radar-chart.js","evaluation-line-chart.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3DA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7oBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["/**\n * This plug-in for DataTables represents the ultimate option in extensibility\n * for sorting date / time strings correctly. It uses\n * [Moment.js](http://momentjs.com) to create automatic type detection and\n * sorting plug-ins for DataTables based on a given format. This way, DataTables\n * will automatically detect your temporal information and sort it correctly.\n *\n * For usage instructions, please see the DataTables blog\n * post that [introduces it](//datatables.net/blog/2014-12-18).\n *\n * @name Ultimate Date / Time sorting\n * @summary Sort date and time in any format using Moment.js\n * @author [Allan Jardine](//datatables.net)\n * @depends DataTables 1.10+, Moment.js 1.7+\n *\n * @example\n *    $.fn.dataTable.moment( 'HH:mm MMM D, YY' );\n *    $.fn.dataTable.moment( 'dddd, MMMM Do, YYYY' );\n *\n *    $('#example').DataTable();\n */\n\n(function (factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine([\"jquery\", \"moment\", \"datatables\"], factory);\n\t} else {\n\t\tfactory(jQuery, moment);\n\t}\n}(function ($, moment) {\n\n$.fn.dataTable.moment = function ( format, locale ) {\n\tvar types = $.fn.dataTable.ext.type;\n\n\t// Add type detection\n\ttypes.detect.unshift( function ( d ) {\n\t\t// Strip HTML tags if possible\n\t\tif ( d && d.replace ) {\n\t\t\td = d.replace(/<.*?>/g, '');\n\t\t}\n\n\t\t// Null and empty values are acceptable\n\t\tif ( d === '' || d === null ) {\n\t\t\treturn 'moment-'+format;\n\t\t}\n\n\t\treturn moment( d, format, locale, true ).isValid() ?\n\t\t\t'moment-'+format :\n\t\t\tnull;\n\t} );\n\n\t// Add sorting method - use an integer for the sorting\n\ttypes.order[ 'moment-'+format+'-pre' ] = function ( d ) {\n\t\treturn d === '' || d === null ?\n\t\t\t-Infinity :\n\t\t\tparseInt( moment( d.replace ? d.replace(/<.*?>/g, '') : d, format, locale, true ).format( 'x' ), 10 );\n\t};\n};\n\n}));\n","/*! modernizr 3.2.0 (Custom Build) | MIT *\n * http://modernizr.com/download/?-canvas-flexbox-flexwrap-setclasses !*/\n!function(e,n,t){function r(e,n){return typeof e===n}function o(){var e,n,t,o,s,i,a;for(var l in C)if(C.hasOwnProperty(l)){if(e=[],n=C[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(t=0;t<n.options.aliases.length;t++)e.push(n.options.aliases[t].toLowerCase());for(o=r(n.fn,\"function\")?n.fn():n.fn,s=0;s<e.length;s++)i=e[s],a=i.split(\".\"),1===a.length?Modernizr[a[0]]=o:(!Modernizr[a[0]]||Modernizr[a[0]]instanceof Boolean||(Modernizr[a[0]]=new Boolean(Modernizr[a[0]])),Modernizr[a[0]][a[1]]=o),g.push((o?\"\":\"no-\")+a.join(\"-\"))}}function s(e){var n=w.className,t=Modernizr._config.classPrefix||\"\";if(_&&(n=n.baseVal),Modernizr._config.enableJSClass){var r=new RegExp(\"(^|\\\\s)\"+t+\"no-js(\\\\s|$)\");n=n.replace(r,\"$1\"+t+\"js$2\")}Modernizr._config.enableClasses&&(n+=\" \"+t+e.join(\" \"+t),_?w.className.baseVal=n:w.className=n)}function i(){return\"function\"!=typeof n.createElement?n.createElement(arguments[0]):_?n.createElementNS.call(n,\"http://www.w3.org/2000/svg\",arguments[0]):n.createElement.apply(n,arguments)}function a(e,n){return!!~(\"\"+e).indexOf(n)}function l(e){return e.replace(/([a-z])-([a-z])/g,function(e,n,t){return n+t.toUpperCase()}).replace(/^-/,\"\")}function f(e,n){return function(){return e.apply(n,arguments)}}function u(e,n,t){var o;for(var s in e)if(e[s]in n)return t===!1?e[s]:(o=n[e[s]],r(o,\"function\")?f(o,t||n):o);return!1}function d(e){return e.replace(/([A-Z])/g,function(e,n){return\"-\"+n.toLowerCase()}).replace(/^ms-/,\"-ms-\")}function p(){var e=n.body;return e||(e=i(_?\"svg\":\"body\"),e.fake=!0),e}function c(e,t,r,o){var s,a,l,f,u=\"modernizr\",d=i(\"div\"),c=p();if(parseInt(r,10))for(;r--;)l=i(\"div\"),l.id=o?o[r]:u+(r+1),d.appendChild(l);return s=i(\"style\"),s.type=\"text/css\",s.id=\"s\"+u,(c.fake?c:d).appendChild(s),c.appendChild(d),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(n.createTextNode(e)),d.id=u,c.fake&&(c.style.background=\"\",c.style.overflow=\"hidden\",f=w.style.overflow,w.style.overflow=\"hidden\",w.appendChild(c)),a=t(d,e),c.fake?(c.parentNode.removeChild(c),w.style.overflow=f,w.offsetHeight):d.parentNode.removeChild(d),!!a}function m(n,r){var o=n.length;if(\"CSS\"in e&&\"supports\"in e.CSS){for(;o--;)if(e.CSS.supports(d(n[o]),r))return!0;return!1}if(\"CSSSupportsRule\"in e){for(var s=[];o--;)s.push(\"(\"+d(n[o])+\":\"+r+\")\");return s=s.join(\" or \"),c(\"@supports (\"+s+\") { #modernizr { position: absolute; } }\",function(e){return\"absolute\"==getComputedStyle(e,null).position})}return t}function v(e,n,o,s){function f(){d&&(delete T.style,delete T.modElem)}if(s=r(s,\"undefined\")?!1:s,!r(o,\"undefined\")){var u=m(e,o);if(!r(u,\"undefined\"))return u}for(var d,p,c,v,h,y=[\"modernizr\",\"tspan\"];!T.style;)d=!0,T.modElem=i(y.shift()),T.style=T.modElem.style;for(c=e.length,p=0;c>p;p++)if(v=e[p],h=T.style[v],a(v,\"-\")&&(v=l(v)),T.style[v]!==t){if(s||r(o,\"undefined\"))return f(),\"pfx\"==n?v:!0;try{T.style[v]=o}catch(g){}if(T.style[v]!=h)return f(),\"pfx\"==n?v:!0}return f(),!1}function h(e,n,t,o,s){var i=e.charAt(0).toUpperCase()+e.slice(1),a=(e+\" \"+b.join(i+\" \")+i).split(\" \");return r(n,\"string\")||r(n,\"undefined\")?v(a,n,o,s):(a=(e+\" \"+E.join(i+\" \")+i).split(\" \"),u(a,n,t))}function y(e,n,r){return h(e,t,t,n,r)}var g=[],C=[],x={_version:\"3.2.0\",_config:{classPrefix:\"\",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){C.push({name:e,fn:n,options:t})},addAsyncTest:function(e){C.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=x,Modernizr=new Modernizr;var w=n.documentElement,_=\"svg\"===w.nodeName.toLowerCase();Modernizr.addTest(\"canvas\",function(){var e=i(\"canvas\");return!(!e.getContext||!e.getContext(\"2d\"))});var S=\"Moz O ms Webkit\",b=x._config.usePrefixes?S.split(\" \"):[];x._cssomPrefixes=b;var E=x._config.usePrefixes?S.toLowerCase().split(\" \"):[];x._domPrefixes=E;var P={elem:i(\"modernizr\")};Modernizr._q.push(function(){delete P.elem});var T={style:P.elem.style};Modernizr._q.unshift(function(){delete T.style}),x.testAllProps=h,x.testAllProps=y,Modernizr.addTest(\"flexbox\",y(\"flexBasis\",\"1px\",!0)),Modernizr.addTest(\"flexwrap\",y(\"flexWrap\",\"wrap\",!0)),o(),s(g),delete x.addTest,delete x.addAsyncTest;for(var z=0;z<Modernizr._q.length;z++)Modernizr._q[z]();e.Modernizr=Modernizr}(window,document);","// Closure\n(function() {\n  /**\n   * Decimal adjustment of a number.\n   *\n   * @param {String}  type  The type of adjustment.\n   * @param {Number}  value The number.\n   * @param {Integer} exp   The exponent (the 10 logarithm of the adjustment base).\n   * @returns {Number} The adjusted value.\n   */\n  function decimalAdjust(type, value, exp) {\n    // If the exp is undefined or zero...\n    if (typeof exp === 'undefined' || +exp === 0) {\n      return Math[type](value);\n    }\n    value = +value;\n    exp = +exp;\n    // If the value is not a number or the exp is not an integer...\n    if (isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {\n      return NaN;\n    }\n    // Shift\n    value = value.toString().split('e');\n    value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));\n    // Shift back\n    value = value.toString().split('e');\n    return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));\n  }\n\n  // Decimal round\n  if (!Math.round10) {\n    Math.round10 = function(value, exp) {\n      return decimalAdjust('round', value, exp);\n    };\n  }\n  // Decimal floor\n  if (!Math.floor10) {\n    Math.floor10 = function(value, exp) {\n      return decimalAdjust('floor', value, exp);\n    };\n  }\n  // Decimal ceil\n  if (!Math.ceil10) {\n    Math.ceil10 = function(value, exp) {\n      return decimalAdjust('ceil', value, exp);\n    };\n  }\n})();\n","$.ajaxSetup({\n\theaders: {\n\t\t'X-CSRF-TOKEN': $(\"meta[name='csrf_token']\").attr(\"content\")\n\t}\n});\n\nmoment.updateLocale(\"en\", {\n\tcalendar: {\n\t\tlastDay : '[Yesterday at] LT',\n\t\tsameDay : '[Today at] LT',\n\t\tnextDay : '[Tomorrow at] LT',\n\t\tlastWeek : '[Last] dddd [at] LT',\n\t\tnextWeek : 'dddd [at] LT',\n\t\tsameElse: \"ll LT\"\n\t}\n});\n\nvar numSpecificReports = 0;\nfunction reportHtml(i) {\n\treturn '<div class=\"report-options collapse\">'+\n\t'<button type=\"button\" class=\"close remove-report-group\" aria-hidden=\"true\">&times;</button>'+\n\t'<h3>Report</h3>'+\n '<div class=\"form-group\">'+\n   '<label for=\"startDate'+i+'\">Start Date:</label>'+\n   '<input type=\"text\" class=\"form-control datepicker startDate\" id=\"startDate'+i+'\" name=\"startDate'+i+'\">'+\n '</div>'+\n '<div class=\"form-group\">'+\n   '<label for=\"endDate\">End Date:</label>'+\n   '<input type=\"text\" class=\"form-control datepicker endDate\" id=\"endDate'+i+'\" name=\"endDate'+i+'\">'+\n '</div>'+\n '<div class=\"form-group\" style=\"text-align: center;\">'+\n   '<button type=\"button\" class=\"btn lastThreeMonths\">Last Three Months</button> '+\n   '<button type=\"button\" class=\"btn lastSixMonths\">Last Six Months</button>'+\n '</div>'+\n '<div class=\"form-group\">'+\n   '<label for=\"trainingLevelInput'+i+'\">Training Level</label>'+\n   '<select class=\"form-control select2\" id=\"trainingLevelInput'+i+'\" name=\"trainingLevel'+i+'\" style=\"width: 100%\" required>'+\n\t '<option value=\"all\">All</option>'+\n\t '<option value=\"intern\">Intern</option>'+\n\t '<option value=\"ca-1\">CA-1</option>'+\n\t '<option value=\"ca-2\">CA-2</option>'+\n\t '<option value=\"ca-3\">CA-3</option>'+\n\t '<option value=\"fellow\">Fellow</option>'+\n   '</select>'+\n '</div>'+\n '<hr /><br />'+\n '</div>';\n}\n\nfunction addSendEmailModalBody(modal, replacements){\n\tmodal.find(\".ids-list-button\").click(function(){\n\t\t$(\".ids-container\").slideToggle();\n\t});\n\n\tmodal.find(\".body-rendered\").mouseenter(showEmailBody);\n\tmodal.find(\".body-rendered\").focusin(focusEmailBody);\n\n\tfunction showEmailBody(){\n\t\tmodal.find(\".body-rendered\").hide();\n\t\tmodal.find(\".body\").show();\n\t}\n\n\tfunction focusEmailBody(){\n\t\tshowEmailBody();\n\t\tmodal.find(\".body\").focus()\n\t}\n\n\tmodal.find(\".body\").mouseleave(function(){\n\t\tif(!$(this).is(document.activeElement))\n\t\t\tunfocusEmailBody();\n\t});\n\tmodal.find(\".body\").focusout(unfocusEmailBody);\n\n\tunfocusEmailBody();\n\n\tfunction unfocusEmailBody(){\n\t\tmodal.find(\".body\").hide();\n\t\tmarkupEmailBody();\n\t\tmodal.find(\".body-rendered\").show();\n\t}\n\n\n\tfunction markupEmailBody(){\n\t\tvar bodyText = marked(modal.find(\".body\").val());\n\n\t\tfor(var i = 0; i < replacements.length; i++){\n\t\t\tvar replacement = replacements[i];\n\t\t\tvar pattern = new RegExp(\"\\\\[\\\\[\" + replacement + \"\\\\]\\\\]\", \"g\");\n\t\t\tvar label = '<span class=\"label label-info\">' + replacement + '</span>';\n\t\t\tbodyText = bodyText.replace(pattern, label);\n\t\t}\n\n\t\tmodal.find(\".body-rendered\").html(bodyText);\n\t}\n}\n\nfunction openSendEmailModal(users, modal, subjectText, bodyText,\n\t\t\t\t\t\t\tsendSingleCallback, sendAllCallback,\n\t\t\t\t\t\t\tusersTitle, replacements){\n\tvar user;\n\tmodal.find(\".send\")\n\t\t.off(\"click\", sendSingleCallback)\n\t\t.off(\"click\", sendAllCallback);\n\n\tif(Array.isArray(users)){\n\t\tvar list = modal.find(\".ids-list\")[0];\n\t\tvar li, checkbox, label, labelText;\n\t\tvar numSentUsers = 0;\n\n\t\t$(list).empty();\n\t\tfor(var i = 0; i < users.length; i++){\n\t\t\tuser = users[i];\n\n\t\t\tli = document.createElement(\"li\");\n\t\t\tlabel = document.createElement(\"label\");\n\t\t\tcheckbox = document.createElement(\"input\");\n\t\t\tcheckbox.type = \"checkbox\";\n\t\t\tcheckbox.className = \"send-all-id\";\n\t\t\tcheckbox.value = user.id;\n\t\t\tif(!user.email)\n\t\t\t\tcheckbox.disabled = true;\n\t\t\telse if(user.send){\n\t\t\t\tcheckbox.checked = true;\n\t\t\t\tnumSentUsers++;\n\t\t\t}\n\t\t\tif(user.data){\n\t\t\t\tvar dataKeys = Object.keys(user.data);\n\t\t\t\tfor(var j = 0; j < dataKeys.length; j++){\n\t\t\t\t\tcheckbox.setAttribute(\"data-\" + dataKeys[j], user.data[dataKeys[j]]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlabel.appendChild(checkbox);\n\t\t\tlabelText = document.createTextNode(\" \" + user.full_name);\n\t\t\tlabel.appendChild(labelText);\n\t\t\tli.appendChild(label);\n\t\t\tlist.appendChild(li);\n\t\t}\n\n\t\tif(numSentUsers <= 6)\n\t\t\tmodal.find(\".ids-container\").show();\n\t\telse\n\t\t\tmodal.find(\".ids-container\").hide();\n\n\t\t$(\".send-all-id\").change(function(){\n\t\t\tvar numSentUsers = parseInt($(\".to\").val().split(\" \")[0], 10);\n\t\t\tif($(this).prop(\"checked\"))\n\t\t\t\tnumSentUsers++;\n\t\t\telse\n\t\t\t\tnumSentUsers--;\n\t\t\t$(\".to\").val(numSentUsers + \" \" + usersTitle);\n\t\t});\n\n\t\tmodal.find(\".to\").val(numSentUsers + \" \" + usersTitle);\n\t\tmodal.find(\".to-container\").addClass(\"input-group\");\n\t\tmodal.find(\".ids-list-button-container\").show();\n\t\tappendAlert(\"Please verify list of residents before sending\", modal.find(\".alert-container\"), \"warning\");\n\t\tmodal.find(\".send\").click(sendAllCallback);\n\t} else {\n\t\tuser = users;\n\t\tmodal.find(\".id\").val(user.id);\n\t\tmodal.find(\".to\").val(user.full_name + \" <\" + user.email + \">\");\n\t\tmodal.find(\".to-container\").removeClass(\"input-group\");\n\t\tmodal.find(\".ids-list-button-container\").hide();\n\t\tmodal.find(\".ids-list\").empty();\n\t\tmodal.find(\".ids-container\").hide();\n\t\tmodal.find(\".send\").click(sendSingleCallback);\n\t}\n\n\tmodal.find(\".subject\").val(subjectText);\n\tmodal.find(\".body\").val(bodyText);\n\n\tvar bodyHeight = 300;\n\tmodal.find(\".body-rendered\").height(bodyHeight);\n\taddSendEmailModalBody(modal, replacements);\n\tmodal.modal(\"show\");\n}\n\n\n$(\"#addNewSpecificReport\").click(function(){\n\tvar report = reportHtml(++numSpecificReports);\n\t$(report).appendTo(\".modal-specRpt\").velocity(\"slideDown\");\n\t$(\".datepicker\").datepicker({\n\t\tdateFormat: \"yy-mm-dd\"\n\t});\n});\n\n $(\".modal-specRpt\").on(\"click\", \".remove-report-group\", function(){\n\t$(this).parent().velocity(\"slideUp\", function(){\n\t\t$(this).remove();\n\t});\n });\n\nfunction checkReportQuery(){\n//Checks the report queries to make sure the entered date is of the correct format because not all browsers support the html5 datepicker being used.\n\tdateError = false;\n\t$(this).find(\"input\").each(function(){\n\t\tif($(this).attr(\"type\") == \"date\" || $(this).hasClass(\"datepicker\")){\n\t\t\tvar date = $(this).val();\n\t\t\tvar regex = /^\\d\\d\\d\\d-\\d\\d-\\d\\d$/;\n\t\t\tif(!new RegExp(regex).test(date)){\n\t\t\t\tdateError = true;\n\t\t\t}\n\t\t}\n\t});\n\n\tif(dateError){\n\t\talert(\"Please enter a valid date. If your browser does not support the date selector, date must be formatted YYYY-MM-DD\");\n\t}\n\n\treturn !dateError;\n}\n\nfunction lastSixMonths(){\n\tsetStartEndDates.call(this, 6);\n}\n\nfunction lastThreeMonths(){\n\tsetStartEndDates.call(this, 3);\n}\n\nfunction setStartEndDates(months){\n\tmonths = months != undefined ? months : 3;\n\tvar end = moment().subtract(1, \"month\").endOf(\"month\");\n\tvar start = moment(end).startOf(\"month\").subtract(months-1, \"month\");\n\t$(this).parents(\".report-options\").find(\".startDate\").val(start.format(\"YYYY-MM-DD\"));\n\t$(this).parents(\".report-options\").find(\".endDate\").val(end.format(\"YYYY-MM-DD\"));\n}\n\nfunction appendAlert(alertText, parent, alertType){\n\talertType = (typeof(alertType) == \"undefined\" ? \"danger\" : alertType);\n\tif(!parent)\n\t\tparent = \"#alert-container\";\n\n\tvar alert = document.createElement(\"div\");\n\talert.className = \"alert alert-\" + alertType + \" alert-dismissable\";\n\talert.role = \"alert\";\n\n\tvar close = document.createElement(\"button\");\n\tclose.type = \"button\";\n\tclose.className = \"close\";\n\tclose.setAttribute(\"data-dismiss\", \"alert\");\n\tclose.setAttribute(\"aria-label\", \"Close\");\n\n\tvar innerClose = document.createElement(\"span\");\n\tinnerClose.setAttribute(\"aria-hidden\", \"true\");\n\tinnerClose.innerHTML = \"&times;\";\n\tclose.appendChild(innerClose);\n\n\tvar text = document.createTextNode(alertText);\n\talert.appendChild(close);\n\talert.appendChild(text);\n\n\t$(parent).append(alert);\n}\n\nfunction unlimitTableEvals(settings, json){\n\tvar dt = this.DataTable({\n\t\tretrieve: true\n\t});\n\tvar url = dt.ajax.url();\n\tdt.ajax.url(url.substring(0, url.lastIndexOf(\"/\"))).load().draw();\n}\n\nfunction unlimitRestTableEvals(){\n\tvar dt = this.DataTable({\n\t\tretrieve: true\n\t});\n\tvar url = dt.ajax.url();\n\tdt.ajax.url(url.substring(0, url.lastIndexOf(\"?\"))).load().draw();\n}\n\nfunction addDateSelectors(dateName, idPrefix, containerQuery, defaultMonth, lastDaySelectedByDefault){\n\t// This is a better input method, but I wanted a non-js fallback so that's the default\n\n\tvar html =\n\t'<input type=\"hidden\" id=\"' + idPrefix +  'date\" name=\"' + dateName + '\" />' +\n\t'<div class=\"row\">' +\n\t\t'<label><input type=\"checkbox\" id=\"' + idPrefix + 'date-unknown\" /> Unknown<label>' +\n\t'</div>' +\n\t'<div class=\"row\" id=\"' + idPrefix + 'parts-container\">' +\n\t\t'<div class=\"col-md-4\">' +\n\t\t\t'<label for=\"' + idPrefix +  'date-year\">Year</label>' +\n\t\t\t'<select class=\"form-control\" id=\"' + idPrefix +  'date-year\"></select>' +\n\t\t'</div>' +\n\t\t'<div class=\"col-md-4\">' +\n\t\t\t'<label for=\"' + idPrefix +  'date-month\">Month</label>' +\n\t\t\t'<select class=\"form-control\" id=\"' + idPrefix +  'date-month\"></select>' +\n\t\t'</div>' +\n\t\t'<div class=\"col-md-4\">' +\n\t\t\t'<label for=\"' + idPrefix +  'date-day\">Day</label>' +\n\t\t\t'<select class=\"form-control\" id=\"' + idPrefix +  'date-day\"></select>' +\n\t\t'</div>' +\n\t'</div>';\n\n\tvar container = $(containerQuery);\n\tcontainer.append(html);\n\tvar option;\n\n\tvar yearSelect = container.find(\"#\" + idPrefix +  \"date-year\")[0];\n\tvar year = moment().get(\"year\");\n\tfor(var i = 0; i < 100; i++, year--){\n\t\toption = document.createElement(\"option\");\n\t\toption.value = year;\n\t\toption.appendChild(document.createTextNode(year));\n\t\tyearSelect.appendChild(option);\n\t}\n\n\tvar monthSelect = container.find(\"#\" + idPrefix +  \"date-month\")[0];\n\tmoment.months().forEach(function(month, index){\n\t\toption = document.createElement(\"option\");\n\t\toption.value = index;\n\t\toption.appendChild(document.createTextNode(month));\n\t\tif(index == defaultMonth)\n\t\t\toption.selected = true;\n\t\tmonthSelect.appendChild(option);\n\t});\n\n\tvar daySelect = container.find(\"#\" + idPrefix +  \"date-day\")[0];\n\tfor(var day = 0; day <= 30; day++){\n\t\toption = document.createElement(\"option\");\n\t\toption.value = day;\n\t\toption.appendChild(document.createTextNode(day));\n\t\tif(day == 30 & lastDaySelectedByDefault)\n\t\t\toption.selected = true;\n\t\tdaySelect.appendChild(option);\n\t}\n\n\t$(\"#\" + idPrefix +  \"date-year\").change(function(){\n\t\tvar daySelect = $(\"#\" + idPrefix +  \"date-day\")[0];\n\t\twhile(daySelect.firstChild)\n\t\t\tdaySelect.removeChild(daySelect.firstChild);\n\n\t\tvar year = parseInt($(this).val(), 10);\n\t\tvar month = parseInt($(\"#\" + idPrefix +  \"date-month\").val(), 10);\n\t\tvar daysInMonth = moment().year(year).month(month).daysInMonth();\n\t\tfor(var day = 1; day <= daysInMonth; day++){\n\t\t\toption = document.createElement(\"option\");\n\t\t\toption.value = day;\n\t\t\toption.appendChild(document.createTextNode(day));\n\t\t\tif(day == daysInMonth && lastDaySelectedByDefault)\n\t\t\t\toption.selected = true;\n\t\t\tdaySelect.appendChild(option);\n\t\t}\n\t});\n\n\t$(\"#\" + idPrefix +  \"date-month\").change(function(){\n\t\tvar date = moment($(\"#\" + idPrefix + \"date\").val());\n\t\tvar daySelect = $(\"#\" + idPrefix +  \"date-day\")[0];\n\t\twhile(daySelect.firstChild)\n\t\t\tdaySelect.removeChild(daySelect.firstChild);\n\n\t\tvar month = parseInt($(this).val(), 10);\n\t\tvar year = parseInt($(\"#\" + idPrefix +  \"date-year\").val(), 10);\n\t\tvar daysInMonth = moment().year(year).month(month).daysInMonth();\n\t\tfor(var day = 1; day <= daysInMonth; day++){\n\t\t\toption = document.createElement(\"option\");\n\t\t\toption.value = day;\n\t\t\toption.appendChild(document.createTextNode(day));\n\t\t\tif(day == daysInMonth && lastDaySelectedByDefault)\n\t\t\t\toption.selected = true;\n\t\t\tdaySelect.appendChild(option);\n\t\t}\n\t});\n\n\tfunction updateDate(){\n\t\tif($(\"#\" + idPrefix + \"date-unknown\").prop(\"checked\")){\n\t\t\t$(\"#\" + idPrefix +  \"date\").val(\"\");\n\t\t\treturn;\n\t\t}\n\n\t\tvar year = parseInt($(\"#\" + idPrefix +  \"date-year\").val(), 10);\n\t\tvar month = parseInt($(\"#\" + idPrefix +  \"date-month\").val(), 10);\n\t\tvar day = parseInt($(\"#\" + idPrefix +  \"date-day\").val(), 10);\n\t\tvar date = moment().year(year).month(month).date(day);\n\t\tif(date.isValid())\n\t\t\t$(\"#\" + idPrefix +  \"date\").val(date.format(\"YYYY-MM-DD\"));\n\t}\n\n\t$(\"#\" + idPrefix +  \"date-year, #\" + idPrefix +  \"date-month, #\" + idPrefix +  \"date-day\").change(updateDate);\n\n\tfunction unknownDate(){\n\t\t$(\"#\" + idPrefix +  \"date-year, #\" + idPrefix +  \"date-month, #\" + idPrefix +  \"date-day\")\n\t\t\t.prop(\"disabled\", $(this).prop(\"checked\"));\n\t\tupdateDate();\n\n\t\t$(this).prop(\"checked\")\n\t\t\t? $(\"#\" + idPrefix + \"parts-container\").velocity(\"slideUp\")\n\t\t\t: $(\"#\" + idPrefix + \"parts-container\").velocity(\"slideDown\");\n\t}\n\n\t$(\"#\" + idPrefix + \"date-unknown\").change(unknownDate);\n}\n\n$(document).ready(function(){\n\t$.fn.dataTable.moment( \"DD-MMM-YYYY h:mm A\" );\n\n\t$(\".report\").submit(checkReportQuery);\n\t$(\".report\").on(\"click\", \".lastSixMonths\", lastSixMonths);\n\t$(\".report\").on(\"click\", \".lastThreeMonths\", lastThreeMonths);\n\t$(\".datepicker\").datepicker({\n\t\tdateFormat: \"yy-mm-dd\"\n\t});\n\n\t$(\"#addNewSpecificReport\").click();\n\n\t$.extend(true, $.fn.dataTable.defaults, {\n\t\tlanguage: {\n\t\t\tpaginate: {\n\t\t\t\tprevious: \"&lt;\",\n\t\t\t\tnext: \"&gt;\"\n\t\t\t}\n\t\t},\n\t\tstateSave: true,\n\t\tdeferRender: true,\n\t\tdom: \"lfprtip\"\n\t});\n\n\t$.fn.select2.defaults.set(\"theme\", \"bootstrap\");\n\n\t$(\".select2\").val(null).select2({\n\t\tplaceholder: \"Please select\"\n\t});\n\n\t$(\"body\").css(\"padding-top\", $(\"#main-navbar\").height()+5);\n\n\t$(\"#individual-milestones, #aggregate-milestones\").multiSelect({\n\t\tselectableOptgroup: true\n\t});\n\n});\n\n// https://davidwalsh.name/essential-javascript-functions\nfunction debounce(func, wait, immediate){\n\tvar timeout;\n\treturn function(){\n\t\tvar context = this, args = arguments;\n\t\tvar later = function(){\n\t\t\ttimeout = null;\n\t\t\tif(!immediate) func.apply(context, args);\n\t\t};\n\t\tvar callNow = immediate && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t\tif(callNow) func.apply(context, args);\n\t}\n}\n\nvar fixNavbarOffset = debounce(function(){\n\t$(\"body\").css(\"padding-top\", $(\"#main-navbar\").height()+5);\n}, 100);\n\n$(window).resize(fixNavbarOffset);\n\n$(\".table\").on(\"click\", \".view-evaluation\", function(){\n\tvar requestId = $(this).parents(\"tr\").children(\"td\").eq(0).children(\"a\").html();\n\twindow.location.href = \"/evaluation/\"+requestId;\n});\n\n$(\".report-milestones-info\").popover({\n\tplacement: \"left\",\n\thtml: \"true\",\n\tcontent: \"<ul>\" +\n\t\t\t\"<li>Leave empty to include all milestones in training level in report</li>\" +\n\t\t\t\"<li>Click a milestone type heading to select all milestones of that type</li>\" +\n\t\t\"</ul>\"\n});\n\n$(\".toggle-descriptions\").click(function(){\n\tvar questionName = $(this).data(\"id\");\n\tvar headerHeight = $(\"#main-navbar\").height();\n\tvar padding = 5;\n\tvar scrollto = $(this).parents(\".question\").velocity(\"scroll\", {offset: -(headerHeight + padding)});\n\tvar isExpanded = $(\"#\" + questionName).hasClass(\"expanded-descriptions\");\n\tif(isExpanded){\n\t\t$(\".\" + questionName + \" .description\").velocity(\"slideUp\", function(){\n\t\t\t$(\"#\" + questionName).removeClass(\"expanded-descriptions\");\n\t\t});\n\t\t$(this).html('<span class=\"glyphicon glyphicon-zoom-in\"></span> Show descriptions');\n\t}\n\telse {\n\t\t$(\"#\" + questionName).addClass(\"expanded-descriptions\");\n\t\t$(\".\" + questionName + \" .description\").velocity(\"slideDown\");\n\t\t$(this).html('<span class=\"glyphicon glyphicon-zoom-out\"></span> Hide descriptions');\n\t}\n});\n\n$(\"table\").on(\"mouseenter\", \".table-date-cell\", function(){\n\tvar date = $(this).data(\"date-value\");\n\tif(date){\n\t\t$(this).data(\"original-value\", $(this).text());\n\t\t$(this).text(moment(date).format(\"ll\"));\n\t}\n});\n\n$(\"table\").on(\"mouseenter\", \".table-date-time-cell\", function(){\n\tvar date = $(this).data(\"date-value\");\n\tif(date){\n\t\t$(this).data(\"original-value\", $(this).text());\n\t\t$(this).text(moment(date).format(\"ll LT\"));\n\t}\n});\n\n$(\"table\").on(\"mouseleave\", \".table-date-cell, .table-date-time-cell\", function(){\n\tvar originalValue = $(this).data(\"originalValue\");\n\tif(originalValue)\n\t\t$(this).text(originalValue);\n});\n\nfunction ucfirst(str){\n\treturn str.charAt(0).toUpperCase() + str.substring(1);\n}\n\nfunction createDateCell(td, date, rowData, rowIndex, colIndex){\n\tif(date && $(td).text() !== moment(date).format(\"ll\"))\n\t\t$(td).attr(\"data-date-value\", moment(date).valueOf())\n\t\t\t.addClass(\"table-date-cell\");\n}\n\nfunction createDateTimeCell(td, date, rowData, rowIndex, colIndex){\n\tif(date && $(td).text() !== moment(date).format(\"ll LT\"))\n\t\t$(td).attr(\"data-date-value\", moment(date).valueOf())\n\t\t\t.addClass(\"table-date-time-cell\");\n}\n\nfunction renderDateCell(date, type){\n\tif(type === \"sort\" || type === \"type\")\n\t\treturn date ? moment(date).valueOf() : \"\";\n\n\treturn date ? moment(date).format(\"MMMM Y\") : \"\";\n}\n\nfunction renderDateTimeCell(date, type){\n\tif(type === \"sort\" || type === \"type\")\n\t\treturn date ? moment(date).valueOf() : \"\";\n\n\treturn date ? moment(date).calendar() : \"\";\n}\n\nfunction renderAccountStatus(status){\n\tvar labelContext;\n\tswitch(status){\n\t\tcase \"active\":\n\t\t\tlabelContext = \"label-success\";\n\t\t\tbreak;\n\t\tcase \"inactive\":\n\t\t\tlabelContext = \"label-danger\";\n\t\t\tbreak;\n\t\tcase \"pending\":\n\t\t\tlabelContext = \"label-warning\";\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlabelContext = \"label-default\";\n\t\t\tbreak;\n\t}\n\treturn '<span class=\"label ' + labelContext + '\">' + ucfirst(status) + '</span>';\n}\n\nfunction renderEvaluationStatus(status){\n\tvar labelContext;\n\tswitch(status){\n\t\tcase \"complete\":\n\t\t\tlabelContext = \"label-success\";\n\t\t\tbreak;\n\t\tcase \"disabled\":\n\t\tcase \"canceled by admin\":\n\t\tcase \"canceled by faculty\":\n\t\tcase \"canceled by resident\":\n\t\tcase \"canceled by fellow\":\n\t\tcase \"canceled by staff\":\n\t\t\tlabelContext = \"label-danger\";\n\t\t\tbreak;\n\t\tcase \"pending\":\n\t\t\tlabelContext = \"label-warning\";\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tlabelContext = \"label-default\";\n\t\t\tbreak;\n\t}\n\treturn '<span class=\"label ' + labelContext + '\">' + ucfirst(status) + '</span>';\n}\n\nfunction renderTrainingLevel(trainingLevel){\n\tif(trainingLevel){\n\t\tif(trainingLevel.indexOf(\"ca-\") > -1)\n\t\t\treturn trainingLevel.toUpperCase();\n\t\telse\n\t\t\treturn ucfirst(trainingLevel);\n\t}\n\n\treturn \"\";\n}\n\nfunction renderSecondaryTrainingLevel(secondaryTrainingLevel){\n\tif(secondaryTrainingLevel){\n\t\tvar allCaps = [\"raaps\"];\n\t\tif(allCaps.indexOf(secondaryTrainingLevel) > -1)\n\t\t\treturn secondaryTrainingLevel.toUpperCase();\n\t\telse\n\t\t\treturn ucfirst(secondaryTrainingLevel);\n\t}\n\n\treturn \"\";\n}\n\nfunction createEditAndDeleteButtons(thing, name){\n\tvar dataAttributes = getDataAttributes(thing);\n\n\tvar editButton = '<button type=\"button\" class=\"btn btn-xs btn-info edit-' + name + '-button\" '\n\t\t+ dataAttributes\n\t\t+ '><span class=\"glyphicon glyphicon-edit\"></span> Edit</button>';\n\n\tvar deleteButton = '<button type=\"button\" class=\"btn btn-xs btn-danger delete-' + name + '-button\" '\n\t\t+ dataAttributes\n\t\t+ '><span class=\"glyphicon glyphicon-remove\"></span> Delete</button>';\n\n\treturn [editButton, deleteButton];\n}\n\nfunction confirmDeletion(){\n\t$(\".confirm-delete\").removeClass(\"confirm-delete\")\n\t\t.html('<span class=\"glyphicon glyphicon-remove\"></span> Delete');\n\t$(this).addClass(\"confirm-delete\")\n\t\t.html('<span class=\"glyphicon glyphicon-remove\"></span> Confirm delete');\n}\n\nfunction getDataAttributes(thing){\n\tvar dataAttributes = \"\";\n\tObject.getOwnPropertyNames(thing).forEach(function(propName){\n\t\tdataAttributes += 'data-' + propName + '=\"' + thing[propName] + '\" ';\n\t});\n\treturn dataAttributes;\n}\n\n$(\".table-filter-select\").change(function(){\n\tvar filterType = $(this).val();\n\t$($(this).data(\"filterTable\")).DataTable({\n\t\tretrieve: true\n\t}).column($(this).data(\"filterColumn\")).search(filterType).draw();\n});\n\n$(\".refresh-table-glyph\").click(function(){\n\t$($(this).data(\"table\")).DataTable({\n\t\tretrieve: true\n\t}).ajax.reload();\n\t$(this).attr(\"title\", \"Refreshed!\").tooltip(\"fixTitle\").tooltip(\"show\");;\n});\n\n$(\".refresh-table-glyph\").on(\"hidden.bs.tooltip\", function(){\n\t$(this).attr(\"title\", \"Refresh\").tooltip(\"fixTitle\");\n});\n\n$(\"[data-toggle='tooltip']\").tooltip();\n","\n// MCW Colors\n// var averageSolidColor = \"rgba(0,67,100,1)\";\n// var averageFillColor = \"rgba(0,67,100,0.2)\";\n// var individualSolidColor = \"rgba(1,108,100,1)\";\n// var individualFillColor = \"rgba(1,108,100,0.2)\";\n\nvar averageSolidColor = \"rgba(227,227,0,1)\";\nvar averageFillColor = \"rgba(227,227,0,0.3)\";\nvar individualSolidColor = \"rgba(227,0,0,1)\";\nvar individualFillColor = \"rgba(227,0,0,0.3)\";\n\nvar options = {\n\tanimation: false,\n\tresponsive: true,\n\tangleLineWidth: 2,\n\ttooltipTemplate: \"<%if (label){%><%=label%>: <%}%><%= Math.round10(value, -2) %>\",\n\tmultiTooltipTemplate: \"<%= Math.round10(value, -2) %>\",\n\tlegendTemplate: \"<ul class=\\\"legend <%=name.toLowerCase()%>-legend\\\">\" +\n\t\t\"<% for (var i=0; i<datasets.length; i++){%>\" +\n\t\t\t\"<li><span class=\\\"glyphicon glyphicon-stop\\\" style=\\\"color:<%=datasets[i].strokeColor%>\\\"></span> \" +\n\t\t\t\"<%if(datasets[i].label){%><%=datasets[i].label%>\" +\n\t\t\"<%}%></li><%}%></ul>\",\n\tscaleShowLabels: true,\n\tscaleOverride: true,\n\tscaleLineWidth: 2,\n\tscaleSteps: 5,\n\tscaleStepWidth: 2,\n\tscaleStartValue: 0,\n\tscaleLabel: function(values){\n\t\treturn scaleLabels[values.value/2];\n\t}\n};\n\nfunction drawRadarGraphs(milestoneData, competencyData, title, index){\n\tindex = typeof index != \"undefined\" ? index : 0;\n\n\tvar div = document.getElementsByClassName(\"graphs\")[index];\n\tvar row = document.createElement(\"div\");\n\trow.className = \"graph-container\";\n\tvar h3 = document.createElement(\"h3\");\n\th3.appendChild(document.createTextNode(title));\n\trow.appendChild(h3);\n\n\tvar milestoneGraph = document.createElement(\"div\");\n\tmilestoneGraph.className = \"graph milestone-graph\";\n\tvar milestoneTitle = document.createElement(\"h4\");\n\tmilestoneTitle.appendChild(document.createTextNode(\"Milestones\"));\n\tmilestoneGraph.appendChild(milestoneTitle);\n\tvar milestoneCanvasDiv = document.createElement(\"div\");\n\tmilestoneCanvasDiv.className = \"graph-canvas-container\";\n\tvar milestoneCanvas = document.createElement(\"canvas\");\n\tmilestoneCanvas.width = 800;\n\tmilestoneCanvas.height = 400;\n\tmilestoneCanvasDiv.appendChild(milestoneCanvas);\n\tmilestoneGraph.appendChild(milestoneCanvasDiv);\n\trow.appendChild(milestoneGraph);\n\n\tvar competencyGraph = document.createElement(\"div\");\n\tcompetencyGraph.className = \"graph competency-graph\";\n\tvar competencyTitle = document.createElement(\"h4\");\n\tcompetencyTitle.appendChild(document.createTextNode(\"Competencies\"));\n\tcompetencyGraph.appendChild(competencyTitle);\n\tvar competencyCanvasDiv = document.createElement(\"div\");\n\tcompetencyCanvasDiv.className = \"graph-canvas-container\";\n\tvar competencyCanvas = document.createElement(\"canvas\");\n\tcompetencyCanvas.width = 800;\n\tcompetencyCanvas.height = 400;\n\tcompetencyCanvasDiv.appendChild(competencyCanvas);\n\tcompetencyGraph.appendChild(competencyCanvasDiv);\n\trow.appendChild(competencyGraph);\n\n\tdiv.appendChild(row);\n\n\tvar graphType = $(\"#graph-type\").val();\n\tvar vertical = $(\"#graph-layout\").bootstrapSwitch(\"state\");\n\tif(!vertical){\n\t\tmilestoneGraph.className += \" col-sm-6\";\n\t\tcompetencyGraph.className += \" col-sm-6\";\n\t}\n\n\tvar mCtx = milestoneCanvas.getContext(\"2d\");\n\tvar cCtx = competencyCanvas.getContext(\"2d\");\n\n\tif(graphType == \"radar\"){\n\t\tvar mGraph = new Chart(mCtx).Radar(milestoneData, options);\n\t\tvar cGraph = new Chart(cCtx).Radar(competencyData, options);\n\t}\n\telse if(graphType == \"bar\"){\n\t\tvar mGraph = new Chart(mCtx).Bar(milestoneData, options);\n\t\tvar cGraph = new Chart(cCtx).Bar(competencyData, options);\n\t}\n\telse if(graphType == \"line\"){\n\t\tvar mGraph = new Chart(mCtx).Line(milestoneData, options);\n\t\tvar cGraph = new Chart(cCtx).Line(competencyData, options);\n\t}\n\n\tvar legend = mGraph.generateLegend();\n\t$(row).append(legend);\n}\n\n$(\"#graph-type\").change(function(){\n\t$(\".graphs\").html(\"\");\n\tChart.helpers.each(Chart.instances,function(instance){\n\t\tinstance.destroy();\n\t});\n\tdrawAllRadarGraphs();\n});\n\n$(\"#new-graphs\").on(\"switchChange.bootstrapSwitch\", function(){\n\t$(\".graph-type-container\").toggle();\n\t$(\".graph-layout-container\").toggle();\n\t$(\".img-graphs\").toggle();\n\t$(\".graphs\").toggle();\n});\n\n$(\"#graph-layout\").on(\"switchChange.bootstrapSwitch\", function(){\n\t$(\".graph\").toggleClass(\"col-sm-6\");\n\tChart.helpers.each(Chart.instances,function(instance){\n\t\tinstance.resize(instance.render, true);\n\t});\n});\n\nfunction drawAverageRadarGraphs(){\n\treportData.forEach(function(report, index){\n\n\t\tprepareReport(report);\n\n\t\tvar milestoneData = {\n\t\t\tlabels: report.milestoneLabels,\n\t\t\tdatasets: [\n\t\t\t\treport.averageMilestoneDataset\n\t\t\t]\n\t\t};\n\n\t\tvar competencyData = {\n\t\t\tlabels: report.competencyLabels,\n\t\t\tdatasets: [\n\t\t\t\treport.averageCompetencyDataset\n\t\t\t]\n\t\t}\n\n\t\tdrawRadarGraphs(milestoneData, competencyData, \"Average\");\n\t});\n}\n\nfunction drawAllRadarGraphs(){\n\treportData.forEach(function(report, index){\n\n\t\tprepareReport(report);\n\n\t\treport.subjectIds.forEach(function(subjectId){\n\t\t\tvar milestoneData = {\n\t\t\t\tlabels: report.milestoneLabels,\n\t\t\t\tdatasets: [\n\t\t\t\t\treport.averageMilestoneDataset,\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"Individual Performance\",\n\t\t\t\t\t\tfillColor: individualFillColor,\n\t\t\t\t\t\tstrokeColor: individualSolidColor,\n\t\t\t\t\t\tpointColor: individualSolidColor,\n\t\t\t\t\t\tpointStrokeColor: \"#fff\",\n\t\t\t\t\t\tpointHighlightFill: \"#fff\",\n\t\t\t\t\t\tpointHighlightStroke: individualSolidColor,\n\t\t\t\t\t\tdata: _.values(report.subjectMilestone[subjectId])\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tvar competencyData = {\n\t\t\t\tlabels: report.competencyLabels,\n\t\t\t\tdatasets: [\n\t\t\t\t\treport.averageCompetencyDataset,\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"Individual Performance\",\n\t\t\t\t\t\tfillColor: individualFillColor,\n\t\t\t\t\t\tstrokeColor: individualSolidColor,\n\t\t\t\t\t\tpointColor: individualSolidColor,\n\t\t\t\t\t\tpointStrokeColor: \"#fff\",\n\t\t\t\t\t\tpointHighlightFill: \"#fff\",\n\t\t\t\t\t\tpointHighlightStroke: individualSolidColor,\n\t\t\t\t\t\tdata: _.values(report.subjectCompetency[subjectId])\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tdrawRadarGraphs(milestoneData, competencyData, report.subjects[subjectId], index);\n\t\t});\n\t});\n}\n\nfunction prepareReport(report){\n\t// Sort subject ids by subject name\n\treport.subjectIds = _.keys(report.subjects).sort(function(a, b){return report.subjects[a].localeCompare(report.subjects[b]);})\n\n\tif(report.trainingLevel == \"fellow\")\n\t\treport.scaleLabels = [\"\", \"Fellow Level 1\", \"Fellow Level 2\", \"Fellow Level 3\", \"Fellow Level 4\", \"Fellow Level 5\"];\n\telse\n\t\treport.scaleLabels = [\"\", \"CBY\", \"CA-1\", \"CA-2\", \"CA-3\", \"Attending\"];\n\n\toptions.scaleLabel = function(values){\n\t\treturn report.scaleLabels[values.value/2];\n\t};\n\n\treport.milestoneLabels = _.values(report.milestones);\n\treport.averageMilestones = _.values(report.averageMilestone);\n\treport.competencyLabels = _.values(report.competencies);\n\treport.averageCompetencies = _.values(report.averageCompetency);\n\n\tfor(var i = 0; i < report.milestoneLabels.length; i++){\n\t\treport.milestoneLabels[i] = report.milestoneLabels[i].replace(\"Anes Fellow \", \"\");\n\t\treport.milestoneLabels[i] = report.milestoneLabels[i].replace(\"and\", \"&\");\n\t}\n\n\treport.averageMilestoneDataset = {\n\t\tlabel: \"Average Performance\",\n\t\tfillColor: averageFillColor,\n\t\tstrokeColor: averageSolidColor,\n\t\tpointColor: averageSolidColor,\n\t\tpointStrokeColor: \"#fff\",\n\t\tpointHighlightFill: \"#fff\",\n\t\tpointHighlightStroke: averageSolidColor,\n\t\tdata: report.averageMilestones\n\t};\n\n\treport.averageCompetencyDataset = {\n\t\tlabel: \"Average Performance\",\n\t\tfillColor: averageFillColor,\n\t\tstrokeColor: averageSolidColor,\n\t\tpointColor: averageSolidColor,\n\t\tpointStrokeColor: \"#fff\",\n\t\tpointHighlightFill: \"#fff\",\n\t\tpointHighlightStroke: averageSolidColor,\n\t\tdata: report.averageCompetencies\n\t};\n}\n","var evalHistoryChart = [];\n\nvar solidColors = {\n\tRequested: \"rgba(227,227,0,1)\",\n\tCompleted: \"rgba(227,0,0,1)\"\n};\n\nvar fillColors = {\n\tRequested: \"rgba(227,227,0,0.3)\",\n\tCompleted: \"rgba(227,0,0,0.3)\"\n};\n\nvar options = {\n\tresponsive: true,\n\ttooltipTemplate: \"<%if (label){%><%=label%>: <%}%><%= value %>\",\n\tlegendTemplate: \"<ul class=\\\"legend <%=name.toLowerCase()%>-legend\\\">\" +\n\t\t\"<% for (var i=0; i<datasets.length; i++){%>\" +\n\t\t\t\"<li><span class=\\\"glyphicon glyphicon-stop\\\" style=\\\"color:<%=datasets[i].strokeColor%>\\\"></span> \" +\n\t\t\t\"<%if(datasets[i].label){%><%=datasets[i].label%>\" +\n\t\t\"<%}%></li><%}%></ul>\",\n};\n\nfunction drawLineChart(canvas, chartData, chartLabels){\n\tif(evalHistoryChart[canvas] != undefined)\n\t\tevalHistoryChart[canvas].destroy();\n\n\tvar ctx = $(canvas).get(0).getContext(\"2d\");\n\n\tvar datasets = [];\n\tfor(var i in chartData){\n\t\tdatasets.push({\n\t\t\tlabel: i,\n\t\t\tfillColor: fillColors[i],\n\t\t\tstrokeColor: solidColors[i],\n\t\t\tpointColor: solidColors[i],\n\t\t\tpointStrokeColor: \"#fff\",\n\t\t\tpointHighlightFill: \"#fff\",\n\t\t\tpointHighlightStroke: solidColors[i],\n\t\t\tdata: chartData[i]\n\t\t});\n\t}\n\n\tvar data = {\n\t\tlabels: chartLabels,\n\t\tdatasets: datasets\n\t}\n\tevalHistoryChart[canvas] = new Chart(ctx).Line(data, options);\n\t$(canvas+\"-legend\").html(evalHistoryChart[canvas].generateLegend());\n}\n\nvar labelFormats = {\n\tyear: \"YYYY\",\n\tmonth: \"MMMM\",\n\tweek: \"[Week of] MMM D\",\n\tday: \"MMM D\"\n};\n\nfunction getChartEvalData(evals, startDate, endDate, increment, incrementNum){\n\tincrement = increment != undefined ? increment : \"month\";\n\tincrementNum = incrementNum != undefined ? incrementNum : 1;\n\tstartDate = startDate != undefined ? startDate : moment().subtract(1, \"year\").startOf(increment);\n\tendDate = endDate != undefined ? endDate : moment();\n\n\tvar labelFormat = \"MMM D\";\n\tif(labelFormats[increment] != undefined)\n\t\tlabelFormat = labelFormats[increment];\n\tvar labels = [];\n\tvar chartData = {\n\t\tRequested: [],\n\t\tCompleted: []\n\t};\n\n\tfor(var start = startDate; start < endDate; start.add(incrementNum, increment)){\n\t\tvar end = moment(start).add(incrementNum, increment);\n\t\tvar r = evals.reduce(function(num, e){\n\t\t\tif(e.request_date != undefined){\n\t\t\t\tvar rd = moment(e.request_date);\n\t\t\t\tif(rd >= start && rd < end)\n\t\t\t\t\treturn num + 1;\n\t\t\t}\n\t\t\treturn num;\n\t\t}, 0);\n\n\t\tvar c = evals.reduce(function(num, e){\n\t\t\tif(e.complete_date != undefined && e.status == \"complete\"){\n\t\t\t\tvar cd = moment(e.complete_date);\n\t\t\t\tif(cd >= start && cd < end)\n\t\t\t\t\treturn num + 1;\n\t\t\t}\n\t\t\treturn num;\n\t\t}, 0);\n\n\t\tlabels.push(start.format(labelFormat));\n\t\tchartData[\"Requested\"].push(r);\n\t\tchartData[\"Completed\"].push(c);\n\t}\n\n\treturn [chartData, labels];\n}\n"],"sourceRoot":"/source/"}