{
	"$id": "https://www.residentprogram.com/schemas/merit-report.json#",
	"title": "Merit Report Checklist",
	"type": "object",
	"properties": {
		"pages": {
			"type": "array",
			"items": {
				"$ref": "#/definitions/section"
			}
		}
	},
	"required": [
		"pages"
	],
	"definitions": {
		"section": {
			"title": "Section",
			"type": "object",
			"properties": {
				"type": {"const": "section"},
				"title": {"type": "string"},
				"items": {
					"type": "array",
					"items": {
						"oneOf": [
							{"$ref": "#/definitions/section"},
							{"$ref": "#/definitions/item"},
							{"$ref": "#/definitions/instruction"}
						]
					}
				}
			},
			"required": ["type", "items"]
		},
		"instruction": {
			"title": "Instruction block",
			"type": "object",
			"properties": {
				"type": {"const": "instruction"},
				"text": {"type": "string"}
			}
		},
		"item": {
			"title": "Checklist item",
			"type": "object",
			"properties": {
				"type": {"const": "item"},
				"text": {"type": "string"},
				"checked": {"type": "boolean"},
				"subjectReadonly": {"type": "boolean"},
				"questions": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/question"
					}
				}
			},
			"required": ["type", "text"]
		},
		"question": {
			"title": "Question",
			"type": "object",
			"oneOf": [
				{"$ref": "#/definitions/question/definitions/text"},
				{"$ref": "#/definitions/question/definitions/number"},
				{"$ref": "#/definitions/question/definitions/checkbox"},
				{"$ref": "#/definitions/question/definitions/radio"},
				{"$ref": "#/definitions/question/definitions/list"}
			],
			"definitions": {
				"text": {
					"title": "Text question",
					"type": "object",
					"properties": {
						"type": {"enum": ["text", "textarea"]},
						"text": {"type": "string"},
						"description": {"type": "string"},
						"placeholder": {"type": "string"},
						"value": {"type": "string"},
						"required": {"type": "boolean"}
					},
					"required": [
						"type",
						"text"
					]
				},
				"number": {
					"title": "Number question",
					"type": "object",
					"properties": {
						"type": {"const": "number"},
						"text": {"type": "string"},
						"description": {"type": "string"},
						"placeholder": {"type": "string"},
						"min": {"type": "number"},
						"max": {"type": "number"},
						"value": {"type": "number"},
						"required": {"type": "boolean"}
					},
					"required": [
						"type",
						"text"
					]
				},
				"checkbox": {
					"title": "Checkbox question",
					"type": "object",
					"properties": {
						"type": {"const": "checkbox"},
						"text": {"type": "string"},
						"description": {"type": "string"},
						"required": {"type": "boolean"},
						"options": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"text": {"type": "string"},
									"description": {"type": "string"},
									"value": {
										"oneOf": [
											{"type": "string"},
											{"type": "number"}
										]
									},
									"editable": {"type": "boolean"},
									"checked": {"type": "boolean"}
								},
								"required": [
									"text",
									"value"
								]
							}
						}
					},
					"required": [
						"type",
						"text",
						"options"
					]
				},
				"radio": {
					"title": "Radio question",
					"type": "object",
					"properties": {
						"type": {"const": "radio"},
						"text": {"type": "string"},
						"description": {"type": "string"},
						"required": {"type": "boolean"},
						"options": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"text": {"type": "string"},
									"description": {"type": "string"},
									"value": {
										"oneOf": [
											{"type": "string"},
											{"type": "number"}
										]
									},
									"editable": {"type": "boolean"},
									"checked": {"type": "boolean"}
								},
								"required": [
									"text",
									"value"
								]
							}
						}
					},
					"required": [
						"type",
						"text",
						"options"
					]
				},
				"list": {
					"title": "List question",
					"type": "object",
					"properties": {
						"type": {"const": "list"},
						"listType": {"enum": [
							"text",
							"publication",
							"committee",
							"study",
							"grant",
							"grantOther",
							"certification",
							"editorialBoard",
							"review",
							"lecture",
							"audienceLecture",
							"mentorship",
							"subjectMentorship"
						]},
						"text": {"type": "string"},
						"description": {"type": "string"},
						"ordered": {"type": "boolean"},
						"itemProps": {"type": "object"},
						"itemLabels": {"type": "object"},
						"items": {
							"type": "array",
							"items": {
								"oneOf": [
									{"$ref": "#/definitions/question/definitions/list/definitions/text"},
									{"$ref": "#/definitions/question/definitions/list/definitions/publication"},
									{"$ref": "#/definitions/question/definitions/list/definitions/committee"},
									{"$ref": "#/definitions/question/definitions/list/definitions/study"},
									{"$ref": "#/definitions/question/definitions/list/definitions/grant"},
									{"$ref": "#/definitions/question/definitions/list/definitions/certification"},
									{"$ref": "#/definitions/question/definitions/list/definitions/editorialBoard"},
									{"$ref": "#/definitions/question/definitions/list/definitions/review"},
									{"$ref": "#/definitions/question/definitions/list/definitions/lecture"},
									{"$ref": "#/definitions/question/definitions/list/definitions/mentorship"}
								]
							}
						}
					},
					"required": [
						"type",
						"listType"
					],
					"definitions": {
						"text": {
							"title": "Text list item",
							"type": "object",
							"properties": {
								"type": {"const": "text"},
								"text": {"type": "string"}
							},
							"required": [
								"type"
							]
						},
						"publication": {
							"title": "Publication list item",
							"type": "object",
							"properties": {
								"type": {"const": "publication"},
								"title": {"type": "string"},
								"author": {"type": "string"},
								"link": {"type": "string"},
								"role": {"type": "string"}
							},
							"required": [
								"type"
							]
						},
						"committee": {
							"title": "Committee list item",
							"type": "object",
							"properties": {
								"type": {"const": "committee"},
								"name": {"type": "string"},
								"role": {"enum": ["chair", "member"]}
							},
							"required": [
								"type"
							]
						},
						"study": {
							"title": "Study list item",
							"type": "object",
							"properties": {
								"type": {"const": "study"},
								"title": {"type": "string"},
								"role": {"type": "string"},
								"yearInitiated": {"type": "string"},
								"approvalNumber": {"type": "string"},
								"progress": {"type": "string"}
							},
							"required": [
								"type"
							]
						},
						"grant": {
							"title": "Grant submission list item",
							"type": "object",
							"properties": {
								"type": {"enum": ["grant", "grantOther"]},
								"agency": {"type": "string"},
								"project": {"type": "string"},
								"amount": {"type": "number"}
							},
							"required": [
								"type"
							]
						},
						"certification": {
							"title": "Certification list item",
							"type": "object",
							"properties": {
								"type": {"const": "certification"},
								"board": {"type": "string"},
								"specialty": {"type": "string"}
							},
							"required": [
								"type"
							]
						},
						"editorialBoard": {
							"title": "Editorial board list item",
							"type": "object",
							"properties": {
								"type": {"const": "editorialBoard"},
								"journal": {"type": "string"},
								"role": {"type": "string"}
							},
							"required": [
								"type"
							]
						},
						"review": {
							"title": "Journal reviewer list item",
							"type": "object",
							"properties": {
								"type": {"const": "review"},
								"work": {"type": "string"},
								"reviews": {"type": "number"}
							},
							"required": [
								"type"
							]
						},
						"lecture": {
							"title": "Lecture list item",
							"type": "object",
							"properties": {
								"type": {"enum": [
									"lecture",
									"audienceLecture"
								]},
								"title": {"type": "string"},
								"date": {"type": "string"},
								"audience": {"type": "string"}
							},
							"required": [
								"type"
							]
						},
						"mentorship": {
							"title": "Mentorship / advisorship list item",
							"type": "object",
							"properties": {
								"type": {"enum": ["mentorship", "subjectMentorship"]},
								"mentee": {"type": "string"},
								"subject": {"type": "string"}
							},
							"required": [
								"type"
							]
						}
					}
				}
			}
		}
	}
}
